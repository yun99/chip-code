var e=Object.create,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,a=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,n=e=>t(e,"__esModule",{value:!0});((e,r)=>{for(var o in n(e),r)t(e,o,{get:r[o],enumerable:!0})})(exports,{default:()=>h,getDataByExpr:()=>b});var c,_=(c=require("./3d.js"),((e,a,n)=>{if(a&&"object"==typeof a||"function"==typeof a)for(let c of o(a))s.call(e,c)||"default"===c||t(e,c,{get:()=>a[c],enumerable:!(n=r(a,c))||n.enumerable});return e})(n(t(null!=c?e(a(c)):{},"default",c&&c.__esModule&&"default"in c?{get:()=>c.default,enumerable:!0}:{value:c,enumerable:!0})),c));function b(e,t){return e.split(".").reduce(((e,t)=>e[t]),t)}var h={apply(e){if(e.properties&&e.observers&&Object.keys(e.properties).forEach((t=>{const r=e.properties[t],o=r.observer;r.observer=function(e,r,...a){o&&o.apply(this,[e,r].concat(a));try{this.__obRecordChange({[t]:e})}catch(e){}}})),e.observers){e.methods=e.methods||{};const{observers:t}=e;e.methods.__$observers=function(){return t},delete e.observers}},methods:{__obProxySetData(){const e=this.setData;Object.defineProperty(this,"setData",{writable:!0,configurable:!0,value:(t,r,...o)=>{e.apply(this,[t,r].concat(o));try{this.__obRecordChange(t)}catch(e){}}})},__obInitObervers(){const e=this.__$observers(),t=[];return e&&Object.keys(e).forEach((r=>{t.push(this.__obWatch(r,e[r]))})),()=>t.forEach((e=>e()))},__obRecordChange(e){const t=Object.keys(e);this.__obNotify(t)},__obNotify(e,t){t=t||this.data,this.__obChangeHandler(e,t)},__obChangeHandler(e,t){const r=e.reduce(((e,t)=>(this.__$obDepsManager.get(t).forEach((t=>{const{id:r}=t;e[r]=t})),e)),{});Object.keys(r).forEach((e=>{const{fn:o,args:a}=r[e];o.apply(this,a.map((e=>e?b(e,t):t)))}))},__obWatch(e,t){const r=(0,_.getObserverInfo)(e,t),{depsStatic:o,depsMatch:a}=r;o.forEach((e=>this.__$obDepsManager.add(e,r))),a.forEach((e=>this.__$obDepsManager.add(e,r,!1)));return()=>{o.forEach((e=>this.__$obDepsManager&&this.__$obDepsManager.remove(e,r))),a.forEach((e=>this.__$obDepsManager&&this.__$obDepsManager.remove(e,r,!1)))}}},lifetimes:{created(){this.__$obDepsManager=new _.default,this.__obProxySetData(),this.__$obUnwatch=this.__obInitObervers()},detached(){this.__$obUnwatch&&this.__$obUnwatch(),this.__$obUnwatch=null,this.__$obDepsManager&&this.__$obDepsManager.dispose(),this.__$obDepsManager=null}}};