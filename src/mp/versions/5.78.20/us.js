var e=Object.defineProperty,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(t,r,s)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,h=(e,t,r)=>(o(e,"symbol"!=typeof t?t+"":t,r),r);((t,r)=>{for(var s in(t=>{e(t,"__esModule",{value:!0})})(t),r)e(t,s,{get:r[s],enumerable:!0})})(exports,{HookType:()=>n,NoPreFetchedDataError:()=>l,PreFetchingType:()=>i,behavior:()=>d,default:()=>u});var i,a,n,c,l=class extends Error{constructor(){super(...arguments),h(this,"name","NoPreFetchedDataError")}};(a=i||(i={})).INIT="init",a.NAVIGATE="navigate",(c=n||(n={})).FETCH_START="fetchStart",c.GET_DATA_START="getDataStart",c.FETCH_END="fetchEnd";var p=new class{constructor(){h(this,"handlers",new Map),h(this,"initialPaths",new Set),h(this,"fetchers",new Map),h(this,"hooks",[])}match(e){return this.handlers.has(e)}register(e,h,a){const n=((e,h)=>{for(var i in h||(h={}))r.call(h,i)&&o(e,i,h[i]);if(t)for(var i of t(h))s.call(h,i)&&o(e,i,h[i]);return e})({expiry:3e4},h);this.handlers.set(e,{option:n,handler:a}),h.type===i.INIT&&this.initialPaths.add(e)}getInitFetchPaths(){return[...this.initialPaths]}fetchParallel(e,t,r=2){let s=0;const o=[];return Promise.all(e.map((({path:e,pageId:h,query:i})=>new Promise((e=>{const t=()=>{s++,e()};s<r?t():o.push(t)})).then((()=>this.fetch(e,h,t,i))).catch((e=>{})).then((()=>{if(s--,s<r){const e=o.shift();e&&e()}})))))}fetch(e,t,r,s){const o=this.handlers.get(e);if(void 0===o)return Promise.resolve();const h={},{option:a,handler:c}=o;let l;try{l=Promise.resolve(c(r,s)).then((t=>(this.triggerHook(e,n.FETCH_END,h),t)))}catch(t){this.triggerHook(e,n.FETCH_END,h),l=Promise.reject(t)}const p=a.type===i.NAVIGATE?setTimeout((()=>this.fetchers.delete(t)),a.expiry):void 0;return this.fetchers.set(t,{path:e,result:l,timer:p,context:h}),this.triggerHook(e,n.FETCH_START,h),l}getPreFetchedData(e){const t=this.fetchers.get(e);if(t){const{timer:r,context:s,path:o,result:h}=t;return clearTimeout(r),this.fetchers.delete(e),this.triggerHook(o,n.GET_DATA_START,s),Promise.resolve(h)}return Promise.reject(new l)}registerHook(e){this.hooks.push(e)}triggerHook(e,t,r){this.hooks.forEach((s=>{try{s(e,t,r)}catch(e){}}))}},d={onLoad(e){e.__preFetcherId&&(this.__preFetcherId=e.__preFetcherId)},methods:{getPreFetchedData(){return p.getPreFetchedData(this.__preFetcherId)}}},u=p;