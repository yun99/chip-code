var e=Object.defineProperty;((r,o)=>{for(var s in(r=>{e(r,"__esModule",{value:!0})})(r),o)e(r,s,{get:o[s],enumerable:!0})})(exports,{default:()=>s});var{CAT_SEC_CATEGORY:r}=require("./iu.js"),o=getApp(),s=class{constructor(e){this.order=e}handleErrorReason(e){const r=e&&e.reason&&e.reason.buttonViews,s=e&&e.exceptionPopProductModelList;return r&&r.length?s?(this.order.setData({errorMessage:{exceptionProductVoList:s,buttonView:r},confirmPopupShow:!0}),Promise.resolve(1)):(1===r.length&&(o.$lxLog.mv("b_youxuan_sf1ybfsa_mv",{msg:e.msg,code_id:e.code}),this.order.alert({title:e.reason.title,message:e.msg,isCatchTouchMove:!0,textOK:r[0].desc,ok:()=>{this.handleCode(r[0].code,r[0].url),o.$lxLog.mc("b_youxuan_ymcldoz1_mc",{msg:e.msg,code_id:e.code})}})),2===r.length&&(o.$lxLog.mv("b_youxuan_nkdysmci_mv",{msg:e.msg,code_id:e.code}),this.order.confirm({message:e.msg,isCatchTouchMove:!0,textCancel:r[0].desc,textOK:r[1].desc,cancel:()=>{this.handleCode(r[0].code),o.$lxLog.mc("b_youxuan_kwv1vi7t_mc",{msg:e.msg,code_id:e.code})},ok:()=>{this.handleCode(r[1].code),o.$lxLog.mc("b_youxuan_afiumsey_mc",{msg:e.msg,code_id:e.code})}})),Promise.resolve(1)):Promise.resolve(1)}handleCode(e,r){switch(this.order.actionSelect=e,this.order.fromSource=4,this.order.setData({confirmPopupShow:!1}),e){case 1:case 2:this.order.service.orderPreview();break;case 3:this.order.service.submit();break;case 4:default:break;case 5:case 6:o.$router.triggerBack("submitOrder-handleCode");break;case 25:this.order.doNotNeedResetPreview&&this.order.doNotNeedResetPreview(),o.$router.goto("/subPackages/location/pages/selfPickSelect/index",{from:"submitOrder",cartType:this.order.isBuyNow?"9":"0"});break;case 11:this.order.setData({submitDisabled:!0});break;case 2009:this.order.setData({"orderPreview.resultPersonName":""});break;case 26:if(-1!==r.indexOf("pageFrom=deliveryAddress")){const{poiInfo:e={}}=o.$poi||{},{poiId:s="",poiIdStr:t}=e,d=`${r}&poiId=${s}&poiIdStr=${t}`;o.$router.goto(d)}else o.$router.goto(r)}}handleAddressError(){this.order.confirm({message:"您的收货地址发生了变更，请重新选择收货地址",textCancel:"暂不选择",textOK:"重新选择",cancel:()=>{o.$router.triggerBack("submitOrder-handleAddressError")},ok:()=>{var e,r;const{addressInfo:s}=null==(r=null==(e=this.order)?void 0:e.data)?void 0:r.orderPreview,{poiInfo:t={}}=o.$poi||{},{poiId:d="",poiIdStr:i=""}=t,a={deliveryAddress:JSON.stringify({address:(null==s?void 0:s.address)||"",addressId:(null==s?void 0:s.addressId)||"",name:(null==s?void 0:s.addressPerson)||"",houseNumber:(null==s?void 0:s.houseNumber)||"",phone:(null==s?void 0:s.mobile)||"",latitude:(null==s?void 0:s.latitude)||"",longitude:(null==s?void 0:s.longitude)||""}),poiId:d,poiIdStr:i};o.$router.goto("igrocery://www.grocery.com/receiver/list?pageFrom=deliveryAddress",a)}})}handleErrorReport(e,s){const{order:t}=this;o.$cat.reportError(r.SUBMIT_ORDER_OTHER_ERROR(`报错接口：${e}\n\n                错误为： ${s} \n\n                数据为：\n                 ${JSON.stringify({orderPreview:t.data.orderPreview,fromSource:t.fromSource,ifPreviewResponse:t.ifPreviewResponse})} \n`)),o.$cat.reportAllErrorRightNow()}};