var e=Object.create,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.getPrototypeOf,i=Object.prototype.hasOwnProperty,u=e=>t(e,"__esModule",{value:!0});((e,r)=>{for(var a in u(e),r)t(e,a,{get:r[a],enumerable:!0})})(exports,{default:()=>l});var n,s=(n=require("./j9.js"),((e,o,u)=>{if(o&&"object"==typeof o||"function"==typeof o)for(let n of a(o))i.call(e,n)||"default"===n||t(e,n,{get:()=>o[n],enumerable:!(u=r(o,n))||u.enumerable});return e})(u(t(null!=n?e(o(n)):{},"default",n&&n.__esModule&&"default"in n?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n)),l=class{constructor(e){this.cfgManager=e,this.data=[]}setMetric(e,t,r={}){try{if(!e||"string"!=typeof e||"number"!=typeof t||"object"!=typeof r)return;let a=this.cfgManager.get("metric");if(a&&"number"==typeof a.sample&&Math.random()>a.sample)return;this.data.push({key:e,vs:[t],tvs:r}),this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.data.length>=(a.trigger||15)?this.report():this.timeout=setTimeout((()=>{this.report()}),a.delay||1500)}catch(e){}}report(){try{if(!this.data||!this.data.length)return;let e=[].concat(this.data);this.data=[];const t=this.cfgManager;(0,s.requestQueue)({url:`${t.getApiPath("metric",2)}&p=${t.get("project")}`,method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded"},data:"data="+encodeURIComponent(JSON.stringify(e))})}catch(e){}}};