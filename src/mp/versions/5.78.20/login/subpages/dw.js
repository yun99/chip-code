var e=Object.create,t=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,n=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,i=e=>t(e,"__esModule",{value:!0}),l=l=>((e,n,i)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let l of s(n))o.call(e,l)||"default"===l||t(e,l,{get:()=>n[l],enumerable:!(i=a(n,l))||i.enumerable});return e})(i(t(null!=l?e(n(l)):{},"default",l&&l.__esModule&&"default"in l?{get:()=>l.default,enumerable:!0}:{value:l,enumerable:!0})),l);((e,a)=>{for(var s in i(e),a)t(e,s,{get:a[s],enumerable:!0})})(exports,{default:()=>m});var r=l(require("./dt.js")),c=l(require("./kq.js")),d=new r.default,m={data:{namesInfo:{}},initNamesSDK({data:e,success:t,fail:a}={}){c.rohr.i(c.rohrConfig.i),this.callBackSuccess=t,this.callBackFail=a,this.setData({namesInfo:{disabled:!1,data:e,show:!0,opacity:.5,isSend:!1,namesInput:"",mobilePlaceholder:e.mobilePlaceholder||"手机号",codePlaceholder:e.codePlaceholder||"验证码",mainTitle:e.mainTitle||"为了您的账号安全",subTitle:e.subTitle||"请补全以下信息完成验证",buttonValue:e.buttonValue||"验证"}}),this.getNamesInfo()},getNamesInfo(){const{namesInfo:e,namesInfo:{data:{request_code:t,action:a,type:s,options:n}}}=this.data,o=this;e.namesInput="",d.sendInfo({request_code:t,type:s,action:a}).then((t=>{if(1===t.status){const a=t.data.prompt.name,s="*"!==a[0],n=a.replace(/\*/g,"").length,o=s?0:a.length-n,i=s?n:a.length;e.namesClear=a.substring(o,i),e.namesEncryptLen=a.length-n,e.isNamesFirst=s,e.namesMessage=t.data.prompt.message,e.isSend=!0,e.fontSize=a.length<=10?50:40,e.fontSize=a.length>15?32:e.fontSize,e.opacity=.5}else tt.showToast({title:t.error.message||"发生异常了",content:t.error.message||"发生异常了"});o.setData({namesInfo:e})})).catch((()=>{d.catchCallback("获取数据异常",0,"请求生日验证信息出异常了",n,this)}))},bindNamesSwitch(){const{namesInfo:e={},namesInfo:{isNamesFirst:t,namesClear:a,namesInput:s,isSend:n,opacity:o,data:{action:i,request_code:l,type:r,options:c,listIndex:m}}}=this.data,u=t?a+s:s+a;if(!n||1!==o)return;let h=this.data;h.namesInfo.disabled=!0,this.setData(h),tt.showLoading({title:"验证中...",mask:!0}),d.verify({request_code:l,type:r,action:i,options:{filledName:u,listIndex:m}}).then((t=>{h=this.data,h.namesInfo.disabled=!1,this.setData(h),tt.hideLoading();const{status:a,error:s,data:n}=t;if(1===a){if(e.show=!1,d.nextVerify(e.data,n.nextVerifyMethodId))return;this.setData({namesInfo:e}),d.successCallback(l,n.response_code,c,this)}else this.handleError(s)})).catch((()=>{d.catchCallback("验证异常",0,"请求验证异常了",c,this)}))},handleError(e){const{namesInfo:{data:{options:t}}}=this.data;d.errorCallback(e,t,this.getNamesInfo,this)},bindNamesInput(e){const{namesInfo:t}=this.data;t.namesInput=e.detail.value,t.opacity=e.detail.value.length===t.namesEncryptLen?1:.5,this.setData({namesInfo:t})},changeVerify(){const{namesInfo:{data:e}}=this.data;d.changeVerify(e)},onTapPage(e){c.rohr.t(e)},onTouchMovePage(e){c.rohr.m(e)}};