var e=Object.create,t=Object.defineProperty,o=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,i=Object.getPrototypeOf,n=Object.prototype.hasOwnProperty,r=e=>t(e,"__esModule",{value:!0}),a=a=>((e,i,r)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let a of s(i))n.call(e,a)||"default"===a||t(e,a,{get:()=>i[a],enumerable:!(r=o(i,a))||r.enumerable});return e})(r(t(null!=a?e(i(a)):{},"default",a&&a.__esModule&&"default"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a);((e,o)=>{for(var s in r(e),o)t(e,s,{get:o[s],enumerable:!0})})(exports,{default:()=>c});var d=a(require("./l9.js")),l=a(require("./kq.js")),c=class{constructor({requestCode:e,pageData:t}){const{windowWidth:o=375,windowHeight:s}=d.default.getSystemInfo()||{},i=o/375,n=[50*i,50*i],r=[Number((270*i).toFixed(3)),Number((52*i).toFixed(3))],a=[Number((o/2-135*i).toFixed(3)),Number((s/2-25*i).toFixed(3))],l=Date.now(),c=r[0]-n[0];Object.assign(this,{requestCode:e,windowWidth:o,zoom:i,btn:n,initTime:l,slideWidth:c,isDone:!1,zone:r,client:a,Timestamp:[l],count:0,timeout:0,points:null,trajectory:[],pageData:t})}sliderTouchStart(e){const t=this;t.Timestamp.push(Date.now()),t.count+=1,t.points=[],t.addPoint(e)}sliderTouchMove(e){const{isDone:t,slideWidth:o}=this;if(t)return{isDone:t,deltaX:o,slideWidth:o};const s=this.addPoint(e);return this.getPosition(s)}sliderTouchCancel(){this.slidEnd()}sliderTouchEnd(){}getPoint(e){const{clientX:t,clientY:o}=e.touches[0]||{};return[t,o]}addPoint(e){const{points:t,initTime:o}=this,[s,i]=this.getPoint(e);return this.points=t||[],this.points.push([0,s,i,Date.now()-o]),[s,i]}getPosition([e,t]){const{slideWidth:o,points:[s],isDone:i}=this;let n=e-s[1];return n<0&&(n=0),n>=o&&(n=o,this.isDone=!0,this.slidEnd()),{deltaX:n,slideWidth:o,isDone:i}}slidEnd(){const e=this,{points:t=[],Timestamp:o,pageData:s={},requestCode:i}=e;let n=e.trajectory;n=n.slice(-3,n.length),n.push({point:t,vector:{orientation:"h"}}),e.trajectory=n,e.points=null;o[o.length-1]-o[0]>3e3&&(e.timeout+=1),e.setData();const{data:{action:r,type:a}}=s,c={action:r,id:a,requestCode:i,behavior:e.behavior};d.default.verfiySlide(c).then((e=>{const t=getApp().$loginPage,o=t.data.requestCode,{data:s,status:i,error:n}=e;if(1===i)tt.showToast({title:"验证成功",content:"验证成功",complete:()=>{let e="";s&&(e=s.response_code),t.triggerEvent?t.triggerEvent("sliderEvent",{status:1,requestCode:o,responseCode:e},{bubbles:!0,composed:!0}):t.props.sliderEvent({status:1,requestCode:o,responseCode:e}),t.setData({isShow:!1})}});else if(0===i&&121048===n.code){const e=n.request_code;t.setData({"sdk.requestCode":e}),t.setData({codeImage:`${l.YodaServer.getYodaServer().getServer()}/v2/captcha?request_code=${e}&action=${r}`,validStep:"code"})}else 0===i&&121079===n.code?(tt.showToast({title:n.message,content:n.message,mask:!0,icon:"loading",type:"fail"}),t.showSlider({requestCode:t.data.requestCode})):(t.triggerEvent?t.triggerEvent("sliderEvent",{status:0,code:n.code},{bubbles:!0,composed:!0}):t.props.sliderEvent({status:0,code:n.code}),t.setData({isShow:!1}))})).catch((()=>{const e=getApp().$loginPage;e.triggerEvent?e.triggerEvent("sliderEvent",{status:0,code:99999},{bubbles:!0,composed:!0}):e.props.sliderEvent({status:0,code:99999}),e.setData({isShow:!1})}))}setData(){const{zone:e,client:t,Timestamp:o,count:s,timeout:i,trajectory:n}=this,r={env:{zone:e,client:t,Timestamp:o.slice(0,2),count:s,timeout:i},trajectory:n};this.behavior=r}};