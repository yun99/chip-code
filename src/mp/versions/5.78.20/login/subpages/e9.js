var e=Object.create,t=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,r=r=>{return((e,i,r)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let n of a(i))o.call(e,n)||"default"===n||t(e,n,{get:()=>i[n],enumerable:!(r=s(i,n))||r.enumerable});return e})((n=t(null!=r?e(i(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0}),t(n,"__esModule",{value:!0})),r);var n},n=r(require("./l8.js")),d=r(require("./l9.js")),l=r(require("./kq.js")),u=new(r(require("./dt.js")).default);getApp();Component({properties:{title:{type:String,value:"验证"},imgTitle:{type:String,value:"请输入图片中的内容"},imgButton:{type:String,value:"验证"}},props:{title:"验证",imgTitle:"请输入图片中的内容",imgButton:"验证",sliderEvent:e=>{}},data:{isShow:!1},methods:{showSlider({requestCode:e}){l.rohr.i(l.rohrConfig.i),u.getPageData(e,"slider").then((t=>{const s=new n.default({requestCode:e,pageData:t});getApp().$loginPage=this,this.setData({sdk:s,moveWidth:0,codeImage:"",requestCode:e,sliderCode:"",isShow:!0,validStep:"slider",slideStatusClass:"",animationData:{},pageData:t})})).catch((()=>{this.triggerEvent?this.triggerEvent("sliderEvent",{status:0,code:99999},{bubbles:!0,composed:!0}):this.props.sliderEvent({status:0,code:99999}),this.setData({isShow:!1})}));const t=tt.createAnimation({transformOrigin:"50% 50%",duration:500,timingFunction:"ease",delay:0});this.animation=t},sliderVerifySuccess(e){const t=this,s=e?e.response_code:"",{requestCode:a}=t.data;tt.showToast({title:"验证成功",content:"验证成功",complete:()=>{t.triggerEvent?t.triggerEvent("sliderEvent",{status:1,requestCode:a,responseCode:s},{bubbles:!0,composed:!0}):t.props.sliderEvent({status:1,requestCode:a,responseCode:s}),t.setData({isShow:!1})}})},sliderTouchStart(e){const{sdk:t}=this.data;t.sliderTouchStart(e)},sliderTouchMove(e){const{sdk:t}=this.data,{deltaX:s,isDone:a}=t.sliderTouchMove(e);let i="";a&&(i="slider-boxLoading"),this.setData({moveWidth:s,slideStatusClass:i})},sliderTouchEnd(e){const{sdk:t}=this.data,{isDone:s}=t;s?this.setData({slideStatusClass:"slider-boxLoading"}):(t.sliderTouchEnd(e),this.setData({moveWidth:0}))},sliderClose(){this.setData({isShow:!1}),this.triggerEvent?this.triggerEvent("sliderEvent",{status:0,code:33333},{bubbles:!0,composed:!0}):this.props.sliderEvent({status:0,code:33333})},sliderValideCode(e){const t=this,{sliderCode:s,pageData:a,sdk:{requestCode:i}}=this.data;d.default.verfiyCode({captchacode:s,action:a.data.action,id:1,requestCode:i}).then((e=>{const{status:s,error:a,data:i}=e;1===s?t.sliderVerifySuccess(i):0===s&&121020===a.code?(tt.showToast({title:a.message,content:a.message,icon:"loading",type:"fail"}),t.sliderUpdataCaptch()):tt.showToast({title:a.message,content:a.message,icon:"none",type:"none",duration:2e3,complete:()=>{t.triggerEvent?t.triggerEvent("sliderEvent",{status:0,code:a.code},{bubbles:!0,composed:!0}):t.props.sliderEvent({status:0,code:a.code}),t.setData({isShow:!1})}})}),(()=>{t.triggerEvent?t.triggerEvent("sliderEvent",{status:0,code:99999},{bubbles:!0,composed:!0}):t.props.sliderEvent({status:0,code:99999}),t.setData({isShow:!1})}))},sliderUpdataCaptch(){const{sdk:e,pageData:t}=this.data;this.setData({codeImage:`${l.YodaServer.getYodaServer().getServer()}/v2/captcha?request_code=${e.requestCode}&action=${t.action}&captchaHash=${Number(new Date)}`,sliderCode:""})},sliderValideCodeInput(e){this.setData({sliderCode:e.detail.value})},bindSliderInputFocus(){let{animationData:e}=this.data;this.animation.top(200).step(),e=this.animation.export(),this.setData({animationData:e})},bingSliderInputBlur(){let{animationData:e}=this.data;this.animation.top(300).step(),e=this.animation.export(),this.setData({animationData:e})},onTapPage(e){l.rohr.t(e)},onTouchMovePage(e){l.rohr.m(e)}}});