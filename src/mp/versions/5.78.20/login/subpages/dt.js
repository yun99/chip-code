var e=Object.create,t=Object.defineProperty,a=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.getPrototypeOf,r=Object.prototype.hasOwnProperty,c=e=>t(e,"__esModule",{value:!0}),n=(e,a,o)=>(((e,a,o)=>{a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[a]=o})(e,"symbol"!=typeof a?a+"":a,o),o);((e,a)=>{for(var o in c(e),a)t(e,o,{get:a[o],enumerable:!0})})(exports,{default:()=>u});var l,i=(l=require("./kq.js"),((e,s,c)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let n of o(s))r.call(e,n)||"default"===n||t(e,n,{get:()=>s[n],enumerable:!(c=a(s,n))||c.enumerable});return e})(c(t(null!=l?e(s(l)):{},"default",l&&l.__esModule&&"default"in l?{get:()=>l.default,enumerable:!0}:{value:l,enumerable:!0})),l)),u=class{constructor(){n(this,"getPageData",((e,t)=>{let a={requestCode:e,feVersion:i.feVersion[t]||"0.1.0",source:i.source};return a._token=encodeURIComponent(i.rohr.r(a)),new Promise(((e,t)=>{tt.request({method:"POST",url:`${i.YodaServer.getYodaServer().getServer()}/v2/ext_api/page_data`,data:a,header:{"content-type":"application/x-www-form-urlencoded"},headers:{"content-type":"application/x-www-form-urlencoded"},success:function(a){const{status:o,data:s,error:r}=a.data;200===a.statusCode||200===a.status?e({status:o,data:s,error:r}):t(a)},fail:function(e){t(e)}})})).catch((()=>{tt.showToast({title:"getPageData失败",content:"getPageData失败"})}))})),n(this,"sendInfo",(({request_code:e,type:t,action:a="",options:o=null}={})=>{let s={request_code:e};if(o&&"object"==typeof o)for(const e in o)o.hasOwnProperty(e)&&(s[e]=o[e]);return s._token=encodeURIComponent(i.rohr.r(s)),new Promise(((e,o)=>{tt.request({url:`${i.YodaServer.getYodaServer().getServer()}/v2/ext_api/${a}/info?id=${t}`,method:"POST",data:s,header:{"content-type":"application/x-www-form-urlencoded"},headers:{"content-type":"application/x-www-form-urlencoded"},success:t=>{const{status:a,data:s,error:r}=t.data;200===t.statusCode||200===t.status?e({status:a,data:s,error:r}):o("")},fail:e=>{o(e)}})}))})),n(this,"verify",(({request_code:e,type:t,action:a="",options:o=null}={})=>{let s={request_code:e};if(o&&"object"==typeof o)for(const e in o)o.hasOwnProperty(e)&&(s[e]=o[e]);return s._token=encodeURIComponent(i.rohr.r(s)),new Promise(((e,o)=>{tt.request({url:`${i.YodaServer.getYodaServer().getServer()}/v2/ext_api/${a}/verify?id=${t}`,method:"POST",data:s,header:{"content-type":"application/x-www-form-urlencoded"},headers:{"content-type":"application/x-www-form-urlencoded"},success:t=>{const{status:a,data:s,error:r}=t.data;200===t.statusCode||200===t.status?e({status:a,data:s,error:r}):o()},fail:e=>{o(e)}})}))})),n(this,"nextVerify",((e,t)=>{let{category:a}=e;if(e.type=t,"GROUP"===a&&(t||0===t))return tt.setStorage({key:"yodaPageData",data:e}),tt.redirectTo({url:"./../../modules/index/index"}),!0})),n(this,"catchCallback",((e,t,a,o,s,r)=>{if("face"!==r)tt.showToast({title:e,content:e,icon:"none",type:"none",mask:!0,duration:2e3,complete:()=>{if("string"==typeof s.callBackFail){let e=`status=0&code=${t}&msg=${a}`;e=s.callBackFail.indexOf("?")>0?`&${e}`:`?${e}`,setTimeout((()=>{s.navigate({options:o,url:s.callBackFail+e})}),1e3)}"function"===s.callBackFail&&setTimeout((()=>{s.callBackFail({status:0,code:t,msg:a})}),1e3)}});else{if("string"==typeof s.callBackFail){let e=`status=0&code=${t}&msg=${a}`;e=s.callBackFail.indexOf("?")>0?`&${e}`:`?${e}`,s.navigate({options:o,url:s.callBackFail+e})}"function"===s.callBackFail&&s.callBackFail({status:0,code:t,msg:a})}})),n(this,"errorCallback",((e,t,a,o,s)=>{let r=e.code||0;const c=e.message||"网络错误";switch(Object.keys(i.closeStatus).forEach((e=>{Number(i.closeStatus[e])===r&&(r="jump")})),r){case 121008:tt.showToast({title:"验证错误",content:"验证错误",complete:a.bind(o)});break;case 121068:tt.showToast({title:"输入错误",content:"输入错误",complete:a.bind(o)});break;case 121038:tt.showToast({title:"操作过于频繁",content:"操作过于频繁"});break;case 121044:this.catchCallback("授权码过期",r,c,t,o);break;case 121048:o.Image.showImage({requestCode:e.request_code});break;case 121060:o.Slider.showSlider({requestCode:e.request_code});break;case 121047:tt.showToast({title:"请重新发送验证",content:"请重新发送验证",complete:a.bind(o)});break;case 121079:tt.showToast({title:"验证失败",content:"请重新操作",complete:a.bind(o)});break;case 121084:case 121101:tt.showToast({title:"人脸比对未通过",content:"请重新操作",complete:a.bind(o)});break;case 121100:tt.showToast({title:"人脸多于一个,请核实后重试",content:"请重新操作",complete:a.bind(o)});break;case 121102:tt.showToast({title:"人脸对比失败,请重试",content:"请重新操作",complete:a.bind(o)});break;case"jump":this.catchCallback(c,r,c,t,o,s);break;default:this.catchCallback("发生异常了",r,c,t,o,s)}})),n(this,"successCallback",((e,t,a,o)=>{if("function"==typeof o.callBackSuccess&&o.callBackSuccess({status:1,requestCode:e,responseCode:t}),"string"==typeof o.callBackSuccess){let s=`status=1&requestCode=${e}&responseCode=${t}`;s=o.callBackSuccess.indexOf("?")>0?`&${s}`:`?${s}`,o.navigate({options:a,url:o.callBackSuccess+s})}})),n(this,"changeVerify",(e=>{e.type=-1,"GROUP"===e.category&&(tt.setStorage({key:"yodaPageData",data:e}),tt.redirectTo({url:"./../../modules/index/index"}))}))}};