var t=Object.create,e=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,o=Object.getPrototypeOf,i=Object.prototype.hasOwnProperty,n=t=>e(t,"__esModule",{value:!0}),r=r=>((t,o,n)=>{if(o&&"object"==typeof o||"function"==typeof o)for(let r of s(o))i.call(t,r)||"default"===r||e(t,r,{get:()=>o[r],enumerable:!(n=a(o,r))||n.enumerable});return t})(n(e(null!=r?t(o(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);((t,a)=>{for(var s in n(t),a)e(t,s,{get:a[s],enumerable:!0})})(exports,{default:()=>f});var l=r(require("./dt.js")),c=r(require("./kq.js")),h=new l.default,f={data:{lbsInfo:{}},initLbsSDK({data:t,success:e,fail:a}={}){c.rohr.i(c.rohrConfig.i),this.callBackSuccess=e,this.callBackFail=a,this.setData({lbsInfo:{data:t,show:!0,opacity:.5,verifyDisa:!0,geolocation:[],verifyButText:t.verifyButText||"验证",changeText:t.changeText||"换一换"}}),this.getLbsInfo()},getLbsInfo(){const{lbsInfo:t,lbsInfo:{data:{request_code:e,action:a,type:s,options:o}}}=this.data;h.sendInfo({request_code:e,type:s,action:a}).then((e=>{const{status:a,data:s,error:o}=e;if(1===a){const{items:e,hint:a}=s.prompt.geolocation;for(let t of e)t.checked=!1;t.items=e,t.hint=a,t.opacity=.5,t.verifyDisa=!0,this.setData({lbsInfo:t})}else this.handleLbsError(o)})).catch((()=>{h.catchCallback("获取数据异常",0,"请求获取数据出异常了",o,this)}))},bindChange(){this.getLbsInfo()},bindVerify(){const{lbsInfo:t,lbsInfo:{geolocation:e,data:{action:a,request_code:s,type:o,options:i,listIndex:n}}}=this.data;this.data.lbsInfo.verifyDisa=!0,this.setData(this.data),tt.showLoading({title:"验证中...",mask:!0}),h.verify({request_code:s,type:o,action:a,options:{geolocation:JSON.stringify(e),listIndex:n}}).then((e=>{tt.hideLoading(),this.data.lbsInfo.verifyDisa=!1,this.setData(this.data);const{status:a,data:o,error:n}=e;if(1===a){if(t.show=!1,h.nextVerify(t.data,o.nextVerifyMethodId))return;this.setData({lbsInfo:t}),h.successCallback(s,o.response_code,i,this)}else this.handleLbsError(n)})).catch((()=>{h.catchCallback("验证异常",0,"请求验证异常了",i,this)}))},bindRadioChange(t){const e=t.detail.value,{lbsInfo:a}=this.data;a.geolocation[0]=e,a.opacity=1,a.verifyDisa=!1;for(let t of a.items)t.geohash===e?t.checked=!0:t.checked=!1;this.setData({lbsInfo:a})},handleLbsError(t){const{lbsInfo:{data:{options:e}}}=this.data;h.errorCallback(t,e,this.getLbsInfo,this)},changeVerify(){const{lbsInfo:{data:t}}=this.data;h.changeVerify(t)},onTapPage(t){c.rohr.t(t)},onTouchMovePage(t){c.rohr.m(t)},onPullDownRefresh:()=>{tt.stopPullDownRefresh()}};