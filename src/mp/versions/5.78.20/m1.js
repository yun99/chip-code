var e=Object.create,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols,i=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,u=(e,r,s)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[r]=s,n=(e,t)=>{for(var r in t||(t={}))l.call(t,r)&&u(e,r,t[r]);if(a)for(var r of a(t))o.call(t,r)&&u(e,r,t[r]);return e},c=e=>t(e,"__esModule",{value:!0}),m=a=>((e,a,i)=>{if(a&&"object"==typeof a||"function"==typeof a)for(let o of s(a))l.call(e,o)||"default"===o||t(e,o,{get:()=>a[o],enumerable:!(i=r(a,o))||i.enumerable});return e})(c(t(null!=a?e(i(a)):{},"default",a&&a.__esModule&&"default"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a);((e,r)=>{for(var s in c(e),r)t(e,s,{get:r[s],enumerable:!0})})(exports,{skuDataFormat:()=>E,skuListFormat:()=>T});var d=m(require("./ob.js")),O=m(require("./lz.js")),p=m(require("./kn.js"));function T(e,t,r="",s){const{type:a="",itemKey:i=""}=e;a||d.log.error(`/guessLikeWrapper/utils skuListFormat 榜单类型异常; ${JSON.stringify(e)}`);let l=!1,o=!1,u={itemList:[],moduleTitle:"",subModuleTitle:"",jumperVO:{text:"",iretail:""},extraParams:{}};switch(a){case O.BOARDENUMTYPES.CBOARD:{const{cboardVO:t={}}=e;if(!Object.keys(t).length)return d.log.warn(`/guessLikeWrapper/utils 榜单数据异常, 请确认 cboardVO 属性是否存在; 异常榜单数据${JSON.stringify(e)}`),u;u.itemList=t.cboardTabVO&&t.cboardTabVO.skuItems||[],u.moduleTitle=t.cboardName&&t.cboardName.text||O.SKU_BOARD_TYPE_MAP[a].defTitle||"",u.subModuleTitle=t.cboardDesc&&t.cboardDesc.text||O.SKU_BOARD_TYPE_MAP[a].defSubTitle||"",u.jumperVO=t.jumpUrl||{},u.extraParams={list_id:t.boardType||"-999",list_name:u.moduleTitle||"-999"},delete t.cboardTabVO,delete t.cboardName,delete t.cboardDesc,delete t.jumpUrl,u=n(n({},u),t);break}case O.BOARDENUMTYPES.OFTENBUY:case O.BOARDENUMTYPES.SUBJECT:case O.BOARDENUMTYPES.SALEPROMOTION:case O.BOARDENUMTYPES.CMARKET:case O.BOARDENUMTYPES.STANDARDDEPARTMENT:case O.BOARDENUMTYPES.SPECIAL:case O.BOARDENUMTYPES.INSEASON:case O.BOARDENUMTYPES.NETHOTCOLUM:case O.BOARDENUMTYPES.BRAND:case O.BOARDENUMTYPES.HORIZONTALSCROLLCARD:case O.BOARDENUMTYPES.LIVE:if(O.SKU_BOARD_TYPE_MAP[a]){const t=O.SKU_BOARD_TYPE_MAP[a],r=e[t.key];if(!r)return d.log.warn(`/guessLikeWrapper/utils 未匹配到 key, type 匹配不正确, 请确认类型是否存在; 异常榜单数据${JSON.stringify(e)}`),u;u.itemList=r.itemList||[],u.moduleTitle=r.moduleTitle&&r.moduleTitle.text||t.defTitle||"",u.subModuleTitle=r.sndModuleTitle&&r.sndModuleTitle.text||t.defSubTitle||"",u.jumperVO=r.jumperVO||{},u.extraParams=function(e,t){if(t===O.BOARDENUMTYPES.SUBJECT)return{subject_id:e.bannerId||"-999",subject_name:e.moduleTitle.text||""};if(t===O.BOARDENUMTYPES.SALEPROMOTION)return{activity_type:e.promotionId||""};if(t===O.BOARDENUMTYPES.CMARKET)return{market_name:e.sceneType||""};if(t===O.BOARDENUMTYPES.LIVE)return{live_id:e.liveId||""};if(t===O.BOARDENUMTYPES.BRAND)return{brand_id:e.brandId||"",brand_name:e.brandName||""};return{}}(r,a),delete r.itemList,delete r.moduleTitle,delete r.sndModuleTitle,delete r.jumperVO,u=n(n({},u),r)}}return s&&"b"===s?u.itemList=u.itemList.slice(0,4):(l=!0,o=!0),(0,p.skuListParser)(u.itemList||[],t),n({type:a,itemKey:i,requestid:r,isCustomPicClick:l,isScrollBoard:o},u)}function E(e){const{data:t=[],schemasMap:r=O.SKU_BOARD_TYPE_MAP,requestid:s="",strategy:a="b",renderedListLength:i=0}=e;if(!t||!t.length)return{};let l={};try{const e=t.length;for(let o=0;o<e;o++){let e=t[o],u={};if(r[e.type])u=r[e.type].schema;else{d.log.warn("ttLandingPage/components/guessLikeWrapper/utils 未匹配到「卡片 schema」, 请确认类型是否存在");u=r[1].schema}1===e.type?((0,p.skuItemParser)(e,u),e.canRec=!0,e.requestid=s,e.itemKey=`${e.skuId}_${o}`,e.type=1):(e.itemKey=`${e.type}_${i+o}`,e=T(e,u,s,a)),l[`list[${i+o}]`]=e}}catch(e){d.log.error("skuDataFormat",e),l={}}return{skuList:l}}