Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=i(require("./n0.js")),o=i(require("./mq.js")),r=require("./2k.js");function i(e){return e&&e.__esModule?e:{default:e}}var a=["white","grey","black","blue","cyan","green","magenta","red","yellow"];function s(e){return!e}function p(e){return e&&"object"===(void 0===e?"undefined":t(e))&&!Array.isArray(e)}var l=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.candidate=e,this.throwExceptionIf(s(p(e)),"must be an object."),this.throwExceptionIf(s(p(e.appenders)),'must have a property "appenders" of type object.'),this.throwExceptionIf(s(p(e.categories)),'must have a property "categories" of type object.'),this.deprecationWarnings=!0,"deprecationWarnings"in this.candidate&&(this.deprecationWarnings=this.candidate.deprecationWarnings),this.levels=e.levels,this.appenders=e.appenders,this.categories=e.categories}return e(t,[{key:"throwExceptionIf",value:function(e,t){(Array.isArray(e)?e:[e]).forEach((function(e){if(e)throw new Error("Problem with log4js configuration "+t)}))}},{key:"loadAppenderModule",value:function(e){return"console"===e?r.console:"wx"===e?r.wx:void 0}},{key:"createAppender",value:function(e,t){var n=this.loadAppenderModule(t.type);this.throwExceptionIf(s(n),'appender "'+e+'" is not valid (type "'+t.type+'" could not be found)');var i=n.configure(t,o.default,this.configuredAppenders.get.bind(this.configuredAppenders),this.configuredLevels);return i.deprecated&&this.deprecationWarnings&&r.console.error('Appender "'+e+'" uses a deprecated type "'+t.type+'", which will be removed in log4js v3. You should change it to use "'+i.deprecated+'". To turn off this warning add "deprecationWarnings: false" to your config.'),i}},{key:"appenders",get:function(){return this.configuredAppenders},set:function(e){var t=this,n=Object.keys(e);this.throwExceptionIf(s(n.length),"must define at least one appender."),this.configuredAppenders=new Map,n.forEach((function(n){t.throwExceptionIf(s(e[n].type),'appender "'+n+'" is not valid (must be an object with property "type")'),t.configuredAppenders.set(n,t.createAppender(n,e[n]))}))}},{key:"categories",get:function(){return this.configuredCategories},set:function(e){var t=this,n=Object.keys(e);this.throwExceptionIf(s(n.length),"must define at least one category."),this.configuredCategories=new Map,n.forEach((function(n){var o=e[n];t.throwExceptionIf([s(o.appenders),s(o.level)],'category "'+n+'" is not valid (must be an object with properties "appenders" and "level")'),t.throwExceptionIf(s(Array.isArray(o.appenders)),'category "'+n+'" is not valid (appenders must be an array of appender names)'),t.throwExceptionIf(s(o.appenders.length),'category "'+n+'" is not valid (appenders must contain at least one appender name)');var r=[];o.appenders.forEach((function(e){t.throwExceptionIf(s(t.configuredAppenders.get(e)),'category "'+n+'" is not valid (appender "'+e+'" is not defined)'),r.push(t.appenders.get(e))})),t.throwExceptionIf(s(t.configuredLevels.getLevel(o.level)),'category "'+n+'" is not valid (level "'+o.level+'" not recognised; valid levels are '+t.configuredLevels.levels.join(", ")+")"),t.configuredCategories.set(n,{appenders:r,level:t.configuredLevels.getLevel(o.level)})})),this.throwExceptionIf(s(e.default),'must define a "default" category.')}},{key:"levels",get:function(){return this.configuredLevels},set:function(e){var t=this;e&&(this.throwExceptionIf(s(p(e)),"levels must be an object"),Object.keys(e).forEach((function(n){t.throwExceptionIf(s(/^[A-Za-z][A-Za-z0-9_]*$/g.test(n)),'level name "'+n+'" is not a valid identifier (must start with a letter, only contain A-Z,a-z,0-9,_)'),t.throwExceptionIf(s(p(e[n])),'level "'+n+'" must be an object'),t.throwExceptionIf(s(e[n].value),'level "'+n+"\" must have a 'value' property"),t.throwExceptionIf(s(function(e){return e&&"number"==typeof e&&Number.isInteger(e)}(e[n].value)),'level "'+n+'".value must have an integer value'),t.throwExceptionIf(s(e[n].colour),'level "'+n+"\" must have a 'colour' property"),t.throwExceptionIf(s(a.indexOf(e[n].colour)>-1),'level "'+n+'".colour must be one of '+a.join(", "))})));this.configuredLevels=(0,n.default)(e)}}]),t}();exports.default=l;