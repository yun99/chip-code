var e=Object.defineProperty;((r,t)=>{for(var n in(r=>{e(r,"__esModule",{value:!0})})(r),t)e(r,n,{get:t[n],enumerable:!0})})(exports,{extract:()=>c,parse:()=>a,parseUrl:()=>s,stringify:()=>i});var r=require("./j8.js");function t(e,r){return r.encode?r.strict?encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)):encodeURIComponent(e):e}function n(e,t){return t.decode?r(e):e}function o(e){return Array.isArray(e)?e.sort():"object"==typeof e?o(Object.keys(e)).sort(((e,r)=>Number(e)-Number(r))).map((r=>e[r])):e}function c(e){const r=e.indexOf("?");return-1===r?"":e.slice(r+1)}function a(e,r){const t=function(e){let r;switch(e.arrayFormat){case"index":return(e,t,n)=>{r=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),r?(void 0===n[e]&&(n[e]={}),n[e][r[1]]=t):n[e]=t};case"bracket":return(e,t,n)=>{r=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),r?void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=[t]:n[e]=t};default:return(e,r,t)=>{void 0!==t[e]?t[e]=[].concat(t[e],r):t[e]=r}}}(r=Object.assign({decode:!0,arrayFormat:"none"},r)),c=Object.create(null);if("string"!=typeof e)return c;if(!(e=e.trim().replace(/^[?#&]/,"")))return c;for(const o of e.split("&")){let[e,a]=o.replace(/\+/g," ").split("=");a=void 0===a?null:n(a,r),t(n(e,r),a,c)}return Object.keys(c).sort().reduce(((e,r)=>{const t=c[r];return Boolean(t)&&"object"==typeof t&&!Array.isArray(t)?e[r]=o(t):e[r]=t,e}),Object.create(null))}var i=(e,r)=>{!1===(r=Object.assign({encode:!0,strict:!0,arrayFormat:"none"},r)).sort&&(r.sort=()=>{});const n=function(e){switch(e.arrayFormat){case"index":return(r,n,o)=>null===n?[t(r,e),"[",o,"]"].join(""):[t(r,e),"[",t(o,e),"]=",t(n,e)].join("");case"bracket":return(r,n)=>null===n?[t(r,e),"[]"].join(""):[t(r,e),"[]=",t(n,e)].join("");default:return(r,n)=>null===n?t(r,e):[t(r,e),"=",t(n,e)].join("")}}(r);return e?Object.keys(e).sort(r.sort).map((o=>{const c=e[o];if(void 0===c)return"";if(null===c)return t(o,r);if(Array.isArray(c)){const e=[];for(const r of c.slice())void 0!==r&&e.push(n(o,r,e.length));return e.join("&")}return`${t(o,r)}=${t(c,r)}`})).filter((e=>e.length>0)).join("&"):""},s=(e,r)=>({url:e.split("?")[0]||"",query:a(c(e),r)});