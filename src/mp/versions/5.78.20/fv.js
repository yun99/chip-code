var e=Object.create,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,o=Object.getPrototypeOf,n=Object.prototype.hasOwnProperty,s=e=>t(e,"__esModule",{value:!0}),l=l=>((e,o,s)=>{if(o&&"object"==typeof o||"function"==typeof o)for(let l of i(o))n.call(e,l)||"default"===l||t(e,l,{get:()=>o[l],enumerable:!(s=r(o,l))||s.enumerable});return e})(s(t(null!=l?e(o(l)):{},"default",l&&l.__esModule&&"default"in l?{get:()=>l.default,enumerable:!0}:{value:l,enumerable:!0})),l);((e,r)=>{for(var i in s(e),r)t(e,i,{get:r[i],enumerable:!0})})(exports,{default:()=>c});var u=l(require("./kw.js")),a=l(require("./ob.js")),c=class extends u.default{constructor(e,t){super(e,t),this.loginFinish=this.loginFinish.bind(this),this.canShowPop=!0,this.event.on(this.event.CONTANTS.LOGIN_FINISH,this.loginFinish),this.poiModule=t.getModule("poi"),this.userModule=t.getModule("user")}destroy(){this.event.off(this.event.CONTANTS.LOGIN_FINISH,this.loginFinish)}static register(e){const t=new c("activity",e);return e.addModule(t),t}loginFinish(e,t){return r=this,i=null,o=function*(){a.log.debug("[activity]登陆FINISH回调",e,t),this.beforeSubscribe(null==e?void 0:e.openId)},new Promise(((e,t)=>{var n=e=>{try{l(o.next(e))}catch(e){t(e)}},s=e=>{try{l(o.throw(e))}catch(e){t(e)}},l=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,s);l((o=o.apply(r,i)).next())}));var r,i,o}beforeSubscribe(e){if(e)try{getApp().$service.reportOpenId(e)}catch(t){getApp().$service.reportOpenId(e)}}};