var t=Object.create,e=Object.defineProperty,i=Object.defineProperties,o=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols,r=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(t,i,o)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[i]=o,u=(t,e)=>{for(var i in e||(e={}))c.call(e,i)&&d(t,i,e[i]);if(a)for(var i of a(e))l.call(e,i)&&d(t,i,e[i]);return t},h=(t,e)=>i(t,s(e)),g=t=>e(t,"__esModule",{value:!0}),p=i=>((t,i,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let a of n(i))c.call(t,a)||"default"===a||e(t,a,{get:()=>i[a],enumerable:!(s=o(i,a))||s.enumerable});return t})(g(e(null!=i?t(r(i)):{},"default",i&&i.__esModule&&"default"in i?{get:()=>i.default,enumerable:!0}:{value:i,enumerable:!0})),i),f=(t,e,i)=>new Promise(((o,s)=>{var n=t=>{try{r(i.next(t))}catch(t){s(t)}},a=t=>{try{r(i.throw(t))}catch(t){s(t)}},r=t=>t.done?o(t.value):Promise.resolve(t.value).then(n,a);r((i=i.apply(t,e)).next())}));((t,i)=>{for(var o in g(t),i)e(t,o,{get:i[o],enumerable:!0})})(exports,{default:()=>j});var m,P,y,S,_,I,L=p(require("../../aw.js")),C=p(require("../../gk.js")),T=p(require("./so.js")),v=p(require("../../ao.js")),A=p(require("../../u9.js")),x=p(require("./sg.js")),k=p(require("../../iy.js")),O=p(require("./ls.js")),w=p(require("../../ob.js")),b=p(require("./sd.js")),E=p(require("./pl.js")),N=p(require("../../pa.js")),D=p(require("./as.js")),R=p(require("../../u8.js")),$=p(require("./vv.js")),B=p(require("./sa.js")),M=require("./ls.js"),U=require("./vb.js"),V={selfPickSelect:"c_youxuan_qjnyfx9c",otherSelfPickSelect:"c_youxuan_07h85u7f"},G="index",H="[POI_SELF_PICK_SELECT]:";(P=m||(m={}))[P.Normal=0]="Normal",P[P.DeliveryFirst=2]="DeliveryFirst",(S=y||(y={}))[S.SelfPickSelect=1]="SelfPickSelect",(I=_||(_={}))[I.UsePoi=1]="UsePoi",I[I.UsePosition=2]="UsePosition";var F=getApp(),j=class{constructor(t){var e,i;this.onLoad=function(t){this.targetRoute=x.TARGET_MAP.CUR_PAGE,this.options=t;const{fromAction:e,fromTo:i,from:o=G,backToSumbitOrderWhenGoodsInvalid:s,cartType:n,skuId:a="",longitude:r=null,latitude:c=null,showCityListView:l=!1,realFrom:d="",grayType:u}=t||{};if(this.from=o||G,this.realFrom=d,w.log.info("onLoad 进入门店切换页：",t),this.needUsePosition({from:o,latitude:c,longitude:r,grayType:u})){const t={longitude:r,latitude:c};this.referhCityInfoWithPoilist(t)}else"selectPoi"===e||(0,x.isNeedUseLonLatfromUrl)(o,this.targetRoute)&&r&&c||this.getPositionByWxLoc(!0);this.setData({fromTo:i?decodeURIComponent(i):"",reloadCurrentAddress:Math.random(),backToSumbitOrderWhenGoodsInvalid:!!s,cartType:+(n||0),skuId:a}),(0,x.isNeedUseLonLatfromUrl)(o,this.targetRoute)&&r&&c&&this.setData({position:{longitude:r,latitude:c}}),"bargainSkuList"===o&&a&&this.isSkuValidInPoi().then((t=>{t||this.handleSkuUnValidInPoi()})).catch((t=>{w.log.info(t)})),this.setShowCityListView(l)},this.onUnload=function(){const t=this.selectComponent("#tabs");t&&t.clearCache()},this.onShow=function(){var t,e;const{from:i}=this.data,o=this.data.source===E.PageType.SelfPickSelect?{custom:{from:i}}:{custom:{page_from:i}};F.$lxLog.pv(V[this.data.source],o),this.data.haveGoSetting&&(this.setData({haveGoSetting:!1}),null==(t=w.log)||t.warn(`${H}: onShow: getPositionByWxLoc`),this.getPositionByWxLoc());null==(e=w.log)||e.info(H," onShow: addrChangeHandler"),this.addrChangeHandler((()=>{var t,e,o;const{position:s={}}=this.data,{longitude:n,latitude:a}=s;return null==(t=w.log)||t.info(`${H}: onShow: getChooseAddress: from = ${i} \n this.targetRoute=${this.targetRoute}`),(0,x.isNeedUseLonLatfromUrl)(i,this.targetRoute)&&n&&a?(null==(e=w.log)||e.info(`${H}: onShow: getChooseAddress 进入if: from = ${i} \n this.targetRoute=${this.targetRoute}`),s):(null==(o=w.log)||o.info(`${H}: onShow: getChooseAddress 即将进入getAddrCache: from = ${i} \n this.targetRoute=${this.targetRoute}`),(0,b.getAddrCache)())})()),this.checkCloseTip()},this.onReady=function(){},this.onHide=function(){},this.getPoiModalInfo=function(t){try{return(0,O.getPoiModalInfo)(t)}catch(t){return w.log.info(t),{showPop:!1,popLayer:{},err:t}}},this.referhCityInfoWithPoilist=function(t){var e;null==(e=w.log)||e.info(H," referhCityInfoWithPoilist",t),this.setData({position:t}),this.getCityAddressByPostion(t),this.fetchData(t)},this.addrChangeHandler=function(t){var e;if(t){const{address:i,latitude:o,longitude:s,cityId:n,cityName:a,districtId:r=-1,districtName:c="",districtType:l=-1}=t,d=(()=>{const{position:t={}}=this.data,{from:e}=this,{longitude:i,latitude:n}=t;return(0,x.isNeedUseLonLatfromUrl)(e,this.targetRoute)&&i&&n?t:{latitude:o,longitude:s}})();if(this.setData({position:d,chooseAddress:i}),null==(e=w.log)||e.info(H," addrChangeHandler: fetchData",d),this.fetchData(d),n&&a){const t=h(u(u({},this.data.currentCityAddress),d),{cityId:n,cityName:a,districtId:r,districtName:c,districtType:l});this.setData({cityAddress:t,currentCityAddress:t})}else this.getCityAddressByPostion(d)}},this.confirmModal=function(t){return U(t)},this.getCityAddressByPostion=function(t){return f(this,null,(function*(){const e=yield F.$service.getPosition(t),i=u(u({},e),t),{chooseAddress:o}=this.data;this.setData({cityAddress:i,chooseAddress:e.address||o,currentCityAddress:i})}))},this.getPositionByWxLoc=function(t=!1){return f(this,null,(function*(){var e;this.loading(!0);let i=null;try{if(i=yield F.$poi.getPoiInfo(),i){const t=h(u({},i),{imageBid:"b_youxuan_ef1fvd20_mc"});this.setData({currentPoi:t})}const t=yield A.default.getWxLocation({refresh:!0});if(t){const{latitude:i,longitude:o}=t;yield k.default.getMTCityId();this.setData({position:t}),this.getCityAddressByPostion(t),null==(e=w.log)||e.info(H," getPositionByWxLoc: then: fetchData"),this.setData({errorViewType:""}),this.fetchData(t)}else this.setData({errorViewType:v.PoiLocationErrorType.LOCATION_ACCESS_API_ERROR_WX_LOCATION})}catch(e){const i=null==e?void 0:e.type;w.log.warn(H,"getPositionByWxLoc  err",i,null==e?void 0:e.errorCode),this.fetchData(),t&&this.setData({oadingOfStrategy:!1}),i===v.PoiLocationErrorType.LOCATION_AUTH_INVALID_WX||i===v.PoiLocationErrorType.LOCATION_ACCESS_INVALID_WX_MP||i===v.PoiLocationErrorType.LOCATION_ACCESS_INVALID_MT?this.setData({errorViewType:i}):this.setData({errorViewType:v.PoiLocationErrorType.LOCATION_ACCESS_API_ERROR_WX_LOCATION})}finally{this.loading(!1)}}))},this.getSortType=function(){const{isSelfPickSelect:t}=this.data,{from:e,realFrom:i}=this;return e!==x.FROM_MAP.SUBMIT_ORDER||t||"1"===i?{}:{sortType:2}},this.fetchData=function(t){var e;let i,o=[],s=[];const n=u({},t);Object.assign(n,this.getSortType()),F.$sceneCode===L.SCENE_CODE.LIVE&&((0,R.isMMP)()?n.subChannel=C.SUB_CHANNEL.MEITUAN_LIVE:n.subChannel=C.SUB_CHANNEL.WX_LIVE),(null==(e=this.options)?void 0:e.filterType)&&(n.filterType=this.options.filterType),M.getRecommendPoiList(n).then((t=>{var e;const{groups:n=[],commonPoiInfo:a,recommendPoiList:r=[],historyOrderPoiIdList:c=[]}=t;a&&(i=h(u({},a),{imageBid:"b_youxuan_ef1fvd20_mc"})),c.length>0&&(o=c.map((t=>h(u({},t),{imageBid:"b_youxuan_ef1fvd20_mc"})))),r.length>0&&(s=r.map((t=>h(u({},t),{imageBid:"b_youxuan_ef1fvd20_mc"})))),this.setData({currentPoi:i||!1,recommendPoiList:s,historyOrderPoiIdList:o}),this.checkNoPoiListError({commonPoiInfo:i,recommendPoiList:s,historyOrderPoiIdList:o}),null==(e=w.log)||e.info(H," fetchData: then: goNewPage"),this.goNewPage()})).catch((t=>{var e;const{currentPoi:n,recommendPoiList:a,historyOrderPoiIdList:r}=this.data;n&&(i=h(u({},n),{imageBid:"b_youxuan_ef1fvd20_mc"})),r.length>0&&(o=r.map((t=>h(u({},t),{imageBid:"b_youxuan_ef1fvd20_mc"})))),a.length>0&&(s=a.map((t=>h(u({},t),{imageBid:"b_youxuan_ef1fvd20_mc"})))),this.checkNoPoiListError({commonPoiInfo:i,recommendPoiList:s,historyOrderPoiIdList:o});const{code:c}=(null==t?void 0:t.data)||{},{statusCode:l}=(null==t?void 0:t.res)||{};let d=v.PoiLocationErrorType.BACK_END_ERROR;420===c?d=v.PoiLocationErrorType.ANTI_ERROR_420:403===l&&(d=v.PoiLocationErrorType.ANTI_ERROR),this.setData({errorViewType:d}),null==(e=w.log)||e.info(H," fetchData: catch: goNewPage",t||"获取门店列表失败"),this.goNewPage()}))},this.checkNoPoiListError=function({commonPoiInfo:t,historyOrderPoiIdList:e,recommendPoiList:i}){if(-1!==[v.PoiLocationErrorType.LOCATION_AUTH_INVALID_WX,v.PoiLocationErrorType.LOCATION_ACCESS_INVALID_WX_MP,v.PoiLocationErrorType.LOCATION_ACCESS_INVALID_MT,v.PoiLocationErrorType.LOCATION_ACCESS_API_ERROR_WX_LOCATION].indexOf(this.data.errorViewType))return;const o=i&&i.length>0?null:v.PoiLocationErrorType.BACK_END_NO_POI_DATA;this.setData({errorViewType:o})},this.checkCloseTip=function(){F.$store.getCacheValue("selfPickSelectTipsShowed")||F.$store.setCache("selfPickSelectTipsShowed",!0)},this.setSearchList=function(t){const{poiList:e=[],addrList:i=[]}=this.data.searchResult,{show:o=this.data.showSearchList,poiList:s=e,addrList:n=i}=t.detail;let a=[];a.length>=0&&(a=s.map((t=>h(u({},t),{imageBid:"b_youxuan_ef1fvd20_mc"})))),this.setData({showSearchList:o,searchResult:{poiList:a,addrList:n}}),this.setShowCityListView(!1)},this.addNewAddress=function(){F.isLogin()?(F.$lxLog.mc("b_ctkzkcsw"),F.$router.goto("/subPackages/location/pages/locationEdit/index?type=create&from=4")):F.$router.gotoAfterLogin()},this.showCityList=function(t){this.setShowCityListView(t.detail.showCityListView)},this.onCitySelect=function(t){const e=t.detail;this.setData({focusin:!0,cityAddress:e}),this.setShowCityListView(!1)},this.currentPoiCardTap=function(t){const e=t.detail;e&&(e.poiIdStr||e.poiId>0)&&(F.$lxLog.mc("b_youxuan_naw3fzjn_mc",{click_poiid:e.poiId||"",poiIdStr_click_poiid:e.poiIdStr||""}),this.onPoiCardSelect(e))},this.searchPoiCardTap=function(t){const e=t.detail;e&&(e.poiIdStr||e.poiId>0)&&(F.$lxLog.mc("b_youxuan_cgz3ogea_mc",{click_poiid:e.poiId||"",poiIdStr_click_poiid:e.poiIdStr||""}),this.onPoiCardSelect(e))},this.onSearchAddrTap=function(t){const{address:e,longitude:i,latitude:o,addressLoc:s}=t.detail;F.$lxLog.mc("b_youxuan_a6tjs6kv_mc",{},{cid:"c_youxuan_07h85u7f"}),(0,T.setHistoryAddress)(e,t.detail);const n={address:e,addressLoc:s,longitude:i,latitude:o,source:`${this.data.source}_onSearchAddrTap`};if(this.setData({showSearchList:!1,focusin:!1}),this.targetRoute=x.TARGET_MAP.CUR_PAGE,(0,b.setAddrCache)(n),this.data.isSelfPickSelect){const t={longitude:i,latitude:o,address:e};B.default.chooseOtherSelfLift(!1,u({cityAddress:t,fromAction:"selectPoi"},F.page().options))}else this.data.isSearchPage?((0,T.setSerchPoiAdress)(n),F.$router.triggerBack("SearchPage")):this.addrChangeHandler(n)},this.onHistoryPoiCardTap=function(t){const e=t.detail;e&&(e.poiIdStr||e.poiId>0)&&this.onPoiCardSelect(e)},this.recommendPoiCardTap=function(t){const e=t.detail;e&&(e.poiIdStr||e.poiId>0)&&(this.onPoiCardSelect(e),F.$lxLog.mc("b_youxuan_unv5ygpz_mc",{click_poiid:e.poiId,poiIdStr_click_poiid:e.poiIdStr,label_name:e.label_name,index_id:e.poiId,page_from:"otherSelfPickSelect"}))},this.onPoiCardSelect=function(t){var e;if(1!==t.poiBusinessStatus)return void F.page().toast("当前门店已经下线了～");const{from:i}=this;if(this.setData({poi:u({},t),selectedPoi:t}),(0,x.isFromNative)(i))return this.switchPoiConfirm((()=>{(0,D.navigateBackNative)(u({},this.tranfromPoiforNative(t)))}));const{currentPoi:o}=this.data;if(o)if(t.poiIdStr&&(null==o?void 0:o.poiIdStr)){const e=t.poiIdStr===(null==o?void 0:o.poiIdStr);this.switchPoiItem(t,!1,e)}else if(t.poiId&&(null==o?void 0:o.poiId)){const e=t.poiId===(null==o?void 0:o.poiId);this.switchPoiItem(t,!1,e)}else this.switchPoiItem(t,!0,!0);else{const i="pages/multiPoiPage/index"===(null==(e=null==F?void 0:F.$appShowOptions)?void 0:e.path);this.switchPoiItem(t,i,!1)}},this.handleSkuValidInPoi=function(t){return f(this,null,(function*(){this.switchPoiConfirm((()=>f(this,null,(function*(){var e,i;const{selectedPoi:o}=this.data,s=o.poiIdStr!==(null==(e=null==F?void 0:F.$poi)?void 0:e.getPoiIdStr())||o.poiId!==(null==(i=null==F?void 0:F.$poi)?void 0:i.getPoiId());yield k.default.togglePoiByPoi(o),"bargainSkuList"===t?F.$event.emit(N.SELF_PICK_POI_CHANGE,{isSelfPcikPoiChange:s}):"EGG_EXCHANGE_FROM"===t&&F.page().toast("已切换门店"),F.$router.goto(-1)}))))}))},this.handleSkuUnValidInPoi=function(t){F.page().toast("商品不支持在本自提点取货，请重新选择自提点")},this.isSkuValidInPoi=function(){return f(this,null,(function*(){const{selectedPoi:t,skuId:e}=this.data,{result:i}=yield M.checkSkuValidInPoi({targetPoiId:(null==t?void 0:t.poiId)||F.$poiId,poiIdStr_targetPoiId:(null==t?void 0:t.poiIdStr)||F.$poiIdStr,skuIdList:[e]}).catch((t=>{}));return!!i}))},this.switchPoiForBargainSkuList=function(t){return f(this,null,(function*(){const e=yield this.isSkuValidInPoi();return e?e?this.handleSkuValidInPoi(t):void 0:this.handleSkuUnValidInPoi(t)}))},this.handleSkuValidInPoi=function(t){return f(this,null,(function*(){this.switchPoiConfirm((()=>f(this,null,(function*(){var e,i;const{selectedPoi:o}=this.data,s=o.poiIdStr!==(null==(e=null==F?void 0:F.$poi)?void 0:e.getPoiIdStr())||o.poiId!==(null==(i=null==F?void 0:F.$poi)?void 0:i.getPoiId());yield k.default.togglePoiByPoi(o),"bargainSkuList"===t?F.$event.emit(N.SELF_PICK_POI_CHANGE,{isSelfPcikPoiChange:s}):"EGG_EXCHANGE_FROM"===t&&F.page().toast("已切换门店"),F.$router.goto(-1)}))))}))},this.data2ModalData=function(t){if(!t||!t.popLayer)return{};const{popTag:e="",targetPoiInfo:i}=t.popLayer,{poiName:o,address:s}=i;return{title:e.replace("，","，\n"),poi:{poiName:o,address:`自提地址：${s}`}}},this.showMPModal=function(t={}){try{if(Object.keys(t).length<=0)throw new Error(`showMPModal 传入的 参数不合法，options：${t}`);const e=u({selector:"#poi-off-modal"},t);(0,$.default)(e,this)}catch(t){w.log.info(t)}},this.switchPoiItem=function(t,e,i=!1){return f(this,null,(function*(){var o;const{skuId:s}=this.data,{from:n}=this,{poiName:a="",distanceText:r="",address:c="",picUrl:l=""}=t;if(F.$lxLog.mv("b_youxuan_4yk6d742_mv"),(0,T.setHistoryPoi)(a,t),("bargainSkuList"===n||"EGG_EXCHANGE_FROM"===n)&&s)return this.switchPoiForBargainSkuList(n);if(n===x.FROM_MAP.SUBMIT_ORDER||n===x.FROM_MAP.SUBMIT_CART){const e=yield this.checkSiteIfValidate(t);return(null==e?void 0:e.redirectLocation)?void this.confirmModal({title:"请确认切换自提点",message:null==e?void 0:e.promotion,textOK:"确定切换",textCancel:"取消切换",poi:{poiName:a,distanceText:r,address:c,picUrl:l},cancel:()=>{F.$lxLog.mc("b_youxuan_43x3nnpd_mc")},ok:()=>f(this,null,(function*(){if(1===e.redirectLocation)yield k.default.togglePoiByPoi(t),n!==x.FROM_MAP.SUBMIT_CART?F.$router.goto("/pages/index/index"):this.goBack();else if(2===e.redirectLocation){yield k.default.togglePoiByPoi(t);const e=this.getRouteBackNum();wx.navigateBack({delta:Math.abs(e-1)})}}))}):(F.page().toast((null==e?void 0:e.promotion)||"已切换自提点，请您确认商品信息"),F.$store.setCache("originalPoiId",F.$poiId,{isOnlyCache:!0}),yield k.default.togglePoiByPoi(t),void setTimeout((()=>this.goBack(this.getRouteBackNum())),1e3))}if(i){const{needBreak:i}=yield k.default.togglePoiByPoi(t,k.ToggleSource.SELF_PICK_PAGE);if(i)return;return e||"needToHome"===n?this.goHomePage():this.goBack()}F.page().toast("自提点切换成功");const{needBreak:d}=yield k.default.togglePoiByPoi(t,k.ToggleSource.SELF_PICK_PAGE);if(!d)if(e)F.$router.goto("pages/index/index");else{if("needToHome"===n)return this.goHomePage();{let t=-1;const e=getCurrentPages();"subPackages/location/pages/selfPickSelect/index"===(null==(o=e[e.length-2])?void 0:o.route)&&(t=-2),this.goBack(t)}}}))},this.switchPoiConfirm=function(t,e,i=this.data.poi){const{poiName:o="",distanceText:s="",address:n="",picUrl:a=""}=i;return this.confirmModal({title:"请确认切换自提点",message:"确认切换后，您需要前往该自提点提货",textCancel:"取消",textOK:"确认",customContentStyle:"text-align: center",poi:{poiName:o,distanceText:s,address:n,picUrl:a},cancel:()=>{F.$lxLog.mc("b_youxuan_43x3nnpd_mc"),e&&e()},ok:()=>{F.$lxLog.mc("b_youxuan_7ertq2jj_mc"),t&&t()}})},this.goHomePage=function(){return F.$router.goto("pages/index/index")},this.checkSiteIfValidate=function(t){return f(this,null,(function*(){var e;const{poiId:i,poiIdStr:o}=t;let s={currentPoiId:F.$poiId,descPoiId:i,cartType:this.data.cartType},n={};const{longitude:a,latitude:r}=F.$location||{};a&&(n={homepageLng:a,homepageLat:r}),o&&(s=h(u(u({},s),n),{poiIdStr_currentPoiId:null==(e=null==F?void 0:F.$poi)?void 0:e.getPoiIdStr(),poiIdStr_descPoiId:o}));return yield M.checkSFAddress(s)}))},this.goBack=function(t=-1){const{from:e}=this;return(0,x.isFromNative)(e)?(0,D.navigateBackNative)(u({},this.tranfromPoiforNative())):(0,x.isFromGoHome)(e)?this.goHomePage():void("number"!=typeof t?F.$router.goto(t):F.$router.triggerBack("selfPickSelect back",t))},this.tranfromPoiforNative=function(t=this.data.poi){const{poiId:e="",poiIdStr:i="",poiName:o="",address:s="",latitude:n="",longitude:a="",poiBusinessStatus:r=2}=t;return{poiId:e,poiIdStr:i,poiName:o,address:s,latitude:n,longitude:a,poiBusinessStatus:r,fromType:"selfPickSelect"}},this.refresh=function(){this.targetRoute=x.TARGET_MAP.ERR_PAGE,this.getPositionByWxLoc()},this.goSetting=function(){this.setData({haveGoSetting:!0})},this.onCitySelectorClose=function(){this.setShowCityListView(!1)},this.setShowCityListView=function(t=!1){return this.showCitySelector(t)},this.selectOtherPoi=function(){return this.showCitySelector(!0)},this.showCitySelector=function(t=!1){return this.setData({showCityListView:t,scrollYEnable:!t})},this.onTabItemTap=function(t){const{itemKey:e="",itemText:i}=t.detail;this.setData({tabValue:e}),F.$lxLog.mc("b_youxuan_yrjlfl4k_mc",{tab_name:i})},this.goToOtherPage=function(){F.$lxLog.mc("b_youxuan_fdj2b7po_mc");const t=this.isHavePoi(),{isSelfPickSelect:e}=this.data;let{options:i={}}=F.page();i=h(u({},i),{realFrom:e?1:""}),B.default.chooseOtherSelfLift(t,i)},this.isHavePoi=function(){const{currentPoi:t,historyOrderPoiIdList:e}=this.data,i=t&&"{}"!==JSON.stringify(t),o=e&&Array.isArray(e)&&0!==e.length;return i||o},this.getRouteBackNum=function(){var t;let e=-1;const i=getCurrentPages();return"subPackages/location/pages/selfPickSelect/index"===(null==(t=i[i.length-2])?void 0:t.route)&&(e=-2),"subPackages/location/pages/searchPoi/index"===F.page().route&&(e=-4),e},this.goNewPage=function(t=!0){var e,i;const o=getCurrentPages();if("subPackages/location/pages/selfPickSelect/index"===F.page().route&&!(t&&this.isHavePoi()||"subPackages/location/pages/otherSelfPickSelect/index"===(null==(e=o[o.length-1])?void 0:e.route))){null==(i=w.log)||i.info(H," goNewPage: 从当前自提点页跳转到其它自提点页");const t=!0;B.default.chooseOtherSelfLift(t,F.page().options)}},this.onGoTuanZhangPage=function(){F.$router.goto("https://awp.meituan.com/grocery/grocery-activity/tuanzhang-recruiting.html?utm_source=ztd_wtz")},this.onGotoAddrSelect=function(){this.targetRoute=x.TARGET_MAP.POI_ADDR_MAP},this.from=G,this.data=h(u({},A.default),{showSearchList:!1,searchResult:{poiList:[],addrList:[]},showStoreList:!1,storeListData:[],cityAddress:{},currentCityAddress:{},showCityListView:!1,reloadMyAddress:"",reloadCurrentAddress:"",focusin:!1,filterType:"",skuId:"",errorViewType:"",myPoiErrorViewType:"",position:void 0,currentPoi:null,recommendPoiList:[],historyOrderPoiIdList:[],chooseAddress:"",haveGoSetting:!1,backToSumbitOrderWhenGoodsInvalid:!1,scrollYEnable:!0,poi:{},selectedPoi:{},selectPoiType:"otherPoi",tabValue:"",tabList:[{itemText:"我的自提点",itemKey:"my-poi"},{itemText:"选择其他自提点",itemKey:"other-poi"}],isSelfPickSelect:t===E.PageType.SelfPickSelect,isSearchPage:t===E.PageType.SearchPoi,isIpx:null==(i=null==(e=F.getModule("systemInfo"))?void 0:e.getSystemInfo())?void 0:i.isIpx,source:t,isShowSearchBar:t!==E.PageType.SelfPickSelect})}needUsePosition(t){var e,i;const{from:o="",latitude:s,longitude:n,grayType:a}=t;null==(e=w.log)||e.info(`${H} 判断是否需要用经纬度的参数: ${JSON.stringify(t)}`);let r=!1;return s&&n&&(r=o===x.FROM_MAP.SUBMIT_ORDER||o===x.FROM_MAP.SUBMIT_CART||(o===x.FROM_MAP.CATEGORY_SKU_LIST||o===x.FROM_MAP.SEARCH)&&2!=+a),null==(i=w.log)||i.info(`${H} 判断是否需要用经纬度的结果: ${r}`),r}};