var e=Object.create,t=Object.defineProperty,o=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,i=i=>{return((e,s,i)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let n of r(s))a.call(e,n)||"default"===n||t(e,n,{get:()=>s[n],enumerable:!(i=o(s,n))||i.enumerable});return e})((n=t(null!=i?e(s(i)):{},"default",i&&i.__esModule&&"default"in i?{get:()=>i.default,enumerable:!0}:{value:i,enumerable:!0}),t(n,"__esModule",{value:!0})),i);var n},n=i(require("../../ao.js")),d=i(require("./ls.js")),l=i(require("../../po.js")),u=getApp();Component({properties:{centerAddress:{type:Object,value:{},observer(e,t){const{longitude:o,latitude:r,cityId:s}=e;o&&r&&this.loadNearAddress(o,r,s)}},pageFrom:{type:String,value:""},supportMap:{type:Boolean,value:!0}},data:{addressList:[],loading:!0,unDispatchedText:"当前地址不在配送范围内",errorCode:""},methods:{loadNearAddress(e,t,o){var r;const s={longitude:e,latitude:t,cityId:o};"deliveryAddress"===this.properties.pageFrom&&(s.locateType=1,s.sourcePoi=u.$poiId,s.poiIdStr_sourcePoi=null==(r=null==u?void 0:u.$poi)?void 0:r.getPoiIdStr());let a="";d.getPositionAddress(s).then((e=>{var t;const o=(e.addressList||[]).slice(0,20);o.length||(a=null==(t=(0,n.getLocationErrorWithType)(n.PoiLocationErrorType.BACK_END_NO_POI_DATA))?void 0:t.errorCode),this.setData({addressList:o,loading:!1,errorCode:a})})).catch((e=>{var t;(0,l.isMMP)()?wx.showToast({title:e.message||"服务繁忙!",icon:"none"}):u.page().toast(e.message||"服务繁忙!");const{code:o}=(null==e?void 0:e.data)||{},{statusCode:r}=(null==e?void 0:e.res)||{};let s=n.PoiLocationErrorType.HTTP_ERROR;420===o?s=n.PoiLocationErrorType.ANTI_ERROR_420:403===r&&(s=n.PoiLocationErrorType.ANTI_ERROR),a=null==(t=(0,n.getLocationErrorWithType)(s))?void 0:t.errorCode,this.setData({addressList:[],loading:!1,errorCode:a})}))},changeAddress(e){const t=parseInt(e.currentTarget.dataset.index,10)||0,{isDispatch:o,name:r,latitude:s,longitude:a,canDelivery:i,deliveryMsg:n}=this.data.addressList[t];u.$lxLog.mc("b_youxuan_hjvqjmcs_mc",{status:o?1:2}),!i&&n&&n.length?(0,l.isMMP)()?wx.showToast({title:n,icon:"none"}):u.page().toast({message:n}):o?this.triggerEvent("changeAddress",{longitude:a,latitude:s,address:r}):(0,l.isMMP)()?wx.showToast({title:"该地址暂未开通业务哦",icon:"none"}):u.page().toast({message:"该地址暂未开通业务哦"})}}});