var e=Object.create,t=Object.defineProperty,o=Object.defineProperties,a=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertyNames,i=Object.getOwnPropertySymbols,r=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,u=(e,o,a)=>o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[o]=a,d=o=>{return((e,o,l)=>{if(o&&"object"==typeof o||"function"==typeof o)for(let i of n(o))s.call(e,i)||"default"===i||t(e,i,{get:()=>o[i],enumerable:!(l=a(o,i))||l.enumerable});return e})((l=t(null!=o?e(r(o)):{},"default",o&&o.__esModule&&"default"in o?{get:()=>o.default,enumerable:!0}:{value:o,enumerable:!0}),t(l,"__esModule",{value:!0})),o);var l},p=d(require("../../jc.js")),m=d(require("../../u4.js")),T=d(require("../../ao.js")),h=d(require("../../u9.js")),f=d(require("../../ob.js")),_=d(require("./sp.js")),y=d(require("./j4.js")),E=getApp();(0,p.defineComponent)({propTypes:{startClientY:0,moveFunTiemr:0},properties:{initModel:{type:Object,value:{},observer(e){return e&&this.handleInitData(e),e}},updateModel:{type:Object,value:{},observer(e){return e&&this.handleUpdateDataVal(e),e}},layout:{type:Object,value:{},observer(e){return e&&this.handLayoutVal(e),e}}},data:{isIpx:!1,contnetHeight:0,contnetTop:0,scrollHeight:0,scrollY:!1,scrollTop:0,minOffsetTop:0,maxOffsetTop:0,contentState:0,poiListState:y.STATE.SELECT_MULTI,type:_.MAP_TYPE.NODEFINE,cityAddress:{},fromTo:"",totalPage:0,currentPage:0,showList:[],checkedId:0,title:"",subTitle:"",locationText:"",NoNetworkType:T.PoiLocationErrorType.CONTAINER_REQUEST_FAIL,viewType2:T.PoiLocationErrorType.LOCATION_ACCESS_INVALID_WX_MP,NoDataViewType:T.PoiLocationErrorType.BACK_END_NO_POI_DATA,errorType:"",isUp:!1},attached(){m.default.on(_.SELF_LIFT_EVETN.MAP_SELECT_POI,this.mapSelectPoi.bind(this))},detached(){m.default.off(_.SELF_LIFT_EVETN.MAP_SELECT_POI,this.mapSelectPoi.bind(this)),m.default.off(_.SELF_LIFT_EVETN.POI_LIST_ATTACHED,this.handleAttachedRec.bind(this))},methods:{handleInitData(e){e&&null!==e.type&&void 0!==e.type?(f.log.info("handleInitData dataModel.type ",e.type),this.handleUpdateDataVal(e)):f.log.info("handleInitData ",e)},handleUpdateDataVal(e){var t,a,n;if(e&&null!==e.type&&void 0!==e.type){const{currentPage:r,totalPage:d,showList:p}=e||{};let m;m=p?p.map((e=>{return t=((e,t)=>{for(var o in t||(t={}))s.call(t,o)&&u(e,o,t[o]);if(i)for(var o of i(t))c.call(t,o)&&u(e,o,t[o]);return e})({},e),o(t,l({imageBid:"b_youxuan_j45nf604_mc"}));var t})):p,f.log.info("selfLiftPoint_datacenter handleDataVal ",e),this.setData({type:e.type,cityAddress:(null==(t=null==e?void 0:e.rgeoInfo)?void 0:t.cityAddress)||"",fromTo:(null==(a=null==e?void 0:e.rgeoInfo)?void 0:a.fromTo)||"",addressLoc:(null==(n=null==e?void 0:e.rgeoInfo)?void 0:n.addressLoc)||"",showList:m||[],totalPage:d,currentPage:r||0,title:(null==e?void 0:e.title)||"",subTitle:(null==e?void 0:e.subTitle)||"",locationText:(null==e?void 0:e.locationText)||"",errorType:(null==e?void 0:e.errorType)||""})}},handLayoutVal(e){this.setData({isIpx:(null==e?void 0:e.isIpx)||!1,contnetHeight:(null==e?void 0:e.contnetHeight)||0,contnetTop:(null==e?void 0:e.contnetTop)||0,scrollHeight:(null==e?void 0:e.scrollHeight)||0,scrollY:(null==e?void 0:e.scrollY)||!1,scrollTop:(null==e?void 0:e.scrollTop)||0,minOffsetTop:(null==e?void 0:e.minOffsetTop)||0,maxOffsetTop:(null==e?void 0:e.maxOffsetTop)||0,contentState:(null==e?void 0:e.contentState)||0})},mapSelectPoi(e){m.default.emit(_.SELF_LIFT_EVETN.MAP_CHANGE_UP);const{poiId:t}=e;t&&(this.setData({scrollY:!0}),setTimeout((()=>{this.setData({checkedId:t})}),0)),f.log.info("mapSelectPoi poiId",t)},searchBarTap(){E.$lxLog.mc("b_youxuan_9czlt0zi_mc",{}),this.triggerEvent("searchBarTap",{})},selectOtherPoi(){E.$lxLog.mc("b_youxuan_gidn3jv0_mc",{}),this.triggerEvent("searchBarTap",{})},startMoveFun(e){const{clientY:t}=e.changedTouches[0];this.startClientY=e.changedTouches[0].clientY,f.log.info("startMoveFun clientY",t,"minOffsetTop",this.data.minOffsetTop)},moveFun(e){this.moveFunTiemr&&clearTimeout(this.moveFunTiemr),this.moveFunTiemr=setTimeout((()=>{const{clientY:t}=e.changedTouches[0],o=this.data.contnetTop+t-this.startClientY;this.startClientY=t,this.data.minOffsetTop>o?this.setData({contentState:0,scrollY:!0}):o>=this.data.maxOffsetTop?this.setData({contentState:1,scrollY:!1}):this.setData({contnetTop:o,contentState:1,scrollY:!1})}),10)},endFun(e){this.moveFunTiemr&&clearTimeout(this.moveFunTiemr)},recommendPoiCardTap(e){const t=null==e?void 0:e.detail;t&&m.default.emit(_.SELF_LIFT_EVETN.SELECT_CARD,t)},handleScrollToupper(e){f.log.info("handleScrollToupper e.detail.scrollTop",e.detail.currentTarget)},handleScroll(e){var t,o;f.log.info("handleScroll e.detail.detail.scrollTop",e.detail.detail.scrollTop);(null==(t=null==e?void 0:e.detail)?void 0:t.detail.scrollTop)>20&&!this.data.isUp&&this.setData({isUp:!0}),(null==(o=null==e?void 0:e.detail)?void 0:o.detail.scrollTop)<20&&this.data.isUp&&this.setData({isUp:!1})},scrollEnd(e){const{currentPage:t}=this.data;m.default.emit(_.SELF_LIFT_EVETN.SCROLL_END,t)},onReloadLocation(){return e=this,t=null,o=function*(){E.$lxLog.mc("b_youxuan_5lpkbvnz_mc",{});try{const e=yield h.default.getWxLocation({refresh:!0}),{latitude:t,longitude:o}=e;f.log.info("SelfLiftPointContent","onReloadLocation",o,t),t&&o&&(m.default.emit(_.SELF_LIFT_EVETN.MAP_CHANGE_DOWN),m.default.emit(_.SELF_LIFT_EVETN.PAGE_GPSCLICK_CHANGE,e))}catch(e){f.log.info("SelfLiftPointContent","onReloadLocation error",e),m.default.emit(_.SELF_LIFT_EVETN.PAGE_GPSCLICK_CHANGE,{error:e})}},new Promise(((a,l)=>{var n=e=>{try{r(o.next(e))}catch(e){l(e)}},i=e=>{try{r(o.throw(e))}catch(e){l(e)}},r=e=>e.done?a(e.value):Promise.resolve(e.value).then(n,i);r((o=o.apply(e,t)).next())}));var e,t,o},onGoTuanZhangPage(){E.$lxLog.mc("b_youxuan_yaymhd3f_mc",{}),E.$router.goto("https://awp.meituan.com/grocery/grocery-activity/tuanzhang-recruiting.html?utm_source=yxapp_zp")},refresh(e){this.triggerEvent("refresh",{})},packupEvent(e){m.default.emit(_.SELF_LIFT_EVETN.MAP_CHANGE_UP,{})},packDownEvent(e){m.default.emit(_.SELF_LIFT_EVETN.MAP_CHANGE_DOWN,{})},catchMoveFun(){},handleAttachedRec(e){m.default.emit(_.SELF_LIFT_EVETN.POI_LIST_ATTACHED,e)}}});