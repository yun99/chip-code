<view class="city-selector-wrap {{show ? 'show' : ''}}" bindtouchmove><view class="mask" bindtap="close"></view><view class="panel {{show ? 'show' : ''}}" bindtouchmove><view class="header-wrap"><view class="title-wrap"><view class="title">切换城市</view><image class="cancel-image" src="https://s3plus.meituan.net/v1/mss_1f3dca8fe8534e6fa640054bf3ad2ba6/grocery-fe-cdn/wx/images/cdn/popup_close.960b1059.png" bindtap="close" /></view><view class="city-search-input-wrap"><image class="city-search-icon" src="https://s3plus.meituan.net/v1/mss_1f3dca8fe8534e6fa640054bf3ad2ba6/grocery-fe-cdn/wx/images/cdn/search-19-8-21.bd5a647.png"></image><input class="city-search-input" placeholder-class="city-search-placeholder" placeholder="{{show ? '请输入城市/区县搜索' : ''}}" type="text" value="{{citySearchKey}}" confirm-type="search" maxlength="20" bindinput="onSearchInput" bind:focus="onSearchFocus" bindblur="onSearchBlur" bindconfirm="onSearchSubmit" /><image class="city-search-clear" src="https://s3plus.meituan.net/v1/mss_1f3dca8fe8534e6fa640054bf3ad2ba6/grocery-fe-cdn/wx/images/cdn/message-delete.3adb1000.png" bindtap="onSearchClear" tt:if="{{citySearchKey.length > 0}}"></image></view></view><scroll-view class="body-wrap city-search-list-wrap {{isIpx ? 'isIpx' : ''}}" scroll-y tt:if="{{showCitySearchList}}"><view class="location-item" data-location="{{location}}" bindtap="onSearchResultChange" tt:for="{{searchCityList}}" tt:for-item="location" tt:key="locationId"><view class="match-text">{{citySearchKey}}</view><view class="location-name">{{location.otherMatchText}}</view></view></scroll-view><block tt:else><view class="select-wrap"><view class="oprate-option font-normal {{tabId === 'tab1' ? 'selected' : ''}}" data-tabid="tab1" bindtap="onTabClick" tt:if="{{currentProvince.provinceName}}">{{currentProvince.provinceName}}</view><view class="oprate-option font-normal {{tabId === 'tab2' ? 'selected' : ''}}" data-tabid="tab2" bindtap="onTabClick" tt:if="{{currentCity.cityName}}">{{currentCity.cityName}}</view><view class="oprate-option font-normal {{tabId === 'tab3' ? 'selected' : ''}}" data-tabid="tab3" bindtap="onTabClick">请选择</view></view><view class="body-wrap city-select-wrap {{isIpx ? 'isIpx' : ''}} {{(currentProvince.provinceId || currentProvince.provinceName) ? 'padding-top-30-' : ''}}"><view class="sub-wrap left-wrap {{isShowSubMenu ? 'hide' : ''}}"><scroll-view class="scroll-wrap" scroll-y scroll-top="{{scrollTop}}" scroll-into-view="{{curProvinceLetter}}"><view class="section-1-wrap" id="left-wrap-header" tt:if="{{!(currentProvince.provinceId || currentProvince.provinceName)}}"><view class="currentCity-wrap"><view><view class="sub-title">当前所在地区</view><view class="option" data-location="{{localCity}}" bindtap="onLocalCityClick" tt:if="{{localCity.cityName && localCity.cityId}}">{{localCity.districtName || localCity.cityName}}</view><view class="option" tt:if="{{!localCity.cityName || !localCity.cityId}}">{{locationTip}}</view></view><view class="reLocation-wrap" bindtap="reLocation"><image class="image {{isLocationLoading ? 'refresh-icon-loading' : ''}}" src="https://s3plus.meituan.net/v1/mss_1f3dca8fe8534e6fa640054bf3ad2ba6/grocery-fe-cdn/wx/images/cdn/refresh.85c8600.png" /><text>重新定位</text></view></view><view class="history-city margin-top-42" tt:if="{{historyCityList.length > 0}}"><view class="sub-title">历史访问地区</view><view><view class="option margin-top-24" data-location="{{item}}" bindtap="onHistoryCityClick" tt:for="{{historyCityList}}" tt:key="cityId">{{item.districtName || item.cityName}}</view></view></view><view class="sub-title margin-top-42 margin-bottom-22">已开通地区</view></view><view class="location-item" id="{{province.isFirstLocation ? province.initial : 'P-'+province.provinceId}}" tt:for="{{provinceList}}" tt:for-item="province" tt:key="provinceId"><view class="initial" tt:if="{{province.isFirstLocation}}">{{province.initial}}</view><view class="location-name" data-province="{{province}}" bindtap="onProvinceChange">{{province.provinceName}}<image class="location-check-icon" src="https://s3plus.meituan.net/v1/mss_1f3dca8fe8534e6fa640054bf3ad2ba6/grocery-fe-cdn/wx/images/cdn/check-mark.a60b113.png" tt:if="{{province.provinceId === currentProvince.provinceId}}" /></view></view><view class="scroll-bottom-box"></view></scroll-view><view id="provinceLettleList" class="letter-select-wrap" style="{{!(currentProvince.provinceId || currentProvince.provinceName) ?'top:170rpx':''}}"><view class="letter {{(showLetterBubble && letter === curProvinceLetter) ? 'select-letter' : ''}}" data-index="{{index}}" data-letter="{{letter}}" data-type="province" catch:touchstart="onLetterTouchStart" catch:touchmove="onLetterTouchMove" catch:touchend="onLetterTouchEnd" tt:for="{{provinceInitialList}}" tt:key="index" tt:for-item="letter">{{letter}}</view><view class="letter-bubble" style="top:{{bubbleTop}}rpx" tt:if="{{showLetterBubble}}"><image class="letter-bubble-icon" src="https://s3plus.meituan.net/v1/mss_1f3dca8fe8534e6fa640054bf3ad2ba6/grocery-fe-cdn/wx/images/cdn/letter-bubble.d2b3988.png" /><view class="letter-bubble-text">{{curProvinceLetter}}</view></view></view></view><view class="sub-wrap city-wrap {{curMenuType}}-show"><scroll-view class="scroll-wrap" scroll-y scroll-into-view="{{'C'+curCityLetter}}"><view class="location-item" id="{{city.isFirstLocation ? 'C'+city.initial : 'C'+city.provinceId}}" tt:for="{{currentCityList}}" tt:key="cityId" tt:for-item="city"><view class="initial" tt:if="{{city.isFirstLocation}}">{{city.initial}}</view><view class="location-name" data-city="{{city}}" bindtap="onCityChange">{{city.cityName}}</view></view><view class="scroll-bottom-box"></view></scroll-view><view id="cityLettleList" class="letter-select-wrap"><view class="letter {{(showLetterBubble && letter === curCityLetter) ? 'select-letter' : ''}}" data-index="{{index}}" data-letter="{{letter}}" data-type="city" catch:touchstart="onLetterTouchStart" catch:touchmove="onLetterTouchMove" catch:touchend="onLetterTouchEnd" tt:for="{{currentProvince.initialList}}" tt:key="index" tt:for-item="letter">{{letter}}</view><view class="letter-bubble" style="top:{{bubbleTop}}rpx" tt:if="{{showLetterBubble}}"><image class="letter-bubble-icon" src="https://s3plus.meituan.net/v1/mss_1f3dca8fe8534e6fa640054bf3ad2ba6/grocery-fe-cdn/wx/images/cdn/letter-bubble.d2b3988.png" /><view class="letter-bubble-text">{{curCityLetter}}</view></view></view></view><view class="sub-wrap county-wrap {{curMenuType}}-show"><scroll-view class="scroll-wrap" scroll-y scroll-into-view="{{'D'+curLocationLetter}}"><view class="location-item" id="{{location.isFirstLocation ? 'D'+location.initial : 'D'+location.districtId}}" tt:for="{{currentDistrictList}}" tt:key="districtId" tt:for-item="location"><view class="initial" tt:if="{{location.isFirstLocation}}">{{location.initial}}</view><view class="location-name" data-location="{{location}}" bindtap="onCountyChange">{{location.districtName}}</view></view><view class="scroll-bottom-box"></view></scroll-view><view id="cityLettleList" class="letter-select-wrap"><view class="letter {{(showLetterBubble && letter === curLocationLetter) ? 'select-letter' : ''}}" data-index="{{index}}" data-letter="{{letter}}" data-type="city" catch:touchstart="onLetterTouchStart" catch:touchmove="onLetterTouchMove" catch:touchend="onLetterTouchEnd" tt:for="{{districtInitialList}}" tt:key="index" tt:for-item="letter">{{letter}}</view><view class="letter-bubble" style="top:{{bubbleTop}}rpx" tt:if="{{showLetterBubble}}"><image class="letter-bubble-icon" src="https://s3plus.meituan.net/v1/mss_1f3dca8fe8534e6fa640054bf3ad2ba6/grocery-fe-cdn/wx/images/cdn/letter-bubble.d2b3988.png" /><view class="letter-bubble-text">{{curLocationLetter}}</view></view></view></view></view></block></view></view>