var e=getApp();Component({properties:{skuItem:{type:Object},isLastItem:{type:Boolean,value:!1},promotionId:{type:Number},hasExchangeCount:{type:Number},totalExchangeCount:{type:Number},index:{type:Number},totalItemCount:{type:Number}},data:{},methods:{toDetail(t){const{poiId:s,poiIdStr:a,skuId:o}=t.currentTarget.dataset;e.$router.goto(`/pages/skuDetail/index?poiId=${s}&poiIdStr=${a}&skuId=${o}`)},onSelect(t){const{canSelect:s,selected:a,skuId:o}=t.currentTarget.dataset,{hasExchangeCount:n,totalExchangeCount:d,skuItem:u,index:r}=this.data,c=1===d;if(u.valid){if(n!==d||a||c)return!!s&&void u.exchangeItems.forEach(((e,t)=>{if(e.skuId===o){this.triggerEvent("skuSelect",{skuId:e.skuId,selected:!e.selected,skuIndex:r,index:t});const s=c?e.selected?0:1:e.selected?n-1:n+1;this.triggerEvent("changeCount",{hasExchangeCount:s})}}));e.page().toast({message:"已超过最大可换购件数"})}else e.page().toast({message:"未满足换购条件"})}}});