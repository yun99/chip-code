var e=Object.create,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.getOwnPropertySymbols,a=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,n=(e,r,o)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o,c=s=>{return((e,s,a)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let i of o(s))u.call(e,i)||"default"===i||t(e,i,{get:()=>s[i],enumerable:!(a=r(s,i))||a.enumerable});return e})((i=t(null!=s?e(a(s)):{},"default",s&&s.__esModule&&"default"in s?{get:()=>s.default,enumerable:!0}:{value:s,enumerable:!0}),t(i,"__esModule",{value:!0})),s);var i},l=c(require("../../../../iy.js")),p=c(require("../../al.js")),d=c(require("../../../../u8.js")),m=c(require("../../../../uc.js")),g=c(require("../../../../az.js")),y=c(require("../../../../is.js")),h=c(require("../../../../ob.js")),R=getApp();Page({tabWhiteList:(0,d.isWXMT)()?[]:["/pages/index/index","/pages/categorySkuList/index","/pages/cookbook/index","/pages/cart/index","/pages/userCenter/index"],onLoad(e){var t;this.requestCode=decodeURIComponent(e.requestCode),this.requestPath=decodeURIComponent(e.requestPath),this.sourceRouteURL=decodeURIComponent(e.sourceRouteURL);try{this.sourceParams=JSON.parse(decodeURIComponent(e.sourceParams))}catch(e){h.log.error(`yoda解析来源信息异常，e：${JSON.stringify(e)}`)}(null==(t=R.$cat)?void 0:t.reportCustomMetrics)&&R.$cat.reportCustomMetrics(y.YXReportTarget.YODA_MODEL_SHOW,y.ReportValue.SUCCESS,{pageUrl:this.sourceRouteURL||"",url:this.requestPath||""})},onReady(){this.initYoda()},initYoda(){return e=this,t=null,r=function*(){let e="";(0,d.isMMP)()||(e=(yield(0,g.getWeChatFinger)())||""),(0,p.default)({requestCode:this.requestCode||"",appletsfp:e,success:()=>{var e;(null==(e=R.$cat)?void 0:e.reportCustomMetrics)&&R.$cat.reportCustomMetrics(y.YXReportTarget.YODA_VERIFY,y.ReportValue.SUCCESS,{pageUrl:this.sourceRouteURL||"",url:this.requestPath||""}),this.redirectToPage()},fail:()=>{var e;(null==(e=R.$cat)?void 0:e.reportCustomMetrics)&&R.$cat.reportCustomMetrics(y.YXReportTarget.YODA_VERIFY,y.ReportValue.FAILED,{pageUrl:this.sourceRouteURL||"",url:this.requestPath||""}),this.redirectToPage()},options:{redirect:!0,yodaRoute:"/subPackages/yodaPage/pages/modules/index/index"},env:m.env})},new Promise(((o,s)=>{var a=e=>{try{i(r.next(e))}catch(e){s(e)}},u=e=>{try{i(r.throw(e))}catch(e){s(e)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,u);i((r=r.apply(e,t)).next())}));var e,t,r},redirectToPage(){const e=this.tabWhiteList.includes(this.sourceRouteURL),t=this.tabWhiteList.includes(`/${this.sourceRouteURL}`);e||t?(R.$appShowOptions.appendOptions(((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&n(e,r,t[r]);if(s)for(var r of s(t))i.call(t,r)&&n(e,r,t[r]);return e})({},this.sourceParams)),wx.switchTab({url:e?this.sourceRouteURL:`/${this.sourceRouteURL}`,success(){l.default.execPoi()},fail(){}})):R.$router.goto(this.sourceRouteURL,this.sourceParams,{fnName:"redirectTo"}),R.globalData.yodaVerificationLock=!1}});