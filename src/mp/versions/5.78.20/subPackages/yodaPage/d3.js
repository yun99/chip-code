Object.defineProperty(exports,"__esModule",{value:!0});var a,t=require("./d8.js"),s=new((a=t)&&a.__esModule?a:{default:a}).default,e={data:{passwordInfo:{}},initPasswordSDK:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=a.data,s=void 0===t?{}:t,e=a.success,o=a.fail;this.callBackSuccess=e,this.callBackFail=o,this.setData({passwordInfo:{data:s,disabled:!1,show:!0,opacity:.5,isSend:!1,mainTitle:s.mainTitle||"为了您的账户安全,请先完成以下验证",subTitle:s.subTitle||"请输入你当前美团账户的支付密码",inputPlaceholder:s.inputPlaceholder||"请输入6位支付密码",buttonValue:s.buttonValue||"验证"}}),this.getPasswordInfo()},getPasswordInfo:function(){var a=this,t=this.data,e=t.passwordInfo,o=t.passwordInfo.data,i=o.request_code,n=o.action,d=o.type,r=o.options;e.passwordInput="";var c=this;s.sendInfo({request_code:i,type:d,action:n}).then((function(t){var s=t;1===s.status?(e.subTitle=s.data.prompt.message,e.isSend=!0,e.opacity=.5):a.handleError(s.error),c.setData({passwordInfo:e})})).catch((function(){s.catchCallback("获取数据异常",0,"请求支付密码信息出异常了",r,a)}))},bindPasswordSwitch:function(){var a=this,t=this.data,e=t.passwordInfo,o=void 0===e?{}:e,i=t.passwordInfo,n=i.isSend,d=i.passwordInput,r=i.opacity,c=i.data,l=c.action,u=c.request_code,p=c.type,f=c.options,h=c.listIndex;if(n&&1===r){var w=this.data;w.passwordInfo.disabled=!0,this.setData(w),wx.showLoading({title:"验证中...",mask:!0}),s.verify({request_code:u,type:p,action:l,options:{payhash:d,listIndex:h}}).then((function(t){(w=a.data).passwordInfo.disabled=!1,a.setData(w),wx.hideLoading();var e=t.status,i=t.error,n=t.data;if(1===e){if(o.show=!1,s.nextVerify(h,n.nextVerifyMethodId))return;a.setData({passwordInfo:o}),s.successCallback(n.request_code,n.response_code,f,a)}else a.handleError(i)})).catch((function(){s.catchCallback("验证异常",0,"请求验证异常了",f,a)}))}},handleError:function(a){var t=this.data.passwordInfo.data.options;s.errorCallback(a,t,this.getPasswordInfo,this)},bindpasswordInput:function(a){var t=this.data.passwordInfo;t.passwordInput=a.detail.value,t.opacity=6===a.detail.value.length?1:.5,this.setData({passwordInfo:t})},changeVerify:function(){var a=this.data.passwordInfo.data;s.changeVerify(a)}};exports.default=e;