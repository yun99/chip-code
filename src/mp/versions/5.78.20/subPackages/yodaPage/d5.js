Object.defineProperty(exports,"__esModule",{value:!0});var a,t=require("./d8.js"),d=new((a=t)&&a.__esModule?a:{default:a}).default,e={data:{idcardInfo:{}},initIdcardSDK:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=a.data,d=void 0===t?{}:t,e=a.success,i=a.fail;this.callBackSuccess=e,this.callBackFail=i,this.setData({idcardInfo:{data:d,disabled:!1,idcardName:"用户",show:!0,mainTitle:d.mainTitle||"身份验证",subTitle:d.subTitle||"为了您的账号安全"}}),this.getIdcardInfo()},getIdcardInfo:function(){var a=this,t=this.data,e=t.idcardInfo,i=t.idcardInfo.data,n=i.request_code,c=i.action,r=i.type,s=i.options;e.idcardInput="";var o=this;d.sendInfo({request_code:n,type:r,action:c}).then((function(t){var d=t;1===d.status?e.idcardName=d.data.prompt.name:a.handleError(d.error),o.setData({idcardInfo:e})})).catch((function(){d.catchCallback("获取数据异常",0,"请求生日验证信息出异常了",s,a)}))},bindIdcardSwitch:function(){var a=this,t=this.data,e=t.idcardInfo,i=void 0===e?{}:e,n=t.idcardInfo,c=n.idcardInput,r=n.data,s=r.action,o=r.request_code,l=r.type,u=r.options,f=r.listIndex,h=this.data;h.idcardInfo.disabled=!0,this.setData(h),wx.showLoading({title:"验证中...",mask:!0}),d.verify({request_code:o,type:l,action:s,options:{identity:c,listIndex:f}}).then((function(t){(h=a.data).idcardInfo.disabled=!1,a.setData(h),wx.hideLoading();var e=t.status,n=t.error,c=t.data;if(1===e){if(i.show=!1,d.nextVerify(f,c.nextVerifyMethodId))return;a.setData({idcardInfo:i}),d.successCallback(c.request_code,c.response_code,u,a)}else a.handleError(n)})).catch((function(){d.catchCallback("验证异常",0,"请求验证异常了",u,a)}))},handleError:function(a){var t=this.data.idcardInfo.data.options;d.errorCallback(a,t,this.getIdcardInfo,this)},bindidcardInput:function(a){var t=this.data.idcardInfo;t.idcardInput=a.detail.value,6===a.detail.value.length&&this.bindIdcardSwitch(),this.setData({idcardInfo:t})},changeVerify:function(){var a=this.data.idcardInfo.data;d.changeVerify(a)}};exports.default=e;