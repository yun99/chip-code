Object.defineProperty(exports,"__esModule",{value:!0});var t,a=require("./d8.js"),e=new((t=a)&&t.__esModule?t:{default:t}).default,o={data:{lbsInfo:{}},initLbsSDK:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.data,e=t.success,o=t.fail;this.callBackSuccess=e,this.callBackFail=o,this.setData({lbsInfo:{data:a,show:!0,opacity:.5,verifyDisa:!0,geolocation:[],verifyButText:a.verifyButText||"验证",changeText:a.changeText||"换一换"}}),this.getLbsInfo()},getLbsInfo:function(){var t=this,a=this.data,o=a.lbsInfo,i=a.lbsInfo.data,n=i.request_code,s=i.action,r=i.type,c=i.options;e.sendInfo({request_code:n,type:r,action:s}).then((function(a){var e=a.status,i=a.data,n=a.error;if(1===e){var s=i.prompt.geolocation,r=s.items,c=s.hint,l=!0,f=!1,d=void 0;try{for(var h,u=r[Symbol.iterator]();!(l=(h=u.next()).done);l=!0)h.value.checked=!1}catch(t){f=!0,d=t}finally{try{!l&&u.return&&u.return()}finally{if(f)throw d}}o.items=r,o.hint=c,o.opacity=.5,o.verifyDisa=!0,t.setData({lbsInfo:o})}else t.handleLbsError(n)})).catch((function(){e.catchCallback("获取数据异常",0,"请求获取数据出异常了",c,t)}))},bindChange:function(){this.getLbsInfo()},bindVerify:function(){var t=this,a=this.data,o=a.lbsInfo,i=a.lbsInfo,n=i.geolocation,s=i.data,r=s.action,c=s.request_code,l=s.type,f=s.options,d=s.listIndex;this.data.lbsInfo.verifyDisa=!0,this.setData(this.data),wx.showLoading({title:"验证中...",mask:!0}),e.verify({request_code:c,type:l,action:r,options:{geolocation:JSON.stringify(n),listIndex:d}}).then((function(a){wx.hideLoading(),t.data.lbsInfo.verifyDisa=!1,t.setData(t.data);var i=a.status,n=a.data,s=a.error;if(1===i){if(o.show=!1,e.nextVerify(d,n.nextVerifyMethodId))return;t.setData({lbsInfo:o}),e.successCallback(n.request_code,n.response_code,f,t)}else t.handleLbsError(s)})).catch((function(){e.catchCallback("验证异常",0,"请求验证异常了",f,t)}))},bindRadioChange:function(t){var a=t.detail.value,e=this.data.lbsInfo;e.geolocation[0]=a,e.opacity=1,e.verifyDisa=!1;var o=!0,i=!1,n=void 0;try{for(var s,r=e.items[Symbol.iterator]();!(o=(s=r.next()).done);o=!0){var c=s.value;c.geohash===a?c.checked=!0:c.checked=!1}}catch(t){i=!0,n=t}finally{try{!o&&r.return&&r.return()}finally{if(i)throw n}}this.setData({lbsInfo:e})},handleLbsError:function(t){var a=this.data.lbsInfo.data.options;e.errorCallback(t,a,this.getLbsInfo,this)},changeVerify:function(){var t=this.data.lbsInfo.data;e.changeVerify(t)},onPullDownRefresh:function(){wx.stopPullDownRefresh()}};exports.default=o;