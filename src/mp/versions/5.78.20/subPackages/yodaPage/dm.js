Object.defineProperty(exports,"__esModule",{value:!0});var e,a=require("./d8.js"),t=new((e=a)&&e.__esModule?e:{default:e}).default,n={data:{namesInfo:{}},initNamesSDK:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.data,t=e.success,n=e.fail;this.callBackSuccess=t,this.callBackFail=n,this.setData({namesInfo:{disabled:!1,data:a,show:!0,opacity:.5,isSend:!1,namesInput:"",mobilePlaceholder:a.mobilePlaceholder||"手机号",codePlaceholder:a.codePlaceholder||"验证码",mainTitle:a.mainTitle||"为了您的账号安全",subTitle:a.subTitle||"请补全以下信息完成验证",buttonValue:a.buttonValue||"验证"}}),this.getNamesInfo()},getNamesInfo:function(){var e=this,a=this.data,n=a.namesInfo,s=a.namesInfo.data,i=s.request_code,o=s.action,l=s.type,d=s.options,r=this;n.namesInput="",t.sendInfo({request_code:i,type:l,action:o}).then((function(a){if(1===a.status){var t=a.data.prompt.name,s="*"!==t[0],i=t.replace(/\*/g,"").length,o=s?0:t.length-i,l=s?i:t.length;n.namesClear=t.substring(o,l),n.namesEncryptLen=t.length-i,n.isNamesFirst=s,n.namesMessage=a.data.prompt.message,n.isSend=!0,n.fontSize=t.length<=10?50:40,n.fontSize=t.length>15?32:n.fontSize,n.opacity=.5}else e.handleError(a.error);r.setData({namesInfo:n})})).catch((function(){t.catchCallback("获取数据异常",0,"请求姓名验证信息出异常了",d,e)}))},bindNamesSwitch:function(){var e=this,a=this.data,n=a.namesInfo,s=void 0===n?{}:n,i=a.namesInfo,o=i.isNamesFirst,l=i.namesClear,d=i.namesInput,r=i.isSend,c=i.opacity,u=i.data,f=u.action,h=u.request_code,m=u.type,p=u.options,I=u.listIndex,g=o?l+d:d+l;if(r&&1===c){var y=this.data;y.namesInfo.disabled=!0,this.setData(y),wx.showLoading({title:"验证中...",mask:!0}),t.verify({request_code:h,type:m,action:f,options:{filledName:g,listIndex:I}}).then((function(a){(y=e.data).namesInfo.disabled=!1,e.setData(y),wx.hideLoading();var n=a.status,i=a.error,o=a.data;if(1===n){if(s.show=!1,t.nextVerify(I,o.nextVerifyMethodId))return;e.setData({namesInfo:s}),t.successCallback(o.request_code,o.response_code,p,e)}else e.handleError(i)})).catch((function(){t.catchCallback("验证异常",0,"请求验证异常了",p,e)}))}},handleError:function(e){var a=this.data.namesInfo.data.options;t.errorCallback(e,a,this.getNamesInfo,this)},bindNamesInput:function(e){var a=this.data.namesInfo;a.namesInput=e.detail.value,a.opacity=e.detail.value.length===a.namesEncryptLen?1:.5,this.setData({namesInfo:a})},changeVerify:function(){var e=this.data.namesInfo.data;t.changeVerify(e)}};exports.default=n;