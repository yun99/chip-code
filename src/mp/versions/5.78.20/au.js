var e=Object.create,t=Object.defineProperty,a=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,n=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,i=e=>t(e,"__esModule",{value:!0}),c=c=>((e,n,i)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let c of r(n))o.call(e,c)||"default"===c||t(e,c,{get:()=>n[c],enumerable:!(i=a(n,c))||i.enumerable});return e})(i(t(null!=c?e(n(c)):{},"default",c&&c.__esModule&&"default"in c?{get:()=>c.default,enumerable:!0}:{value:c,enumerable:!0})),c);((e,a)=>{for(var r in i(e),a)t(e,r,{get:a[r],enumerable:!0})})(exports,{Cart:()=>d});var s=c(require("./is.js")),u=c(require("./ob.js")),l=c(require("./lg.js")),p=getApp(),d=class{constructor(){this.onLoad=function(e){var t,a;wx.hideShareMenu({});const r="pages/cart/index"===getApp().currentRoute?"c_youxuan_d4bo5dio":"c_youxuan_jww0m38m";p.$lxLog.mv("b_youxuan_okcrh1zl_mv",{},{cid:r});const{needToastMessage:n}=e;n&&p.page().toast(decodeURIComponent(n)),p._cartRenderStartTime=Date.now(),null==(t=this.cartMetricsReport)||t.resetReportSymbol(),null==(a=this.cartMetricsReport)||a.reportCartOnLoadCount(s.YXReportTarget,s.ReportValue,p.$cat,p.$version,p.$systemInfo)},this.onReady=function(){var e;return null==(e=this.cartMetricsReport)||e.reportCartOnReadyCount(s.YXReportTarget,s.ReportValue,p.$cat,p.$version,p.$systemInfo),this.getPreFetchedData().then((e=>{e&&"{}"!==JSON.stringify(e)?(p.$cart.isCartLandingPrefetcher=!0,e.toastMessage&&p.page().toast({message:e.toastMessage,duration:2e3}),p.$event.emit(p.$event.CONTANTS.ITEMS_REQUEST,e)):this.onPrefetcherFail({error:"二级购物车预请求失败",data:e})})).catch((e=>{this.onPrefetcherFail(e)}))},this.onHide=function(){this.onSetInitialRenderingCache("isCartSetInitialRenderingCache")},this.onUnload=function(){this.onSetInitialRenderingCache("isCartLandingSetInitialRenderingCache"),p.$cart.isCartLandingPrefetcher=!1},this.onTabItemTap=function(e){p.$lxLog.mc("b_youxuan_5f5il57a_mc",{tab_name:e.text,index_id:e.index},{cid:"c_youxuan_d4bo5dio"})},this.onSetInitialRenderingCache=function(e){if(!p.$cart[e])try{const t=p.page().selectComponent("#cart").selectComponent("#cartMid"),{itemList:a=[],moduleTitle:r={text:""}}=t.data.cartRecData;a.length>=2&&(this.setInitialRenderingCache({cartRecDataRenderingCache:{itemList:a.slice(0,2),moduleTitle:{text:r.text}}}),p.$cart[e]=!0)}catch(e){u.log.info(`购物车预渲染失败：${e.message}`)}},this.onPrefetcherFail=function(e){"pages/cart/index"!==p.page().route&&(p.$cart.isCartLandingPrefetcher=!0,p.$cart.operateCart({opTarget:null,cartOpType:"REFRESH",lxData:{},showSuccessToast:!1,needAnimation:!1,forceRefresh:!0}),u.log.info("购物车路由预请求失败：",JSON.stringify(e)))},this.cartMetricsReport=new l.default}};