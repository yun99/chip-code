<tf show="{{show}}" type="bottom" show-mask="{{show}}" z-index="210" bind:maskclick="close" catchtouchmove><view class="coupon-pop-container"><view class="header">优惠券<image src="https://s3plus.meituan.net/v1/mss_1f3dca8fe8534e6fa640054bf3ad2ba6/grocery-fe-cdn/wx/images/cdn/icon_close.e9c5341.png" bindtap="close" class="close"></image></view><view class="container"><scroll-view scroll-y class="content" style="{{!title ? 'height: 830rpx;' : ''}}"><view class="desc" tt:if="{{couponData.couponDesc.enable}}"><image bindtap="gotoRuleDetail" class="question" mode="scaleToFill" src="https://s3plus.meituan.net/v1/mss_1f3dca8fe8534e6fa640054bf3ad2ba6/grocery-fe-cdn/wx/images/cdn/question-gray.6aaa550.png"></image><view class="text">{{couponData.couponDesc.title}}</view></view><view class="tips" tt:if="{{(bestCouponList.length||0) + (otherUsefullCouponList.length || 0)}}"><view class="title">可用优惠券 ({{(bestCouponList.length||0) + (otherUsefullCouponList.length || 0)}}张)</view></view><view class="best" tt:if="{{bestCouponList.length}}"><view class="title"><image class="image" src="https://s3plus.meituan.net/v1/mss_1f3dca8fe8534e6fa640054bf3ad2ba6/grocery-fe-cdn/wx/images/cdn/submitorder_coupon_tag.d276776.png"></image>最佳优惠</view><view class="coupon-contain" tt:key="couponId" tt:for="{{bestCouponList}}"><es useRadio="{{item.valid}}" coupon="{{item}}" bindcouponSelect="couponSelect" data-item="{{item}}" data-type="bestCouponList"></es></view></view><es useRadio="{{item.valid}}" coupon="{{item}}" bindcouponSelect="couponSelect" data-item="{{item}}" data-type="otherUsefullCouponList" tt:if="{{otherUsefullCouponList.length}}" tt:key="couponId" tt:for="{{otherUsefullCouponList}}"></es><view class="tips" tt:if="{{unUsefullCouponList.length}}"><view class="title">不可用优惠券 ({{unUsefullCouponList.length}}张)</view></view><es useRadio="{{item.valid}}" pageType="submitOrder" coupon="{{item}}" bindcouponSelect="couponSelect" data-item="{{item}}" data-type="unUsefullCouponList" tt:if="{{unUsefullCouponList.length}}" tt:key="couponId" tt:for="{{unUsefullCouponList}}" tt:index="index"><view slot="desc-static" class="coupon-invalid" tt:if="{{!item.valid}}"><view class="invalid-title">{{item.limitLabel || '不可用原因：'}}</view><view class="invalid-reason" tt:if="{{item.limit}}"><text>{{item.limit}}</text><block tt:if="{{item.limitDetail}}">（<text>{{item.limitDetail}}</text><text class="invalid-reason-btn" bindtap="showLimitDetail" data-index="{{index}}" tt:if="{{item.limitDetailLabel}}">{{item.limitDetailLabel}}</text>）</block></view></view></es><view class="error" tt:if="{{empty}}"><image src="https://s3plus.meituan.net/v1/mss_1f3dca8fe8534e6fa640054bf3ad2ba6/grocery-fe-cdn/wx/images/cdn/no_coupon_160_160.a094473.png" class="error-img"></image><view class="mall-error-txt">当前您还没有可用的优惠券哦~</view><view class="bottom"></view></view></scroll-view></view><view class="footer"><re type="warn" bindtap="close" data-key="{{(bestCouponList.length||0) + (otherUsefullCouponList.length || 0) ? 'confirm' : ''}}">{{(bestCouponList.length||0) + (otherUsefullCouponList.length || 0) ? '确认' : '我知道了'}}</re></view></view></tf><ed type="bottom" show="{{showModal}}" bindclose="closeModal" is-full-screen="{{true}}" catchtouchmove="true"><view class="mask" bindtap="closeModal" tt:if="{{showModal}}"></view><view class="invalid-pop-main" tt:if="{{showModal}}"><view class="invalid-pop-title">{{limitDetailTitle}}</view><scroll-view class="invalid-pop-content" scroll-y="{{true}}"><view class="invalid-pop-item {{index === (skuBlack.length - 1) ? 'no-border': ''}}" tt:for="{{skuBlack}}" tt:key="index"><view class="invalid-pop-l"><image class="image" src="{{item.pic}}"></image></view><view class="invalid-pop-r"><view class="slogens-title">{{item.skuName}}</view><view class="invalid-pop-detail"><block tt:if="{{item.promotionViewPrice}}"><text class="price-now">￥{{item.promotionViewPrice}}</text><view class="unit" tt:if="{{item.sellUnitViewName || item.viewUnit}}">/{{item.sellUnitViewName || item.viewUnit}}</view><text class="price-origin" tt:if="{{item.promotionViewPrice}}">￥{{item.sellUnitViewPrice}}</text></block><block tt:else><text class="price-now">￥{{item.sellUnitViewPrice}}</text><view class="unit" tt:if="{{item.sellUnitViewName || item.viewUnit}}">/{{item.sellUnitViewName || item.viewUnit}}</view></block></view></view></view></scroll-view><view class="invalid-pop-bottom" bindtap="closeModal">确定</view></view></ed>