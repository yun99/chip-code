var e=Object.create,t=Object.defineProperty,r=Object.defineProperties,a=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertyNames,n=Object.getOwnPropertySymbols,i=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,h=(e,r,a)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,l=e=>t(e,"__esModule",{value:!0}),f=r=>((e,r,c)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let n of s(r))o.call(e,n)||"default"===n||t(e,n,{get:()=>r[n],enumerable:!(c=a(r,n))||c.enumerable});return e})(l(t(null!=r?e(i(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);((e,r)=>{for(var a in l(e),r)t(e,a,{get:r[a],enumerable:!0})})(exports,{default:()=>P});var p=f(require("./z2.js")),m=f(require("./zm.js")),d=f(require("./u6.js")),y=f(require("./z3.js")),C=f(require("./z1.js"));function g(e){const t=(0,d.genKey)(e),r=t&&p.default&&p.default[t];if(!r){return-1!==y.default.indexOf(t)&&"simpleModel"}return r}function x(e){return C.noPrefixKeyMap[e]}var P=class{constructor(){this.cache={},this.noPrefixCache={}}setCache(e,t,{count:r,expires:a,isOnlyCache:c,currentCount:s}={}){if(x(e))return this.setNoPrefixCache(e,t);const n=e&&g(e);return this.cache[e]=n&&new m.default({key:e,value:t,count:r,expires:a,isOnlyCache:c,currentCount:s},n),this.cache[e]}getCache(e,{notUpdateCount:t}={}){if(x(e))return this.getNoPrefixCache(e);if(this.cache[e])return t&&(this.cache[e].checkIfValid()||this.remove(e)),this.cache[e];const a=m.default.getItemObj(e),s=a&&g(e);var i;return this.cache[e]=a&&s&&new m.default((i=((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&h(e,r,t[r]);if(n)for(var r of n(t))u.call(t,r)&&h(e,r,t[r]);return e})({},a),r(i,c({key:e}))),s),this.cache[e]&&(t?this.cache[e].checkIfValid()||this.remove(e):this.cache[e].updateCurrentCount()),this.cache[e]}getCacheValue(e,{notUpdateCount:t}={}){if(x(e))return this.getNoPrefixCache(e);const r=this.getCache(e,{notUpdateCount:t});return g(e)?r&&r.value:r}getOrInit(e,t,r){return this.getCache(e)||this.setCache(e,null===t?void 0:t,r)}getAndRemove(e){const t=this.getCache(e);return this.remove(e),t&&t.value}updateCache(e,t,r){const a=this.getCache(e,{notUpdateCount:!0});return a&&a.update(t,r),this.cache[e]}remove(e){if(x(e))return this.removeNoPrefixCache(e);m.default.removeItem(e),this.cache[e]&&delete this.cache[e]}removeNoPrefixCache(e){delete this.noPrefixCache[e],wx.removeStorage({key:e,success(){},fail(e){}})}getNoPrefixCache(e){if(e in this.noPrefixCache&&this.noPrefixCache[e])return this.noPrefixCache[e];const t=wx.getStorageSync(e);return this.noPrefixCache[e]=t,t}setNoPrefixCache(e,t){this.noPrefixCache[e]=t,wx.setStorage({key:e,data:t,success(){},fail(e){}})}setNoPrefixCacheSync(e,t){this.noPrefixCache[e]=t,wx.setStorageSync(e,t)}};