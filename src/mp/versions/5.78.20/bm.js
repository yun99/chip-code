function r(r,e){return Object.prototype.hasOwnProperty.call(r,e)}module.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var p=1e3;o&&"number"==typeof o.maxKeys&&(p=o.maxKeys);var u=e.length;p>0&&u>p&&(u=p);for(var y=0;y<u;++y){var c,f,i,l,d=e[y].replace(s,"%20"),m=d.indexOf(n);m>=0?(c=d.substr(0,m),f=d.substr(m+1)):(c=d,f=""),i=decodeURIComponent(c),l=decodeURIComponent(f),r(a,i)?Array.isArray(a[i])?a[i].push(l):a[i]=[a[i],l]:a[i]=l}return a};