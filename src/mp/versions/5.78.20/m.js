var e=Object.create,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,o=Object.getOwnPropertySymbols,a=Object.getPrototypeOf,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,u=(e,r,s)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[r]=s,l=(e,t)=>{for(var r in t||(t={}))i.call(t,r)&&u(e,r,t[r]);if(o)for(var r of o(t))n.call(t,r)&&u(e,r,t[r]);return e},g=o=>{return((e,o,a)=>{if(o&&"object"==typeof o||"function"==typeof o)for(let n of s(o))i.call(e,n)||"default"===n||t(e,n,{get:()=>o[n],enumerable:!(a=r(o,n))||a.enumerable});return e})((n=t(null!=o?e(a(o)):{},"default",o&&o.__esModule&&"default"in o?{get:()=>o.default,enumerable:!0}:{value:o,enumerable:!0}),t(n,"__esModule",{value:!0})),o);var n},c=g(require("./s3.js")),p=g(require("./o9.js")),h=g(require("./is.js")),d=getApp();Component({data:{show:!1,type:"error",message:"出错了",customStyle:"",showImage:!1,code:"",title:"",subBtnText:"",suggestionsText:"",suggestionsLink:"",isNew:!1},properties:{showErrorCode:{type:Boolean,value:!0}},ready(){},reloadDisabled:!1,methods:{errorOk(){if(this.okFunction&&"function"==typeof this.okFunction)return this.okFunction();this.reloadDisabled||(this.error_ok&&this.error_ok(),this.reloadDisabled=!0)},error(e){if("boolean"==typeof e)return void this.setData({show:e});const{type:t,show:r,message:s,img:o,textOK:a,okFunction:i,errorStyleType:n,ok:u}=l({},e);if(this.okFunction=i,this.data.show&&r)return;const g=this._getErrorPageWitchByHorn(r,t);if(!1===g)return void((t.startsWith("*_")&&this.data.type.startsWith(t.substring(2))||t===this.data.type)&&this.setData({show:!1}));let p=c.DEFAUL_ERROR_DATA;t?g?(c.ERROR_ENUM.forEach((e=>{e.type===t&&(p=e)})),"toast"===n?this.showErrorToast(e,p):this.showErrorPage(e,p,g),this.error_ok=u,this.reportMetrics(t)):this.data.show&&this.data.type===t&&this.setData(p):this.setData(p)},showErrorToast(e,t){getApp().page().toast({message:e.message||t.message,errorCode:e.code?this.getErrorCode(e.code):""})},showErrorPage(e,t,r){const{type:s,message:o,img:a,textOK:i,customStyle:n,code:u=p.default.DEFAULT,isNew:g=!1,title:c,subBtnText:h,suggestionsText:d,suggestionsLink:m}=l({},e),y={showImage:r&&s.startsWith&&s.startsWith("no_location")&&!s.endsWith("_sub"),show:r,type:s,img:a||t.img&&t.img()||"",message:o||t.message||"",title:c||t.title||"",textOK:i||t.textOK||"",customStyle:n||"",errorCode:this.getErrorCode(u),isNew:g,subBtnText:h||t.subBtnText||"",suggestionsText:d||t.suggestionsText||"",suggestionsLink:m||t.suggestionsLink||""};this.setData(l({},y)),this.reloadDisabled=!1},getErrorCode:e=>d.$errorCode.getCode({code:e}),reportMetrics(e){var t;null==(t=d.$cat)||t.reportCustomMetrics(h.YXReportTarget.ERROR_PAGE,h.ReportValue.SUCCESS,{type:e,pageUrl:d.page().route})},_getErrorPageWitchByHorn(e,t){if(!e)return e;const r=d&&d.$config.get("errorPageConfig")||{};return void 0!==r[t]?r[t]:e}}});