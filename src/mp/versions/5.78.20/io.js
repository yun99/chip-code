var e=Object.create,t=Object.defineProperty,o=Object.defineProperties,n=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertyNames,i=Object.getOwnPropertySymbols,u=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,p=(e,o,n)=>o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n,c=(e,t)=>{for(var o in t||(t={}))l.call(t,o)&&p(e,o,t[o]);if(i)for(var o of i(t))a.call(t,o)&&p(e,o,t[o]);return e},d=e=>t(e,"__esModule",{value:!0}),m=o=>((e,o,s)=>{if(o&&"object"==typeof o||"function"==typeof o)for(let i of r(o))l.call(e,i)||"default"===i||t(e,i,{get:()=>o[i],enumerable:!(s=n(o,i))||s.enumerable});return e})(d(t(null!=o?e(u(o)):{},"default",o&&o.__esModule&&"default"in o?{get:()=>o.default,enumerable:!0}:{value:o,enumerable:!0})),o);((e,o)=>{for(var n in d(e),o)t(e,n,{get:o[n],enumerable:!0})})(exports,{addGlobalParams:()=>I,default:()=>O});var y=m(require("./u2.js")),f=m(require("./uc.js")),g=m(require("./u8.js")),v=m(require("./aw.js")),b={},I=(e,t,o=!1)=>{if("string"!=typeof e)return;const n=b[e]&&b[e]!==t;n&&!o||(b[e]=t)},O=(e,t)=>{var n,r,i,u,l,a;const{method:p="GET",url:d,params:m={},body:I={},headers:O={},setting:$={}}=e.request,h=f.default.requestUrl,_=getApp(),P=c((j=c({uuid:_&&_.$uuid},y.DefaultQueryString),C={utm_term:_&&_.$version||"3.5.0",device_model:(null==(r=null==(n=null==_?void 0:_.$systemInfo)?void 0:n.systemInfo)?void 0:r.model)||"",optimus_risk_level:71,optimus_code:10},o(j,s(C))),m);var j,C;const{domain:q=h}=$;let E=d;_&&_.$poi.getPoiIdStr()&&(P.poiIdStr=_.$poi.getPoiIdStr(),P.poi=_.$poi.getPoiId(),P.stockPois=_.$poi.getPoiId(),P.ci=_.$cityId,P.bizId=4);const D=null==_?void 0:_.getModule("user"),U=null==D?void 0:D.getUserId(),w=null==D?void 0:D.getUnionId();if(U&&(P.fp_user_id=U),D.getOpenIdCipher()&&(P.fp_open_id_cipher=D.getOpenIdCipher()),D.getOpenId()&&(P.openId=D.getOpenId()),w&&(P.unionId=w),null==(u=null==(i=null==_?void 0:_.$systemInfo)?void 0:i.systemInfo)?void 0:u.system){const[e,t]=_.$systemInfo.systemInfo.system.split(" ");P.sysName=e,P.sysVerion=t}_.$env.getDebug()&&(P.debug=!0),(null==(a=null==(l=null==_?void 0:_.$systemInfo)?void 0:l.systemInfo)?void 0:a.appVersion)&&(P.app_version=_.$systemInfo.systemInfo.appVersion),_.$appTag&&(P.app_tag=_.$appTag),_.$uci&&(P.uci=_.$uci),(0,g.isWXMT)()&&(P.app_channel=0),_.$sceneCode===v.SCENE_CODE.LIVE&&(_.$subChannel&&(P.subChannel=_.$subChannel),_.$liveRoomNum&&(P.liveRoomNum=_.$liveRoomNum)),Object.keys(b).forEach((e=>{P[e]||(P[e]=b[e])})),Object.keys(P).forEach((e=>{if(null!=P[e]){const t=String(P[e]).replace(/[\r\n]/g,"");E+=(~E.indexOf("?")?"&":"?")+[encodeURIComponent(e),encodeURIComponent(t)].join("=")}})),e.setting=$;const S=_.getModule("env");let k=q+E;if(S&&"test"===S.env){const e=S.getSwimlane();e&&(O.swimlane=e),"20313-sign"===e&&(k=k.replace("consumer.grocery.test.sankuai.com","sign-consumer.grocery.test.sankuai.com"));S.getTestEnvHttps()&&(k=k.replace("http://","https://"))}const x={url:k,data:I,method:p,header:c({"content-type":"GET"===p?"multipart/form-data":"application/json"},O)};const T=_.getModule("user").getToken();return T&&(x.header.t=T),e.request.isCore&&(x.isCore=e.request.isCore),e.request.isPrefetch&&(x.isPrefetch=e.request.isPrefetch),e.setRequest(x),e};