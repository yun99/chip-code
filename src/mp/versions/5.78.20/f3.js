var e=Object.create,t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,s=Object.getPrototypeOf,r=Object.prototype.hasOwnProperty,o=e=>t(e,"__esModule",{value:!0}),a=(e,i,n)=>(((e,i,n)=>{i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n})(e,"symbol"!=typeof i?i+"":i,n),n);((e,i)=>{for(var n in o(e),i)t(e,n,{get:i[n],enumerable:!0})})(exports,{default:()=>u});var l,h=(l=require("./kw.js"),((e,s,o)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let a of n(s))r.call(e,a)||"default"===a||t(e,a,{get:()=>s[a],enumerable:!(o=i(s,a))||o.enumerable});return e})(o(t(null!=l?e(s(l)):{},"default",l&&l.__esModule&&"default"in l?{get:()=>l.default,enumerable:!0}:{value:l,enumerable:!0})),l)),u=class extends h.default{constructor(e,t){super(e,t),a(this,"_getShareID",(()=>this.app.$shareUserId)),a(this,"_getClickID",(()=>{var e;return null==(e=this.boot)?void 0:e.getModule("user").getUserId()})),a(this,"tryBind",(()=>{this.flagOptionsDone&&this.flagLoginDone&&this.bindShareRelationship()})),a(this,"bindShareRelationship",(()=>{const e=this._getShareID(),t=this._getClickID();e&&t&&String(e)!==String(t)&&this.app.$service.apiBindRelationship({clickUserId:t,shareUserId:e})})),a(this,"destory",(()=>{})),this.flagLoginDone=!1,this.flagOptionsDone=!1,this.event.on(this.event.CONTANTS.LOGIN_SUCCESS,(()=>{this.flagLoginDone=!0,this.tryBind()})),this.event.on(this.event.CONTANTS.LOGIN_OUT,(()=>{this.flagLoginDone=!1})),this.event.on(this.event.CONTANTS.OPTIONS_PARSING_FINISHED,(()=>{this.flagOptionsDone=!0,this.tryBind()}))}static register(e){const t=new u("relation",e);return e.addModule(t),t}};