var e=Object.create,r=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertyNames,i=Object.getOwnPropertySymbols,n=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,u=(e,t,a)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,l=e=>r(e,"__esModule",{value:!0}),d=t=>((e,t,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of s(t))p.call(e,i)||"default"===i||r(e,i,{get:()=>t[i],enumerable:!(o=a(t,i))||o.enumerable});return e})(l(r(null!=t?e(n(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);((e,t)=>{for(var a in l(e),t)r(e,a,{get:t[a],enumerable:!0})})(exports,{default:()=>O});var g=d(require("./ob.js")),m=d(require("./ne.js")),y=d(require("./x6.js")),O=class extends m.default{constructor(){super(...arguments),this.cartReq=null,this.cartResponseVO=null,this.cartOrderService=y}getCartReqParams(e){const r={cartOpType:"REFRESH",cartOpSource:"CART",opTarget:{opTargets:[]},poiId:getApp().$poiId,shippingType:-1,tempCartId:"",createTempCart:!1,layerRender:!1,needItems:!1};return Object.assign({},this.cartReq||r,e)}getCartOrderPreview(e){const{order:r}=this;this.order.lastPoi&&this.order.lastPoi!==getApp().$poi.getPoiIdStr()&&(this.order.data.orderPreview.shippingType=1,this.order.lastPoi=getApp().$poi.getPoiIdStr());const a=r.mapping.getNormalOrderPreviewParams(),s=this.getCartReqParams({shippingType:a.shippingType});return this.cartReq=null,this.cartResponseVO=null,r.skuCountInfo={},this.cartOrderService.cartOrderPreview({orderPreviewRequest:a,cartRequest:s},r.options.trafficSource?{trafficSource:r.options.trafficSource}:{}).then((({cartResponseVO:r={},orderPreivewResonse:a={}})=>{var n,l,d;return this.cartResponseVO=(l=((e,r)=>{for(var t in r||(r={}))p.call(r,t)&&u(e,t,r[t]);if(i)for(var t of i(r))c.call(r,t)&&u(e,t,r[t]);return e})({},r),d={realTotalAmountV2:a.cashPay||0,realTotalAmount:a.cashPay||0},t(l,o(d))),null==(n=getApp())||n.$cart.operateSubmitCart(this.cartResponseVO,e,s),a}))}getPreviewRes(){return e=this,r=null,t=function*(){const{order:e}=this;return e.skuCountInfo={},g.log.info("<submitOrderService orderPreview> 准备调用orderPreview接口"),yield this.getCartOrderPreview()},new Promise(((a,o)=>{var s=e=>{try{n(t.next(e))}catch(e){o(e)}},i=e=>{try{n(t.throw(e))}catch(e){o(e)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,i);n((t=t.apply(e,r)).next())}));var e,r,t}checkSubmitDisabled(){var e;return getApp().$poi.isExperiencePoi()||0===(null==(e=this.cartResponseVO)?void 0:e.totalItemCounts)}};