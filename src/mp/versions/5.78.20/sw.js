var e=Object.create,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,o=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,u=e=>t(e,"__esModule",{value:!0});((e,r)=>{for(var n in u(e),r)t(e,n,{get:r[n],enumerable:!0})})(exports,{getResFromRecently:()=>i});var a,s=(a=require("./ug.js"),((e,o,u)=>{if(o&&"object"==typeof o||"function"==typeof o)for(let a of n(o))l.call(e,a)||"default"===a||t(e,a,{get:()=>o[a],enumerable:!(u=r(o,a))||u.enumerable});return e})(u(t(null!=a?e(o(a)):{},"default",a&&a.__esModule&&"default"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a));function i(e,{expire:t=0,refresh:r=!0,tag:n=""}={}){const o=new Map;let l;const u=new Map;function a(e,r){t>0&&setTimeout((()=>{u.delete(e)}),t),u.set(e,r)}return function(...t){n&&(l=(0,s.buildProportion)(n));const i=JSON.stringify(t),c=u.get(i);if(null==c){let r=o.get(i);return r?(l&&l("prePromise"),r):(r=e.apply(this,t),o.set(i,r),r.then((e=>{o.delete(i),a(i,e)}),(e=>{o.delete(i)})),r)}return r&&e.apply(this,t).then((e=>{a(i,e)}),(e=>{})),l&&l("cache"),Promise.resolve(c)}}