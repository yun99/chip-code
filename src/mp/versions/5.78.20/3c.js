var e=Object.create,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,o=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,c=e=>t(e,"__esModule",{value:!0}),i=i=>((e,o,c)=>{if(o&&"object"==typeof o||"function"==typeof o)for(let i of n(o))a.call(e,i)||"default"===i||t(e,i,{get:()=>o[i],enumerable:!(c=r(o,i))||c.enumerable});return e})(c(t(null!=i?e(o(i)):{},"default",i&&i.__esModule&&"default"in i?{get:()=>i.default,enumerable:!0}:{value:i,enumerable:!0})),i);((e,r)=>{for(var n in c(e),r)t(e,n,{get:r[n],enumerable:!0})})(exports,{default:()=>l});var u=i(require("./ob.js")),s=`${i(require("./vw.js")).MOUDULE_NAME}[Interceptor]:`,l=class{constructor(e){this.intercept=e=>{return t=this,r=null,n=function*(){for(let t=0;t<this.chainInterceptor.length;t++){const r=this.chainInterceptor[t];try{e=yield r.use(e)}catch(e){throw{name:this.name,interceptorName:r.name,errMsg:e,msg:"链式处理器 ChainInterceptor——>interceptor中执行出错"}}}return e},new Promise(((e,o)=>{var a=e=>{try{i(n.next(e))}catch(e){o(e)}},c=e=>{try{i(n.throw(e))}catch(e){o(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,c);i((n=n.apply(t,r)).next())}));var t,r,n},this.name="ChainInterceptor",this.chainInterceptor=[],this.uriHandler=e}addInterceptor(e){if(e&&"function"==typeof e.use){if(!e.name)return void u.log.error(s,"interceptor缺少name属性，请添加后重试");if(-1!==this.chainInterceptor.map((e=>e.name)).indexOf(e.name))return void u.log.error(s,"已存在同名interceptor，请修改后重试");this.chainInterceptor.push(e)}}};