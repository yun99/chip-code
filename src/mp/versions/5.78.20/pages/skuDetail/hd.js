var e=Object.create,t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,a=Object.getPrototypeOf,n=Object.prototype.hasOwnProperty,l=e=>t(e,"__esModule",{value:!0}),r=r=>((e,a,l)=>{if(a&&"object"==typeof a||"function"==typeof a)for(let r of o(a))n.call(e,r)||"default"===r||t(e,r,{get:()=>a[r],enumerable:!(l=i(a,r))||l.enumerable});return e})(l(t(null!=r?e(a(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);((e,i)=>{for(var o in l(e),i)t(e,o,{get:i[o],enumerable:!0})})(exports,{default:()=>u});var s=r(require("../../ob.js")),d=r(require("../../u5.js")),u=class{constructor(e){this.page=e}setSkuSharePosterSchemaData(e={}){this.skuDetail=e}getSkuPosterData(){var e,t,i,o,a,n,l,r,s,u,g,c,m,h,p,f,x,P,b,y;return{poiPic:d.$poi.getPoiInfo().picUrl||"https://s3plus.meituan.net/v1/mss_1f3dca8fe8534e6fa640054bf3ad2ba6/grocery-fe-cdn/wx/images/cdn/index_c3_default_site_pic.64c3370.png",poiName:d.$poi.getPoiInfo().poiName||"",poiAddress:d.$poi.getPoiInfo().addressDesc||"",skuImage:(null==(t=null==(e=this.skuDetail)?void 0:e.picUrls)?void 0:t.length)&&this.skuDetail.picUrls[0]||"",promotionPrice:(null==(o=null==(i=this.skuDetail)?void 0:i.promotionPrice)?void 0:o.text)||"",priceTag:(null==(n=null==(a=this.skuDetail)?void 0:a.priceTag)?void 0:n.text)||"",promotionLimitTag:(null==(r=null==(l=this.skuDetail)?void 0:l.promotionLimitTag)?void 0:r.text)||"",skuTitle:((null==(s=this.skuDetail)?void 0:s.productId)&&2===(null==(u=this.skuDetail)?void 0:u.productPattern)?null==(c=null==(g=this.skuDetail)?void 0:g.productName)?void 0:c.text:null==(h=null==(m=this.skuDetail)?void 0:m.skuTitle)?void 0:h.text)||"",appPromotionTag:(null==(f=null==(p=this.skuDetail)?void 0:p.appPromotionTag)?void 0:f.text)||"",sellPrice:(null==(P=null==(x=this.skuDetail)?void 0:x.sellPrice)?void 0:P.text)||"",dashPrice:(null==(y=null==(b=this.skuDetail)?void 0:b.dashPrice)?void 0:y.text)||""}}getPoiNameYCoordinate(e){return e.poiAddress?239:266}isShowSeckillPriceArea(e){return!!e.priceTag}getSeckillPriceTagTextXCoordinate(e){return e.promotionLimitTag?602:594}getSeckillPriceTagTextYCoordinate(e){return e.promotionLimitTag?929:958}getSeckillPriceTagTextFontSize(e){return e.promotionLimitTag?40:50}getPriceUnit(e){return e.length>0?e[0]:""}getPriceValue(e){let t="";return(null==e?void 0:e.length)>0&&(t=e.substring(1),void 0!==t&&"undefined"!==t||s.log.error(`返回架构错误 原价格文案${e}, 去价格符后 ${t} - undefined, 时间${new Date}`)),t}getSkuSharePosterConfig(e){const t=this.getSkuPosterData();return{canvasWidth:750,canvasHeight:1334,backgroundColor:"#fff",debug:!1,filter:!0,pixelRatio:1.8,images:[{name:"背景图片",display:!0,x:0,y:0,url:"https://s3plus.meituan.net/v1/mss_1f3dca8fe8534e6fa640054bf3ad2ba6/grocery-fe-cdn/wx/images/cdn/sku_detail_poster_bg_image.799a1251.png",width:750,height:1334,zIndex:0},{name:"门店头像",display:!!t.poiPic,x:60,y:233,url:t.poiPic,width:110,height:110,borderRadius:12,zIndex:1},{name:"商品图",display:!!t.skuImage,x:54,y:403,url:t.skuImage,width:642,height:642,borderRadius:24,zIndex:1},{name:"秒杀价条背景图",display:this.isShowSeckillPriceArea(t)&&!0,x:54,y:917,url:"https://s3plus.meituan.net/v1/mss_1f3dca8fe8534e6fa640054bf3ad2ba6/grocery-fe-cdn/wx/images/cdn/sku_detail_poster_seckill_price_bg.f7371106.png",width:642,height:128,zIndex:2},{name:"二维码",display:!!e,x:526,y:1069,url:e,width:145,height:145,zIndex:1}],blocks:[{name:"限购标签",display:this.isShowSeckillPriceArea(t)&&!!t.promotionLimitTag,x:532,y:979,width:130,height:52,backgroundColor:"#FF1929",borderRadius:18,text:{text:[{text:t.promotionLimitTag,fontFamily:"sans-serif",fontWeight:"bold",fontSize:40,lineHeight:44,color:"#FFFFFF",marginLeft:16,marginRight:16}],baseLine:"middle"},zIndex:3},{name:"促销活动标签",display:!!t.appPromotionTag,x:54,y:1173,width:52,height:34,backgroundColor:"#FF1929",borderRadius:12,text:{text:[{text:t.appPromotionTag,fontFamily:"sans-serif",fontWeight:"bold",fontSize:22,color:"#FFFFFF",marginLeft:10,marginRight:10}],baseLine:"middle"},zIndex:1}],texts:[{name:"门店标题",display:!!t.poiName,x:194,y:this.getPoiNameYCoordinate(t),width:470,lineHeight:48,fontFamily:"sans-serif",fontSize:40,fontWeight:"bold",color:"#121924",baseLine:"top",text:t.poiName,lineNum:1,zIndex:1},{name:"门店地址",display:!!t.poiAddress,x:194,y:287,width:480,lineHeight:32,fontFamily:"sans-serif",fontSize:26,color:"#95989E",baseLine:"top",text:t.poiAddress,lineNum:2,zIndex:1},{name:"秒杀价条价格",display:this.isShowSeckillPriceArea(t)&&!!t.promotionPrice,x:80,y:1012,width:310,lineNum:1,text:[{name:"价格符号",text:this.getPriceUnit(t.promotionPrice),fontFamily:"sans-serif",fontSize:44,fontWeight:"bold",color:"#FFFFFF",lineHeight:44,baseLine:"bottom"},{name:"秒杀价",text:this.getPriceValue(t.promotionPrice),fontFamily:"sans-serif",fontSize:80,fontWeight:"bold",color:"#FFFFFF",lineHeight:64,marginLeft:4,baseLine:"bottom"}],zIndex:3},{name:"秒杀价标签文案",display:this.isShowSeckillPriceArea(t)&&!!t.priceTag,x:this.getSeckillPriceTagTextXCoordinate(t),y:this.getSeckillPriceTagTextYCoordinate(t),width:124,lineNum:1,text:t.priceTag,fontFamily:"sans-serif",fontSize:this.getSeckillPriceTagTextFontSize(t),fontWeight:"bold",color:"#FF1F29",baseLine:"top",textAlign:"center",zIndex:3},{name:"商品标题",display:!!t.skuTitle,x:54,y:1075,width:448,lineHeight:48,fontFamily:"sans-serif",fontSize:36,fontWeight:"bold",color:"#121924",baseLine:"top",text:t.skuTitle,lineNum:2,zIndex:1},{name:"价格",display:!!t.sellPrice||!!t.dashPrice,x:54,y:1262,width:448,lineNum:1,text:[{name:"价格符号",text:this.getPriceUnit(t.sellPrice),fontFamily:"sans-serif",fontSize:38,fontWeight:"bold",color:"#FF1929",lineHeight:38,baseLine:"bottom"},{name:"售价",text:this.isShowSeckillPriceArea(t)?this.getPriceValue(t.promotionPrice):this.getPriceValue(t.sellPrice),fontFamily:"sans-serif",fontSize:64,fontWeight:"bold",color:"#FF1929",lineHeight:64,marginLeft:4,baseLine:"bottom"},{name:"划线价",text:t.dashPrice,fontFamily:"sans-serif",fontSize:32,color:"#8D9096",lineHeight:32,marginLeft:6,textDecoration:"line-through",baseLine:"bottom"}],zIndex:1}]}}setSkuSharePosterConfig(e){this.page.setData({skuSharePosterConfig:this.getSkuSharePosterConfig(e)||{},skuShareDefaultPoster:"https://s3plus.meituan.net/v1/mss_1f3dca8fe8534e6fa640054bf3ad2ba6/grocery-fe-cdn/wx/images/cdn/sku_detail_share_default_poster.2dcf1197.png"})}};