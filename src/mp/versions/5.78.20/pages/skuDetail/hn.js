var e=Object.create,t=Object.defineProperty,l=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,r=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,n=e=>t(e,"__esModule",{value:!0});((e,l)=>{for(var i in n(e),l)t(e,i,{get:l[i],enumerable:!0})})(exports,{default:()=>s});var c,u=(c=require("../../ob.js"),((e,r,n)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let c of i(r))o.call(e,c)||"default"===c||t(e,c,{get:()=>r[c],enumerable:!(n=l(r,c))||n.enumerable});return e})(n(t(null!=c?e(r(c)):{},"default",c&&c.__esModule&&"default"in c?{get:()=>c.default,enumerable:!0}:{value:c,enumerable:!0})),c)),s=class{getSeckillPriceData(e={}){if(!this.isShowSeckillPrice(e))return null;const t=this.getDisplayPrice(e),l=this.getDisplayTag(e);return{skuId:e.skuId||null,sellUnit:e.sellUnit||null,seckillingSubType:e.seckillingSubType||null,countdownVO:e.countdownVO||null,seckillingTimeText:e.seckillingTimeText||null,sellPrice:e.sellPrice||null,dashPrice:e.dashPrice||null,memberPrice:e.memberPrice||null,dashPriceReference:e.dashPriceReference||null,promotionPrice:e.promotionPrice||null,sales:e.sales||null,showSellPrice:e.showSellPrice||!1,promotionLimitText:e.promotionLimitText||null,priceUnit:t.priceUnit||"￥",sellPriceValue:t.sellPriceValue||"",promotionPriceValue:t.promotionPriceValue||"",priceByType:t.priceByType,limitAmount:l.limitAmount||"",promotionTagText:l.promotionTagText||"",productPattern:e.productPattern||1,lowSellPrice:e.lowSellPrice||null,highSellPrice:e.highSellPrice||null,skuSpecs:e.skuSpecs||[],skuDetailTagImage:e.skuDetailTagImage||null}}showCountDown(e={}){return this.isShowSeckillPrice(e)}isShowSeckillPrice(e={}){return!!e.countdownVO}getDisplayPrice(e){let t={priceUnit:"",sellPriceValue:"",promotionPriceValue:"",priceByType:""};if((null==e?void 0:e.sellPrice)||(null==e?void 0:e.promotionPrice)){const l=2===(null==e?void 0:e.countdownVO.seckillType)?e.promotionPrice:e.sellPrice;t={priceUnit:this.getPriceUnit(l),sellPriceValue:this.getPriceValue(e.sellPrice),promotionPriceValue:this.getPriceValue(e.promotionPrice),priceByType:l.text}}return t}getDisplayTag(e){var t,l;try{const{priceTag:i,promotionLimitTag:r,skuLimitBuyTag:o,promotionPrice:n}=e,c=!(!o||!o.text),u=!(!i||!i.text),s=!(!r||!r.text),a={limitAmount:"",promotionTagText:""},p=null==(t=e.countdownVO)?void 0:t.seckillType;if(u){const t=[];(null==(l=e.skuDetailTagImage)?void 0:l.url)||t.push(i.text),2===p&&(s&&t.push(r.text),c&&t.push(o.text)),3===p&&(n&&n.text&&t.push(n.text),a.limitAmount=s?r.text:c?o.text:""),a.promotionTagText=t.join(" ")}return!u&&c&&(a.promotionTagText=o.text),a}catch(e){return u.log.info(`<SeckillPriceHandle getDisplayTag> 处理秒杀商品标签出错, ${e.message}`),{limitAmount:"",promotionTagText:""}}}getPriceUnit(e){return(e.text||"").slice(0,1)||"￥"}getPriceValue(e){return(e.text||"").slice(1)||""}};