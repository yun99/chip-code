var e=Object.create,t=Object.defineProperty,n=Object.defineProperties,o=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertyNames,r=Object.getOwnPropertySymbols,i=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,u=(e,n,o)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,l=(e,t)=>{for(var n in t||(t={}))c.call(t,n)&&u(e,n,t[n]);if(r)for(var n of r(t))p.call(t,n)&&u(e,n,t[n]);return e},f=(e,t)=>n(e,s(t)),d=n=>{return((e,n,s)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let r of a(n))c.call(e,r)||"default"===r||t(e,r,{get:()=>n[r],enumerable:!(s=o(n,r))||s.enumerable});return e})((s=t(null!=n?e(i(n)):{},"default",n&&n.__esModule&&"default"in n?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0}),t(s,"__esModule",{value:!0})),n);var s},g=(e,t,n)=>new Promise(((o,s)=>{var a=e=>{try{i(n.next(e))}catch(e){s(e)}},r=e=>{try{i(n.throw(e))}catch(e){s(e)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,r);i((n=n.apply(e,t)).next())})),m=d(require("../../ob.js")),y=d(require("../../u9.js")),h=d(require("../../ao.js")),b=d(require("./ap.js")),O=require("../../er.js"),P=getApp(),I="[multiPoiPage]",_={backgroundPic:"https://p0.meituan.net/mallimages/5d21bd46361b12efa03f90bcf5565f9943914.jpg",title:"当前城市还未开通美团优选",subTitle:"更改地址查看已开通城市",protocol:"跳转选择地址页",toOpenTitle:"点击开通，让美团优选登录您的城市",toOpenSubtitle:"申请人数越多，我们将越早为您开通"},v={currentAdress:"",openDesc:"附近三公里还未开启美团优选",shareDesc:"分享给好友，一起为您的小区加速吧",poiInfos:[{poiName:"长海的超市",address:"自提地址：不不不不不不啦啦啦啦啦啦啦啦绿绿绿绿绿绿啦啦啦啦啦啦啦啦绿绿绿绿绿绿绿",distanceText:"距您3.4公里",poiPic:"https://s3plus.meituan.net/v1/mss_1f3dca8fe8534e6fa640054bf3ad2ba6/grocery-fe-cdn/c-mp/files/0_migrate-765662f1d6eab3a6ae6d51963a764048.png"},{poiName:"杨广",address:"11",distanceText:"距您3.4公里",poiPic:"https://s3plus.meituan.net/v1/mss_1f3dca8fe8534e6fa640054bf3ad2ba6/grocery-fe-cdn/c-mp/files/0_migrate-765662f1d6eab3a6ae6d51963a764048.png"}]},x=[{type:1,title:"成为团长",subTitle:"闲暇时间实现高收入高回报",picUrl:"1",jumpUrl:"",logo:"https://s3plus.meituan.net/v1/mss_1f3dca8fe8534e6fa640054bf3ad2ba6/grocery-fe-cdn/c-mp/files/1_migrate-d37786c56be70749c59fecfd36362af9.png"},{type:2,title:"供应商入驻",subTitle:"闲暇时间实现高收入高回报",picUrl:"2",jumpUrl:"",logo:"https://s3plus.meituan.net/v1/mss_1f3dca8fe8534e6fa640054bf3ad2ba6/grocery-fe-cdn/c-mp/files/1_migrate-d37786c56be70749c59fecfd36362af9.png"},{type:3,title:"加入我们",subTitle:"闲暇时间实现高收入高回报",picUrl:"3",jumpUrl:"",logo:"https://s3plus.meituan.net/v1/mss_1f3dca8fe8534e6fa640054bf3ad2ba6/grocery-fe-cdn/c-mp/files/1_migrate-d37786c56be70749c59fecfd36362af9.png"}];O(new class{constructor(){this.onLoad=function(e){this.getOpenBussinessPageInfo()},this.onShow=function(){P.$lxLog.pv("c_youxuan_08ty7x8g",{custom:{type:this.data.type}})},this.onPullDownRefresh=function(){this.getOpenBussinessPageInfo()},this.toSelectLocation=function(e){const t=getApp();t.$lxLog.mc("b_youxuan_j2uac1lt_mc",{type:this.data.type});const n=`?from=${encodeURIComponent("FROM_MULTI_POI_PAGE")}`;t.$router.goto(`/subPackages/location/pages/selfPickSelect/index${n}`,{fromTo:this.data.currentAddress})},this.getOpenBussinessPageInfo=function(){return g(this,null,(function*(){var e;getApp();const t=yield y.default.onGetLocation();let n={currentCityNotOpenPageInfo:{},currentCommunityNotOpenPageInfo:{}};try{n=yield(0,b.getOpenBussinessPageInfoReq)(t),m.log.warn(I,"getOpenBussinessPageInfo接口的返回值是：",n),this.onPageData(n)}catch(t){const{code:n}=(null==t?void 0:t.data)||{},{statusCode:o}=(null==t?void 0:t.res)||{};let s=h.PoiLocationErrorType.BACK_END_ERROR;420===n?s=h.PoiLocationErrorType.ANTI_ERROR_420:403===o&&(s=h.PoiLocationErrorType.ANTI_ERROR),this.showError("forbidden",null==(e=(0,h.getLocationErrorWithType)(s))?void 0:e.errorCode),m.log.error(I,"接口报错了","!".repeat(5),t)}}))},this.onPageData=function(e){return g(this,null,(function*(){const{type:t=1,currentCityNotOpenPageInfo:{addressDescriptionTitle:n="当前城市还未开通美团优选",addressDescriptionSubTitle:o="更改地址查看已开通城市",openDescriptionTitle:s="点击开通，让美团优选登录您的城市",openDescriptionSubTitle:a="申请人数越多，我们将越早为您开通"},currentCommunityNotOpenPageInfo:{openDesc:r="附近三公里还未开启美团优选",shareDesc:i="分享给好友，一起为您的小区加速吧",poiInfos:c=[]},address:p="",shareInfo:u,openBussinessQuetionInfos:d}=e,g=f(l({},this.data.cityUnOpenInfo),{title:n,subTitle:o,toOpenTitle:s,toOpenSubtitle:a}),y=f(l({},this.data.poiOpenInfos),{openDesc:r,shareDesc:i,poiInfos:c});this.shareInfo=u,this.setData({type:t,cityUnOpen:0===t,areaUnOpen:1===t,dataReady:!0,cityUnOpenInfo:g,poiOpenInfos:y,currentAddress:p||"",hrInfos:d}),m.log.info(I,"页面信息是：",this.data),this.setBackgroundColor(0===t)}))},this.setBackgroundColor=function(e){wx.setNavigationBarColor({frontColor:"#ffffff",navigationBarTextStyle:e?"white":"black",backgroundColor:e?"#FECE00":"#ffffff",animation:{duration:100,timingFunc:"easeIn"}})},this.onShareAppMessage=function(){const e=this.route||"unknown",t=getApp(),{path:n,requestId:o}=t.$lxLog.genLxSharePath(this.route,"/pages/index/index",{from:`from_share_${e}`});t.$lxLog.mc("b_youxuan_y5g64pno_mc",{share_url:n},{requestId:o});const{title:s="分享给邻居，一起为您的小区加速吧.",picUrl:a}=this.shareInfo;return m.log.warn(I,`onShareAppMessage ${this.route}`,"分享信息是：",{path:n,title:s,imageUrl:a}),{title:s,path:n,imageUrl:a}},this.data={type:-999,currentAddress:"",dataReady:!1,cityUnOpen:!0,cityUnOpenInfo:_,areaUnOpen:!0,poiOpenInfos:v,hrInfos:x}}});