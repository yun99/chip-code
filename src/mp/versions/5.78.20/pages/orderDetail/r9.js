var e,t,s=Object.create,o=Object.defineProperty,r=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.getPrototypeOf,n=Object.prototype.hasOwnProperty,u=e=>{return((e,t,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of a(t))n.call(e,i)||"default"===i||o(e,i,{get:()=>t[i],enumerable:!(s=r(t,i))||s.enumerable});return e})((t=o(null!=e?s(i(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0}),o(t,"__esModule",{value:!0})),e);var t},d=u(require("./p9.js")),c=u(require("./g2.js"));(t=e||(e={}))[t.Default=0]="Default",t[t.Stock=1]="Stock",t[t.Discount=2]="Discount",t[t.Review=3]="Review",t[t.ContactGroup=4]="ContactGroup",t[t.PriceMatch=5]="PriceMatch",t[t.PeopleBuy=6]="PeopleBuy",t[t.AutoRefund=7]="AutoRefund";var l=1,p=2,m=getApp();Component({properties:{show:{type:Boolean,value:!1,observer(e){const{orderId:t,info:s,from:o,skuId:r}=this.data;e&&!this.data.isShowed&&this.isValidNumber(o)&&this.isValidNumber(r)&&(this.setData({isShowed:!0}),m.$lxLog.mv(c.MV_BID[`${o}`],{order_id:t,sku_list:[r],toast_name:this.getMessageFromInfo(s),toast_type:this.getToastType()}))}},info:{type:Object,value:{},observer(e){const{discount:t={}}=e;if(t.message){const e=t.message.split("%");t.preInfo=e[0]||"",t.nextInfo=e[1]||""}this.setData({discountInfo:t})}},cancelText:{type:String,value:"继续退款"},okText:{type:String,value:"知道了"},orderId:{type:String,value:""},stackId:{type:String,value:""},skuId:{type:Number,value:NaN},from:{type:Number,value:NaN}},data:{discountInfo:{},isShowed:!1},methods:{close(e){const{info:t={}}=this.properties,{routerParams:s={}}=t;this.triggerEvent("close",{stay:e.currentTarget.dataset.stay,routerParams:s})},onOk(e){const{orderId:t,info:s={},from:o,skuId:r}=this.data,{stayTypeCode:a}=s;this.isValidNumber(o)&&this.isValidNumber(r)&&m.$lxLog.mc(c.YELLO_BTN_BID[`${o}`],{order_id:t,button_name:this.getMessageFromInfo(s),sku_list:[r]}),7===a&&this.reportAction(l),this.close(e)},onCancel(e){const{orderId:t,info:s={},from:o,skuId:r}=this.data,{stayTypeCode:a}=s;this.isValidNumber(o)&&this.isValidNumber(r)&&m.$lxLog.mc(c.WHITE_BTN_BID[`${o}`],{order_id:t,button_name:this.getMessageFromInfo(s),sku_list:[r]}),7===a&&this.reportAction(p),this.close(e),m.$lxLog.mv(c.YELLO_BTN_BID,{order_id:t})},reportAction(e){const{orderId:t,stackId:s}=this.properties;t&&s&&(0,d.reportRefundStay)({orderId:+t,stackId:+s,action:e})},getMessageFromInfo(e={}){if(e.message)return e.message;for(const t in e)if(e.hasOwnProperty(t)&&e[t].message)return e[t].message},getToastType(){const{stayTypeCode:e}=this.data.info;return 4===e||7===e?"温馨提示":""},isValidNumber:e=>!(0!=+e&&!e),onClose(e){const{orderId:t,from:s,skuId:o}=this.data;this.isValidNumber(s)&&this.isValidNumber(o)&&m.$lxLog.mc(c.CLOSE_BTN_BID[`${s}`],{order_id:t,sku_list:[o]}),this.close(e)}}});