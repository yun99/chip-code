var e=Object.create,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,n=Object.getPrototypeOf,i=Object.prototype.hasOwnProperty,l=e=>t(e,"__esModule",{value:!0}),o=o=>((e,n,l)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let o of a(n))i.call(e,o)||"default"===o||t(e,o,{get:()=>n[o],enumerable:!(l=r(n,o))||l.enumerable});return e})(l(t(null!=o?e(n(o)):{},"default",o&&o.__esModule&&"default"in o?{get:()=>o.default,enumerable:!0}:{value:o,enumerable:!0})),o);((e,r)=>{for(var a in l(e),r)t(e,a,{get:r[a],enumerable:!0})})(exports,{ShareCardType:()=>s,default:()=>h});var s,u,p=o(require("../../u1.js")),c=o(require("../../ob.js")),m=require("../../uc.js");(u=s||(s={}))[u.TYPE_REMIND_ORDERS=0]="TYPE_REMIND_ORDERS",u[u.TYPE_REMIND_RECEIPT=1]="TYPE_REMIND_RECEIPT",u[u.TYPE_VIEW_PRODUCT_INFO=2]="TYPE_VIEW_PRODUCT_INFO";var g=getApp(),h=class{constructor(e,t){this.imageMap={},this.textMap={},this.textBlockMap={},this.templateId=e,this.options=t}setTestTemplateId(e){return g.$isProd||(this.templateId=e),this}addImageMap(e){return this.imageMap=e,this}addTextMap(e){return this.textMap=e,this}addTextBlockMap(e){return this.textBlockMap=e,this}create(){return this.generateShareImage()}generateConfig(){return{templateId:this.templateId,dynamicParameter:{imageMap:this.imageMap,textMap:this.textMap,textBlockMap:this.textBlockMap}}}generateShareImage(){return e=this,t=null,r=function*(){if(!this.templateId)return c.log.error("[core-share] <generateShareImage> 模板id不可为空"),null;const e=this.generateConfig();try{const t=yield(0,p.post)({url:"/core/draw/template",body:e,setting:{domain:m.getExhibitionDomain()}});return(null==t?void 0:t.picUrl)?t:(c.log.error("[core-share] <generateShareImage> 新服务未获取到图片"),null)}catch(e){c.log.error("[core-share]  <generateShareImage> 绘制分享卡片失败:",JSON.stringify(e))}return null},new Promise(((a,n)=>{var i=e=>{try{o(r.next(e))}catch(e){n(e)}},l=e=>{try{o(r.throw(e))}catch(e){n(e)}},o=e=>e.done?a(e.value):Promise.resolve(e.value).then(i,l);o((r=r.apply(e,t)).next())}));var e,t,r}};