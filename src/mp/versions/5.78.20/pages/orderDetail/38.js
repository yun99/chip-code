var t=Object.create,e=Object.defineProperty,s=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,l=t=>e(t,"__esModule",{value:!0});((t,s)=>{for(var o in l(t),s)e(t,o,{get:s[o],enumerable:!0})})(exports,{default:()=>r});var c,n=(c=require("./3m.js"),((t,i,l)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let c of o(i))a.call(t,c)||"default"===c||e(t,c,{get:()=>i[c],enumerable:!(l=s(i,c))||l.enumerable});return t})(l(e(null!=c?t(i(c)):{},"default",c&&c.__esModule&&"default"in c?{get:()=>c.default,enumerable:!0}:{value:c,enumerable:!0})),c)),r=class{constructor(t){this.coreModule=t,this.canvasUtils=new n.default(t)}drawRadiusRect(t,e,s,o,i){const a=i/2;this.coreModule.ctx.beginPath(),this.coreModule.ctx.moveTo(this.canvasUtils.toPx(t+a),this.canvasUtils.toPx(e)),this.coreModule.ctx.lineTo(this.canvasUtils.toPx(t+s-a),this.canvasUtils.toPx(e)),this.coreModule.ctx.arc(this.canvasUtils.toPx(t+s-a),this.canvasUtils.toPx(e+a),this.canvasUtils.toPx(a),2*Math.PI*.74,2*Math.PI*1),this.coreModule.ctx.lineTo(this.canvasUtils.toPx(t+s),this.canvasUtils.toPx(e+o-a)),this.coreModule.ctx.arc(this.canvasUtils.toPx(t+s-a),this.canvasUtils.toPx(e+o-a),this.canvasUtils.toPx(a),0,2*Math.PI*(1/4)),this.coreModule.ctx.lineTo(this.canvasUtils.toPx(t+a),this.canvasUtils.toPx(e+o)),this.coreModule.ctx.arc(this.canvasUtils.toPx(t+a),this.canvasUtils.toPx(e+o-a),this.canvasUtils.toPx(a),2*Math.PI*(1/4),2*Math.PI*.5),this.coreModule.ctx.lineTo(this.canvasUtils.toPx(t),this.canvasUtils.toPx(e+a)),this.coreModule.ctx.arc(this.canvasUtils.toPx(t+a),this.canvasUtils.toPx(e+a),this.canvasUtils.toPx(a),2*Math.PI*.5,2*Math.PI*(3/4))}getTextWidth(t){let e=[];"[object Object]"===Object.prototype.toString.call(t)?e.push(t):e=t;let s=0;return e.forEach((({fontFamily:t="PingFangSC-Regular",fontSize:e=0,fontWeight:o="normal",fontStyle:i="normal",text:a="",marginLeft:l=0,marginRight:c=0})=>{this.coreModule.ctx.font=`${i} ${o} ${this.canvasUtils.toPx(e,!0)}px ${t}`,s+=this.coreModule.ctx.measureText(a).width+this.canvasUtils.toPx(l)+this.canvasUtils.toPx(c)})),this.canvasUtils.toRpx(s)}drawSingleText({x:t,y:e,fontSize:s,color:o,baseLine:i,textAlign:a="left",text:l,opacity:c=1,textDecoration:n="none",width:r,lineNum:h=1,lineHeight:x=0,fontWeight:u="normal",fontStyle:d="normal",fontFamily:v="sans-serif"}){this.coreModule.ctx.save(),this.coreModule.ctx.beginPath(),this.coreModule.ctx.font=`${d} ${u} ${this.canvasUtils.toPx(s,!0)}px ${v}`,this.coreModule.ctx.globalAlpha=c,this.coreModule.ctx.fillStyle=o,this.coreModule.ctx.textBaseline=i,this.coreModule.ctx.textAlign=a;let P=this.canvasUtils.toRpx(this.coreModule.ctx.measureText(l).width);const M=[];if(P>r){let t="",e=1;for(let s=0;s<=l.length-1;s++)t+=l[s],this.canvasUtils.toRpx(this.coreModule.ctx.measureText(t).width)>=r?(e===h&&s!==l.length-1&&(t=`${t.substring(0,t.length-1)}...`),e<=h&&M.push(t),t="",e++):e<=h&&s===l.length-1&&M.push(t);P=r}else M.push(l);if(M.forEach(((o,i)=>{this.coreModule.ctx.fillText(o,this.canvasUtils.toPx(t),this.canvasUtils.toPx(e+(x||s)*i))})),this.coreModule.ctx.restore(),"none"!==n){let l=e,c=t;if("line-through"===n){l=e;const t=5;switch(i){case"top":l+=s/2+t;break;case"middle":break;case"bottom":l-=s/2+t;break;default:l-=s/2-t}if("center"===a)c-=P/2}this.coreModule.ctx.save(),this.coreModule.ctx.moveTo(this.canvasUtils.toPx(c),this.canvasUtils.toPx(l)),this.coreModule.ctx.lineTo(this.canvasUtils.toPx(c)+this.canvasUtils.toPx(P),this.canvasUtils.toPx(l)),this.coreModule.ctx.strokeStyle=o,this.coreModule.ctx.stroke(),this.coreModule.ctx.restore()}return P}};