var e=Object.create,t=Object.defineProperty,a=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,o=o=>{return((e,s,o)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let n of r(s))l.call(e,n)||"default"===n||t(e,n,{get:()=>s[n],enumerable:!(o=a(s,n))||o.enumerable});return e})((n=t(null!=o?e(s(o)):{},"default",o&&o.__esModule&&"default"in o?{get:()=>o.default,enumerable:!0}:{value:o,enumerable:!0}),t(n,"__esModule",{value:!0})),o);var n},n=o(require("../../ob.js")),i=o(require("./p9.js")),c=getApp();Component(new class{constructor(){this.methods={getGroupHeaderPhone(e){return t=this,a=arguments,r=function*({page:e,orderId:t,lxData:a={},lxParams:r=null,fromPage:s=""}){try{let l;e.loading(!0);const o=c.$poiId;l="userCenter"===s?yield i.getGroupHeaderPhoneForUserCenter({poiId:o}):yield i.getGroupHeaderPhone({orderId:t}),this.setData({orderId:t,desc:l.desc,phoneNumber:l.phoneNumber,lxData:a,lxParams:r}),2===l.numberType?this.show():this.makePhoneCall()}catch(t){e.toast({message:"抱歉，获取手机号失败，请您点击重试"})}finally{e.loading(!1)}},new Promise(((e,s)=>{var l=e=>{try{n(r.next(e))}catch(e){s(e)}},o=e=>{try{n(r.throw(e))}catch(e){s(e)}},n=t=>t.done?e(t.value):Promise.resolve(t.value).then(l,o);n((r=r.apply(t,a)).next())}));var t,a,r},show(){0!==Object.keys(this.data.lxData).length&&c.$lxLog.mv(this.data.lxData.privacyAlertMV,this.data.lxParams),this.setData({show:!0,fromCallHeaderAlert:!0}),this.triggerEvent("showPop",!0)},close(){0!==Object.keys(this.data.lxData).length&&c.$lxLog.mc(this.data.lxData.privacyAlertCancel,this.data.lxParams),this.setData({show:!1}),this.triggerEvent("showPop",!1)},makePhoneCall(){const{lxParams:e,lxData:t,fromCallHeaderAlert:a,phoneNumber:r}=this.data;if(this.setData({show:!1}),this.triggerEvent("showPop",!1),0!==Object.keys(t).length){const{privacyAlertOK:s}=t;a&&c.$lxLog.mc(s,e),wx.makePhoneCall({phoneNumber:r,success:()=>{this.close.bind(this)},fail:e=>{n.log.warn("<拨打团长号失败 组件>",e)}})}else wx.makePhoneCall({phoneNumber:r,success:()=>{this.close.bind(this)},fail:e=>{n.log.warn("<拨打团长号失败 组件>",e)}})}},this.data={show:!1,orderId:"",desc:"",phoneNumber:"",lxData:{privacyAlertMV:"",privacyAlertOK:"",privacyAlertCancel:""},fromCallHeaderAlert:!1,lxParams:null}}});