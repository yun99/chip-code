var e=Object.create,a=Object.defineProperty,t=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,r=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,l=l=>{return((e,r,l)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let n of o(r))s.call(e,n)||"default"===n||a(e,n,{get:()=>r[n],enumerable:!(l=t(r,n))||l.enumerable});return e})((n=a(null!=l?e(r(l)):{},"default",l&&l.__esModule&&"default"in l?{get:()=>l.default,enumerable:!0}:{value:l,enumerable:!0}),a(n,"__esModule",{value:!0})),l);var n},n=l(require("../../ob.js")),p=l(require("./f0.js")),i=getApp();Component(new class{constructor(){var e,a;this.methods={handleMaskClick(){i.page(-1).onShareAppMessage=this._onShareAppMessage,this.setData({popupVisible:!1}),this.reportPendantMv(),this.triggerEvent("close")},handleGoPopupShareLink(){var e,a;i.$lxLog.mc(null==(e=this.data.mvParams)?void 0:e.mc,this.data.lxParams);const t=null==(a=this.data.data)?void 0:a.popLink;t&&i.$router.goto(t)},handleGoPendantShareLink(){var e,a;i.$lxLog.mc(null==(e=this.data.mvParams)?void 0:e.bubbleMc,this.data.lxParams);const t=null==(a=this.data.data)?void 0:a.popLink;t&&i.$router.goto(t)},reportPendantMv(){const{popupVisible:e,showPendant:a,mvParams:t,data:{bubblePic:o},lxParams:r}=this.data;!e&&a&&o&&i.$lxLog.mv(null==t?void 0:t.bubbleMv,r)},resetAppMessage(){const e=i.page(-1);e.onShareAppMessage&&(this._onShareAppMessage=e.onShareAppMessage);const{data:{popLink:a,extraData:t},mvParams:o,lxParams:r}=this.data,{path:s}=i.$lxLog.genLxSharePath(this.route,`pages/index/index?protocol=${encodeURIComponent(a)}`);i.$lxLog.mv(o.mv,r),e.onShareAppMessage=()=>{var a,o;return p.default.checkAppInstall(),this.handleGoPopupShareLink(),{title:null==(a=null==t?void 0:t.dataMap)?void 0:a.title,imageUrl:null==(o=null==t?void 0:t.dataMap)?void 0:o.thumbnail,path:s,success:()=>{n.log.info("分享路径：",s)},fail:a=>{"shareAppMessage:fail cancel"!==a.errMsg&&(e.toast("分享失败"),n.log.error("分享返现失败",a))}}}}},this.properties={data:{type:Object,observer(e){var a,t;const o={},r=null==(t=null==(a=null==e?void 0:e.extraData)?void 0:a.dataMap)?void 0:t.rewardAmount;r&&(o.rewardAmount=r/100,(null==e?void 0:e.popPic)&&(o.pendantRewardAmount=Math.floor(r/10)/10)),(null==e?void 0:e.bubblePic)&&setTimeout((()=>this.reportPendantMv()),0),this.setData(o)}},showPop:{type:Boolean,observer(e){this.setData({popupVisible:e}),e&&this.resetAppMessage()}},showPendant:{type:Boolean,value:!0},lxParams:Object,mvParams:Object},this.data={popupVisible:0,rewardAmount:0,isLackSharePosterKeyData:!0,sharePosterConfig:{},pendantRewardAmount:0,isIpx:null==(a=null==(e=null==i?void 0:i.getModule("systemInfo"))?void 0:e.getSystemInfo())?void 0:a.isIpx}}});