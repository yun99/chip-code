var e={disablePathCompression:"true",NVM_INC:"/Users/lyp/.nvm/versions/node/v10.3.0/include/node",TERM_PROGRAM:"vscode",NODE:"/usr/local/bin/node",TERM:"xterm-256color",SHELL:"/bin/bash",TERM_PROGRAM_VERSION:"1.64.2",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",NVM_DIR:"/Users/lyp/.nvm",USER:"lyp",COMMAND_MODE:"unix2003",LANG:"zh_CN.UTF-8",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",SHLVL:"3",HOME:"/Users/lyp",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",LOGNAME:"lyp",VSCODE_GIT_IPC_HANDLE:"/var/folders/zz/_5b22kgs51n67q80z472bxq40000gp/T/vscode-git-70f07ade1c.sock",NVM_BIN:"/Users/lyp/.nvm/versions/node/v10.3.0/bin",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/MacOS/Electron",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",COLORTERM:"truecolor",MPE_CLI_VERSION:"0.3.7",MPE_COMMAND:"build",NODE_ENV:"production",MPE_ROOT_DIR:"/Users/lyp/Documents/me/meituan/git/youxuan/mall-dyapp",CASTER_DEBUG_PORT:"80",CASTER_DEBUG_DIR:"__dynamic_debug",CASTER_DEBUG_PROJECT:"youxuan",WEAPP_ENV:"",CASTER_DEBUG_ENV:"production",PERFORMANCE_DEBUG:"production",CASTER_DEBUG_HOST:"https://portal-portm.sankuai.com",DEBUG_DYNAMIC:"https://portal-portm.sankuai.com",MPE_BUILD_CHANNEL:"tt"};function t(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var n=require("./xw.js"),i=t(require("./xy.js")),r=t(require("./xr.js")),o=require("./xe.js");String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function a(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var u,c=function(){return(c=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function l(e,t,n,i){return new(n=n||Promise)((function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((i=i.apply(e,t||[])).next())}))}function d(e,t){var n,i,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=0<(r=o.trys).length&&r[r.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}var h,f=(a(p,u=Error),p);function p(e,t){var n=u.call(this,"Wechat API "+e+" get error result: [msg]"+t)||this;return n.api=e,n.msg=t,Object.setPrototypeOf(n,b.prototype),n}var _,g=(a(v,h=Error),v);function v(e,t,n){return void 0===n&&(n=""),(n=h.call(this,"Request "+t+" failed: "+e+". "+n)||this).errType="WxRequestError",Object.setPrototypeOf(n,v.prototype),n}var m,b=(a(w,_=Error),w);function w(e,t,n){void 0===n&&(n=!1);var i=this,r=(t=(r=t||{code:0,message:"自定义未知错误，可能是数据返回格式错误"}).code,r.message);return(i=_.call(this,"API "+e+" return error result: "+r)||this).errType="MtAPIError",i.code=t,i.tip=r,i.show=n,Object.setPrototypeOf(i,w.prototype),i}var y=(a(k,m=Error),k);function k(e,t,n){void 0===n&&(n=!0);var i=m.call(this,e+(null!=t?"["+t+"]":""))||this;return i.show=n,i.code=t,i.tip=e,i.errType="SDKError",Object.setPrototypeOf(i,k.prototype),i}var S=require("./xu.js")||{},I=S;({loginRoute:"",bindRoute:"",smsVerifyRoute:"",changeBindPhoneRoute:"",_route:"",set sdkRoute(e){this._route=e,this.loginRoute=e+"/subpages/entry/index",this.bindRoute=e+"/subpages/bind/index",this.smsVerifyRoute=e+"/subpages/sms-verify/modules/index/index",this.changeBindPhoneRoute=e+"/subpages/change-bind-phone/index"},get sdkRoute(){return this._route}}).sdkRoute=I.route;var E,x=I.showModal;function C(e,t){return void 0===t&&(t={}),new Promise((function(i,r){var o=t.data,s=void 0===(c=t.header)?{}:c,a=t.method,u=void 0===a?"get":a,c=t.query;(a=t.type)&&"form"===a.toLocaleLowerCase()&&(s["content-type"]="application/x-www-form-urlencoded"),c&&(e+=(~e.indexOf("?")?"&":"?")+n.stringify(c)),u=u.toLocaleUpperCase(),(j.request||tt.request)({url:e,data:o,header:s,method:u,success:function(t){t&&t.data?i(t.data):r(new g("No data in response.",e,JSON.stringify(t)))},fail:function(t){r(new g("May be due to network.",e,JSON.stringify(t)))}})}))}function T(e){return l(z,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return null!=e?[3,2]:[4,(void 0===n&&(n={}),new Promise((function(e,t){tt.login({success:function(n){n?e(n.code):t(new f("tt.login","null login result"))},fail:function(e){t(new f("tt.login","fail to request login"))}})})))];case 1:return[2,E=t.sent()];case 2:return[2,E=e]}var n}))}))}function O(e){return new Promise((function(t,n){tt.getStorage({key:e,success:function(e){e&&e.data?t(e.data):n(new f("getStorage","null result"))},fail:function(e){n(new f("getStorage","fail to request getStorage"))}})}))}function R(e,t){return new Promise((function(n,i){tt.setStorage({key:e,data:t,success:function(e){n(e)},fail:function(e){i(new f("setStorage","fail to request setStorage"))}})}))}function A(e){return new Promise((function(t,n){tt.removeStorage({key:e,success:function(e){t(e)},fail:function(e){n(new f("removeStorage","fail to request removeStorage"))}})}))}function P(e,t){var n=void 0===t?{}:t,i=void 0===(t=n.title)?"提示":t,r=void 0!==(t=n.showCancel)&&t,o=void 0===(n=n.cancelText)?"取消":n;return new Promise((function(t,n){tt.showModal({title:i,confirmColor:x.confirmColor,content:e||"",showCancel:r,confirmText:x.confirmText,cancelText:o,success:function(e){t(!r||e&&e.confirm)},fail:function(){n()}})}))}function N(e,t,n){void 0===t&&(t="success"),void 0===n&&(n=2e3),e&&e.length&&tt.showToast({title:e,mask:!0,icon:t,duration:n})}function L(e,t,n,i){return void 0===t&&(t=e.replace(/^\/|\?.*$/g,"")),void 0===n&&(n=!1),void 0===i&&(i=!1),l(z,void 0,void 0,(function(){return d(this,(function(t){return V?[2]:[2,new Promise((function(t,r){V=!0,setTimeout((function(){V=!1}),200),i?tt.reLaunch({url:e,success:t,fail:r}):n?tt.redirectTo({url:e,success:t,fail:r}):tt.navigateTo({url:e,success:t,fail:r})}))]}))}))}function D(){return new Promise((function(e,t){tt.getSetting({success:function(t){e(t)},fail:function(t){e({})}})}))}function B(){return q.env}(yt={}).WX_MOBILE="wxMobileLogin",yt.WXV2="wxLogin",yt.MOBILE="mobileLogin",yt.LOGIN="login",yt.CHANGE_BIND="changeBind";var U,M,z=void 0,V=!1,K=require("./xu.js").request||function(e,t){return void 0===t&&(t={}),new Promise((function(i,r){var o=t.data,s=void 0===(c=t.header)?{}:c,a=t.method,u=void 0===a?"get":a,c=t.query;(a=t.type)&&"form"===a.toLocaleLowerCase()&&(s["content-type"]="application/x-www-form-urlencoded"),c&&(e+=(~e.indexOf("?")?"&":"?")+n.stringify(c)),u=u.toLocaleUpperCase(),wx.request({url:e,data:o,header:s,method:u,success:function(t){t&&t.data?i(t.data):r(new g("No data in response.",e,JSON.stringify(t)))},fail:function(t){r(new g("May be due to network.",e,JSON.stringify(t)))}})}))},H="1.0.4",q={env:S?S.env:""},G=B,Y="https://portal-portm.meituan.com/weapp/loginsdk/api/",F=S,j=F.appConfig,W={loginRoute:"",bindRoute:"",smsVerifyRoute:"",changeBindPhoneRoute:"",_route:"",set sdkRoute(e){this._route=e,this.loginRoute=e+"/subpages/entry/index",this.bindRoute=e+"/subpages/bind/index",this.smsVerifyRoute=e+"/subpages/sms-verify/modules/index/index",this.changeBindPhoneRoute=e+"/subpages/change-bind-phone/index"},get sdkRoute(){return this._route}};W.sdkRoute=F.route;var X,J=F.entryPageOption,Q=F.changeBindPageOption,Z=F.bindPageOption,$=F.authrizePageOption,ee=F.tips;function te(e){return e&&"string"==typeof e&&40<=e.length&&e.length<=80}function ne(e,t){return void 0===t&&(t=1),l(void 0,void 0,void 0,(function(){var n;return d(this,(function(i){switch(i.label){case 0:return te(e)?[2,X=e]:te(X)?[2,X]:[4,j.persistKey?O(j.persistKey).then((function(e){return e&&e.uuid})).catch((function(e){return""})):""];case 1:return te(n=i.sent())?[2,X=n]:[4,re(t)];case 2:return n=i.sent(),[2,X=n]}}))}))}(kt=exports.API_TYPE||(exports.API_TYPE={})).WX_MOBILE="wxMobileLogin",kt.WXV2="wxLogin",kt.MOBILE="mobileLogin",kt.LOGIN="login",kt.CHANGE_BIND="changeBind",(M=M||{}).create="createSession";var ie=F.protocolConfig,re=function(e){return l(void 0,void 0,void 0,(function(){var t,n;return d(this,(function(i){switch(i.label){case 0:return t=tt.getSystemInfoSync().platform,[4,C("portm"===S.api?Y+"uuid":"https://i.meituan.com/uuid/register?f="+t).catch((function(e){}))];case 1:return!te(n=i.sent())&&0<e?[4,re(e-1)]:[3,3];case 2:return[2,i.sent()];case 3:return[2,n||""]}}))}))};(pt=exports.SessionState||(exports.SessionState={})).AUTH="auth",pt.BINDING="bind",pt.DESTORY="destory",pt.ABORT="abort",(yt=exports.SessionEvent||(exports.SessionEvent={})).CLICK="click",yt.SMSCLICK="smsclick",yt.LOGINCLICK="loginclick",yt.BINDPAGEONSHOW="bindpageonshow",yt.NAVIBACK="naviback",yt.ENTRYPAGEONSHOW="entrypageonshow",yt.CHANGEPHONEPAGEONSHOW="changebindpageonshow",yt.ALLOWPHONE="allowphone",yt.REFUSEPHONE="refusephone",yt.CHANGEPHONEGETNEWCODE="changephonegetnewcode",yt.CHANGEPHONECHNAGEBTN="changephonechnagebtn",yt.AUTHPAGEONSHOW="authpageonshow",yt.ALLOWUSERINFO="allowuserinfo",yt.REFUSEUSERINFO="refuseuserinfo",yt.USERINFOCLICK="userinfoclick",yt.ENTRYPAGEREFUSEUSERINFO="entrypagerefuseuserinfo",yt.ENTRYPAGEALLOWUSERINFO="entrypageallowuserinfo",yt.onSecondMobileYesClick="onSecondMobileYesClick",yt.onSecondMobileNoClick="onSecondMobileNoClick";var oe,se=(Object.defineProperty(ae.prototype,"expired",{get:function(){return!!this.expire&&this.expire<(new Date).getTime()},enumerable:!0,configurable:!0}),ae.prototype._state=function(e,t){this.state=e,t&&(this.data=t),this._emit(e,t)},ae.prototype._emit=function(e,t){var n=this;(e=this._callbacks[e])&&e.forEach((function(e){e.call(n,t),n.destroyAfterCb&&de()}))},ae.prototype.on=function(e,t){(this._callbacks[e]=this._callbacks[e]||[]).push(t)},ae.prototype.clean=function(){this._callbacks={},this.resolve=null},ae.prototype.abort=function(){this._state(exports.SessionState.ABORT)},ae);function ae(e,t,n){void 0===t&&(t=exports.SessionState.AUTH),this._callbacks={},this.type=e,this.state=t,n&&(this.expire=(new Date).getTime()+n)}var ue,ce={},le={get session(){return oe},set session(e){oe&&oe._state(exports.SessionState.DESTORY),oe=e}},de=function(){le.session=null};function he(){}function fe(e){return l(ye,void 0,void 0,(function(){var t,n;return d(this,(function(i){switch(i.label){case 0:if(tt.hideToast(),!e)return[2];t=0,n=ke,i.label=1;case 1:return t<n.length?[4,(0,n[t])(e)]:[3,4];case 2:if(i.sent())return[2];i.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function pe(e){return l(ye,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return e&&e.token&&e.userId?((le.authInfo=e).creatTime=Date.now()-6e4,j.persistKey?[4,R(j.persistKey,e).catch((function(e){}))]:[3,2]):[3,4];case 1:t.sent(),t.label=2;case 2:return[4,Se()];case 3:return t.sent(),[2,e];case 4:throw new y(ee.illegalAuthInfo)}}))}))}function _e(e){return void 0===e&&(e=!1),l(ye,void 0,void 0,(function(){var t,n;return d(this,(function(i){switch(i.label){case 0:return(n=le.authInfo)&&n.token?[2,n]:j.persistKey?[4,O(j.persistKey).catch((function(){return null}))]:[3,4];case 1:return(t=i.sent())&&t.token?e&&(!(n=t.creatTime)||15552e6<Date.now()-n)?[4,A(j.persistKey).catch(he)]:[3,3]:[3,4];case 2:return i.sent(),[2,null];case 3:return[2,t];case 4:return[2,null]}}))}))}function ge(){return l(ye,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return le.authInfo=null,j.persistKey?[4,A(j.persistKey).catch(he)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}function ve(e,t){return l(ye,void 0,void 0,(function(){var n;return d(this,(function(i){switch(i.label){case 0:return[4,pe(Object.assign(e,t))];case 1:return n=i.sent(),N(ee.loginSuccess),[2,n]}}))}))}function me(e,t){return l(ye,void 0,void 0,(function(){return d(this,(function(n){switch(n.label){case 0:return U?[4,U(e,t)]:[3,2];case 1:if(!n.sent())throw new y("loginCheck failed",3,!1);n.label=2;case 2:return[2]}}))}))}function be(e,t){var n=le.session;return n&&!n.expired?(n.clean(),n):le.session=new se(e,exports.SessionState.AUTH,t)}function we(e){return e&&e.protocolList&&e.protocolList.map((function(e){e.encodedUrl||(e.encodedUrl=encodeURIComponent(e.url))})),e}var ye=void 0,ke=[function(e){if("MtAPIError"===e.errType)return!e.show&&403!==e.code||P(e.tip)},function(e){if("WxRequestError"===e.errType)return P(ee.networkTimeout)},function(e){if(e instanceof f)return!0},function(e){if("SDKError"===e.errType)return!e.show||P(""+e.tip)}],Se=function(e){return l(ye,void 0,void 0,(function(){var t,n,i;return d(this,(function(r){switch(r.label){case 0:return(i=le.session)?(t=i.resolve,n=i.redirectUrl,i=i.waitBack,le.session=null,i?[4,Ie(n)]:[3,2]):[3,4];case 1:return r.sent(),[3,3];case 2:Ie(n),r.label=3;case 3:"function"==typeof t&&t(e||_e()),r.label=4;case 4:return[2]}}))}))},Ie=function(e){return l(ye,void 0,void 0,(function(){var t,n,i,r,o;return d(this,(function(s){return t=getCurrentPages(),n=W.sdkRoute.replace(/^\//,""),i=t&&t[0]&&t[0].route?"route":"__route__",r=t.findIndex((function(e){return e[i].startsWith(n)})),e?0<r&&r===t.length-1?[2,L(e,"",!0)]:[2,L(e)]:-1!==r&&0<(o=0<r?t.length-r:t.length-r-1)?[2,new Promise((function(e){tt.navigateBack({delta:o});var n=t.length-o,i=function(){setTimeout((function(){(getCurrentPages().length===n?e:i)()}),100)};i()}))]:[2]}))}))};I={getLoginCode:T,getUUID:ne,getStorage:O,setStorage:R,showTip:P,showToast:N,request:K,stringify:n.stringify,navigate:L};(kt=ue={}).navigateTo="navigateTo",kt.redirectTo="redirectTo",kt.reLaunch="reLaunch";var Ee,xe=function(e){return l(void 0,void 0,void 0,(function(){var t,n,i,r,o,s,a;return d(this,(function(u){switch(u.label){case 0:return n=!0,i=void 0===(e=e||{}).phoneBind||e.phoneBind,r=e.navType===ue.redirectTo,o=e.navType===ue.reLaunch,a=r||o?1:0,e instanceof se?t=e:(t=e.session||xe[M.create](),!1===e.bind&&(n=!1)),t.data=t.data||{},t.redirectUrl=e.redirectUrl,t.waitBack=e.waitBack,t.data.wxUserInfoData=e.wxUserInfoData,s=W.loginRoute,a=t.type===exports.API_TYPE.LOGIN?s+"?bind="+n+"&phoneBind="+i+"&redirectUrl="+(t.redirectUrl||"")+"&willRedirectToBindPage="+a:s+"?type="+t.type+"&bind="+n+"&phoneBind="+i+"&redirectUrl="+(t.redirectUrl||"")+"&willRedirectToBindPage="+a,e.code&&t.data.wxUserInfoData&&(a=a+"&code="+e.code),e.poiid&&(a=a+"&poiid="+e.poiid),[4,L(a=a+"&specialRiskCode="+(e.specialRiskCode||0),s.substr(1),r,o)];case 1:return u.sent(),[4,new Promise((function(e,n){t.resolve=e}))];case 2:return[2,u.sent()]}}))}))};function Ce(e,t,i){return l(void 0,void 0,void 0,(function(){var r,o,s,a;return d(this,(function(u){switch(u.label){case 0:return r=e||Pe[M.create](),o=""+W.bindRoute,s=t===ue.redirectTo,a=t===ue.reLaunch,i&&(o=o+"?"+n.stringify(i)),[4,L(o,W.bindRoute.substr(1),s,a)];case 1:return u.sent(),[2,r]}}))}))}xe[M.create]=function(){return be(exports.API_TYPE.LOGIN)};var Te,Oe,Re,Ae,Pe=function(e){return void 0===e&&(e={}),l(void 0,void 0,void 0,(function(){var t,n;return d(this,(function(i){switch(i.label){case 0:return t={specialRiskCode:e.specialRiskCode||0},void 0!==e.poiid&&(t.poiid=e.poiid),[4,Ce(e.session,e.navType,t)];case 1:return n=i.sent(),[4,new Promise((function(e,t){n.resolve=e}))];case 2:return[2,i.sent()]}}))}))};function Ne(e){var t=require("./xt.js")[B()||"prod"];return("portm"===S.api?Object.keys(t).reduce((function(e,t){return e[t]=Y+(B()?B()+"/":"")+t,e}),{}):t)[e]}function Le(e,t,n,i){var r=n.risk_platform,o=n.risk_partner,s=n.risk_app,a=n.version_name,u=void 0===(l=n.token_id)?"":l,c=void 0===(d=n.current_platform)?"":d,l=(h=tt.getSystemInfoSync()).platform,d=h.version,h=void 0===(h=h.model)?"":h;return i.device_type=h,i.device_os=c,"ios"===(l=l.toLowerCase())&&(l="iphone"),l={uuid:t,risk_platform:r,risk_partner:o,sdkVersion:H,version:d,risk_app:s,version_name:a,utm_medium:l,token_id:u,sdkType:"ttmp"},void 0!==n.risk_smsPrefixId&&(l.risk_smsPrefixId=n.risk_smsPrefixId),void 0!==n.risk_smsTemplateId&&(l.risk_smsTemplateId=n.risk_smsTemplateId),u=j.minigram_type,n=j.minigram_appid,Object.assign(i,{minigram_type:u,minigram_appid:n}),C(e,{method:"POST",query:l,type:"form",data:i})}function De(){return Te||new Promise((function(e,t){i.g(e)})).then((function(e){return Te=e})).catch((function(e){throw new y("获取指纹信息失败："+(e&&e.message))}))}function Be(e){return e&&e.iv?e:null}function Ue(e){return void 0===e&&(e={}),l(void 0,void 0,void 0,(function(){var t,n,i,r=this;return d(this,(function(o){switch(o.label){case 0:return[4,D()];case 1:return void 0!==(t=o.sent().authSetting)&&void 0!==t["scope.userInfo"]?[3,3]:[4,new Promise((function(e,n){tt.authorize({scope:"scope.userInfo",success:function(){return l(r,void 0,void 0,(function(){return d(this,(function(n){switch(n.label){case 0:return[4,D()];case 1:return t=n.sent().authSetting,e(),[2]}}))}))},fail:function(){P("拒绝后无法使用美团服务，您可前往设置页开启，点击右上角“...”->“设置”->“用户信息”"),n()}})}))];case 2:o.sent(),o.label=3;case 3:return tt.hideToast(),t&&t["scope.userInfo"]?(!0===(n=e.withCredentials)&&T(E),[4,(s={withCredentials:n},new Promise((function(e,t){tt.getUserInfo(c({},s,{success:function(t){e(t)},fail:function(t){e({})}}))})))]):[3,5];case 4:return i=o.sent(),!n||Be(i)?[2,i]:[3,7];case 5:return[4,P("您的用户信息（头像、昵称）获取权限已关，为了更好的为您服务，请前往开启")];case 6:return o.sent(),tt.openSetting(),[2,null];case 7:return[2]}var s}))}))}Pe[M.create]=function(){return be(exports.API_TYPE.MOBILE)},(pt=Ee={}).loginApplyUrl="mobileloginapply",pt.mobileLoginUrl="mobilelogin",pt.verifyloginUrl="verifylogin",pt.ticketloginUrl="ticketlogin",pt.wxMobileLoginApiV2="wxmobilelogin",pt.wxLoginApiV2="wxlogin",pt.wxSlientLoginApiV2="wxslientlogin",pt.wxMobileBindApplyApiV2="wxbindapply",pt.wxMobileBindLoginApiV2="wxbind",pt.wxTicketLoginApiV2="wxticketlogin",pt.updateWxUserApi="updatewxuserinfo",pt.getWxUserApi="getwxuserinfo",pt.smartCheckApi="smartcheck",pt.sendNewcodeApi="sendnewcode",pt.verifyNewApi="verifynew",pt.logoutUrl="logout",pt.islogoutUrl="islogout",pt.thirdMobileLoginApi="thirdMobileLoginApi",pt.thirdMobileSilentLoginApi="thirdMobileSilentLoginApi",pt.thirdMobileLoginApplyApi="thirdMobileLoginApplyApi",pt.thirdMobileInputLoginApi="thirdMobileInputLoginApi",pt.thirdMobileInputLogoutApi="thirdMobileInputLogoutApi",pt.thirdMobileInputIsLogoutApi="thirdMobileInputIsLogoutApi";var Me,ze,Ve=Ee.verifyloginUrl;function Ke(e,t,n){void 0===t&&(t=Oe.AUTH),this._callbacks={},this.type=e,this.state=t,n&&(this.expire=(new Date).getTime()+n)}function He(e){return l(Ye,void 0,void 0,(function(){var t,n,i,r,o;return d(this,(function(s){switch(s.label){case 0:return t=e.uuid,n=e.userTicket,[4,Promise.all([ne(t),De()])];case 1:return o=s.sent(),i=o[0],r=o[1],o={userTicket:n,fingerprint:r},[4,Le(Ne(Xe),i,e,o)];case 2:if(r=s.sent(),o=r.error)throw new b(Ne(Xe),o);return[2,{loginInfo:r,uuid:i}]}}))}))}(yt=Oe={}).AUTH="auth",yt.BINDING="bind",yt.DESTORY="destory",yt.ABORT="abort",(kt=Re={}).CLICK="click",kt.SMSCLICK="smsclick",kt.LOGINCLICK="loginclick",kt.BINDPAGEONSHOW="bindpageonshow",kt.NAVIBACK="naviback",kt.CLOSECARD="closecard",kt.ENTRYPAGEONSHOW="entrypageonshow",kt.CHANGEPHONEPAGEONSHOW="changebindpageonshow",kt.ALLOWPHONE="allowphone",kt.REFUSEPHONE="refusephone",kt.CHANGEPHONEGETNEWCODE="changephonegetnewcode",kt.CHANGEPHONECHNAGEBTN="changephonechnagebtn",kt.AUTHPAGEONSHOW="authpageonshow",kt.ALLOWUSERINFO="allowuserinfo",kt.REFUSEUSERINFO="refuseuserinfo",kt.USERINFOCLICK="userinfoclick",kt.ENTRYPAGEREFUSEUSERINFO="entrypagerefuseuserinfo",kt.ENTRYPAGEALLOWUSERINFO="entrypageallowuserinfo",Object.defineProperty(Ke.prototype,"expired",{get:function(){return!!this.expire&&this.expire<(new Date).getTime()},enumerable:!0,configurable:!0}),Ke.prototype._state=function(e,t){this.state=e,t&&(this.data=t),this._emit(e,t)},Ke.prototype._emit=function(e,t){var n=this;(e=this._callbacks[e])&&e.forEach((function(e){e.call(n,t),n.destroyAfterCb&&Ge()}))},Ke.prototype.on=function(e,t){(this._callbacks[e]=this._callbacks[e]||[]).push(t)},Ke.prototype.clean=function(){this._callbacks={},this.resolve=null,this.sF=void 0},Ke.prototype.abort=function(){this._state(Oe.ABORT)};var qe={get session(){return Ae},set session(e){Ae&&Ae._state(Oe.DESTORY),Ae=e}},Ge=function(){qe.session=null},Ye=void 0,Fe=Ee.thirdMobileLoginApi,je=Ee.thirdMobileSilentLoginApi,We=Ee.verifyloginUrl,Xe=Ee.ticketloginUrl,Je={pageOnshow:function(){qe.session&&qe.session._emit(Re.AUTHPAGEONSHOW,qe.session)},allowAuth:function(){qe.session&&qe.session._emit(Re.ALLOWUSERINFO,qe.session)},refuseAuth:function(){qe.session&&qe.session._emit(Re.REFUSEUSERINFO,qe.session)},userInfoClick:function(){qe.session&&qe.session._emit(Re.USERINFOCLICK,qe.session)}},Qe=Ee.thirdMobileLoginApplyApi,Ze=Ee.thirdMobileInputLoginApi,$e=(ze=Me={exports:{}},function(){function e(e){for(var t=e.length;0<=--t;)e[t]=0}function t(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}function n(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function i(e){return e<256?j[e]:j[256+(e>>>7)]}function r(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function o(e,t,n){e.bi_valid>V-n?(e.bi_buf|=t<<e.bi_valid&65535,r(e,e.bi_buf),e.bi_buf=t>>V-e.bi_valid,e.bi_valid+=n-V):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function s(e,t,n){o(e,n[2*t],n[2*t+1])}function a(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function u(e,t,n){for(var i,r=new Array(z+1),o=0,s=1;s<=z;s++)r[s]=o=o+n[s-1]<<1;for(i=0;i<=t;i++){var u=e[2*i+1];0!==u&&(e[2*i]=a(r[u]++,u))}}function c(e){for(var t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function l(e){8<e.bi_valid?r(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function d(e,t,n,i){var r=2*t,o=2*n;return e[r]<e[o]||e[r]===e[o]&&i[t]<=i[n]}function h(e,t,n){for(var i=e.heap[n],r=n<<1;r<=e.heap_len&&(r<e.heap_len&&d(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!d(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i}function f(e,t,n){var r,a,u,c,l=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],a=e.pending_buf[e.l_buf+l],l++,0==r?s(e,a,t):(s(e,(u=W[a])+256+1,t),0!==(c=K[u])&&o(e,a-=X[u],c),s(e,u=i(--r),n),0!==(c=H[u])&&o(e,r-=J[u],c)),l<e.last_lit;);s(e,256,t)}function p(e,t){var n,i,r,o=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,c=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<c;n++)0!==o[2*n]?(e.heap[++e.heap_len]=l=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(r=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[r]=0,e.opt_len--,a&&(e.static_len-=s[2*r+1]);for(t.max_code=l,n=e.heap_len>>1;1<=n;n--)h(e,o,n);for(r=c;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],h(e,o,1),i=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=i,o[2*r]=o[2*n]+o[2*i],e.depth[r]=(e.depth[n]>=e.depth[i]?e.depth[n]:e.depth[i])+1,o[2*n+1]=o[2*i+1]=r,e.heap[1]=r++,h(e,o,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e){for(var n,i,r,o,s,a=t.dyn_tree,u=t.max_code,c=t.stat_desc.static_tree,l=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,f=t.stat_desc.max_length,p=0,_=0;_<=z;_++)e.bl_count[_]=0;for(a[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)f<(_=a[2*a[2*(i=e.heap[n])+1]+1]+1)&&(_=f,p++),a[2*i+1]=_,u<i||(e.bl_count[_]++,o=0,h<=i&&(o=d[i-h]),s=a[2*i],e.opt_len+=s*(_+o),l&&(e.static_len+=s*(c[2*i+1]+o)));if(0!==p){do{for(_=f-1;0===e.bl_count[_];)_--}while(e.bl_count[_]--,e.bl_count[_+1]+=2,e.bl_count[f]--,0<(p-=2));for(_=f;0!==_;_--)for(i=e.bl_count[_];0!==i;)(r=e.heap[--n])>u||(a[2*r+1]!==_&&(e.opt_len+=(_-a[2*r+1])*a[2*r],a[2*r+1]=_),i--)}}(e),u(o,l,e.bl_count)}function _(e,t,n){var i,r,o=-1,s=t[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),t[2*(n+1)+1]=65535,i=0;i<=n;i++)r=s,s=t[2*(i+1)+1],++a<u&&r===s||(a<c?e.bl_tree[2*r]+=a:0!==r?(r!==o&&e.bl_tree[2*r]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=r,c=(a=0)===s?(u=138,3):r===s?(u=6,3):(u=7,4))}function g(e,t,n){var i,r,a=-1,u=t[1],c=0,l=7,d=4;for(0===u&&(l=138,d=3),i=0;i<=n;i++)if(r=u,u=t[2*(i+1)+1],!(++c<l&&r===u)){if(c<d)for(;s(e,r,e.bl_tree),0!=--c;);else 0!==r?(r!==a&&(s(e,r,e.bl_tree),c--),s(e,16,e.bl_tree),o(e,c-3,2)):c<=10?(s(e,17,e.bl_tree),o(e,c-3,3)):(s(e,18,e.bl_tree),o(e,c-11,7));a=r,d=(c=0)===u?(l=138,3):r===u?(l=6,3):(l=7,4)}}function v(e,t,n,i){o(e,0+(i?1:0),3),i=t,t=n,n=!0,l(e),n&&(r(e,t),r(e,~t)),M.arraySet(e.pending_buf,e.window,i,t,e.pending),e.pending+=t}function m(e,t){return e.msg=oe[t],t}function b(e){return(e<<1)-(4<e?9:0)}function w(e){for(var t=e.length;0<=--t;)e[t]=0}function y(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(M.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function k(e,t){te._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,y(e.strm)}function S(e,t){e.pending_buf[e.pending++]=t}function I(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function E(e,t){var n,i,r=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match,u=e.strstart>e.w_size-me?e.strstart-(e.w_size-me):0,c=e.window,l=e.w_mask,d=e.prev,h=e.strstart+ve,f=c[o+s-1],p=c[o+s];e.prev_length>=e.good_match&&(r>>=2),a>e.lookahead&&(a=e.lookahead);do{if(c[(n=t)+s]===p&&c[n+s-1]===f&&c[n]===c[o]&&c[++n]===c[o+1]){for(o+=2,n++;c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<h;);if(i=ve-(h-o),o=h-ve,s<i){if(e.match_start=t,a<=(s=i))break;f=c[o+s-1],p=c[o+s]}}}while((t=d[t&l])>u&&0!=--r);return s<=e.lookahead?s:e.lookahead}function x(e){var t,n,i,r,o,s,a,u,c,l=e.w_size;do{if(c=e.window_size-e.lookahead-e.strstart,e.strstart>=l+(l-me)){for(M.arraySet(e.window,e.window,l,l,0),e.match_start-=l,e.strstart-=l,e.block_start-=l,t=n=e.hash_size;i=e.head[--t],e.head[t]=l<=i?i-l:0,--n;);for(t=n=l;i=e.prev[--t],e.prev[t]=l<=i?i-l:0,--n;);c+=l}if(0===e.strm.avail_in)break;if(o=e.strm,s=e.window,a=e.strstart+e.lookahead,u=c,c=void 0,u<(c=o.avail_in)&&(c=u),n=0===c?0:(o.avail_in-=c,M.arraySet(s,o.input,o.next_in,c,a),1===o.state.wrap?o.adler=ne(o.adler,s,c,a):2===o.state.wrap&&(o.adler=re(o.adler,s,c,a)),o.next_in+=c,o.total_in+=c,c),e.lookahead+=n,e.lookahead+e.insert>=ge)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=(e.ins_h<<e.hash_shift^e.window[r+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[r+ge-1])&e.hash_mask,e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<ge)););}while(e.lookahead<me&&0!==e.strm.avail_in)}function C(e,t){for(var n,i;;){if(e.lookahead<me){if(x(e),e.lookahead<me&&t===se)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=ge&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ge-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-me&&(e.match_length=E(e,n)),e.match_length>=ge)if(i=te._tr_tally(e,e.strstart-e.match_start,e.match_length-ge),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=ge){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ge-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=te._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(k(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<ge-1?e.strstart:ge-1,4===t?(k(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(k(e,!1),0===e.strm.avail_out)?1:2}function T(e,t){for(var n,i,r;;){if(e.lookahead<me){if(x(e),e.lookahead<me&&t===se)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=ge&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ge-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=ge-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-me&&(e.match_length=E(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===ge&&4096<e.strstart-e.match_start)&&(e.match_length=ge-1)),e.prev_length>=ge&&e.match_length<=e.prev_length){for(r=e.strstart+e.lookahead-ge,i=te._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-ge),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ge-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=ge-1,e.strstart++,i&&(k(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((i=te._tr_tally(e,0,e.window[e.strstart-1]))&&k(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=te._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<ge-1?e.strstart:ge-1,4===t?(k(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(k(e,!1),0===e.strm.avail_out)?1:2}function O(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}function R(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=le,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new M.Buf16(2*pe),this.dyn_dtree=new M.Buf16(2*(2*he+1)),this.bl_tree=new M.Buf16(2*(2*fe+1)),w(this.dyn_ltree),w(this.dyn_dtree),w(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new M.Buf16(_e+1),this.heap=new M.Buf16(2*de+1),w(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new M.Buf16(2*de+1),w(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function A(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=ce,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?be:we,e.adler=2===t.wrap?0:1,t.last_flush=se,te._tr_init(t),ae):m(e,ue)}function P(e){var t=A(e);return t===ae&&((e=e.state).window_size=2*e.w_size,w(e.head),e.max_lazy_match=ye[e.level].max_lazy,e.good_match=ye[e.level].good_length,e.nice_match=ye[e.level].nice_length,e.max_chain_length=ye[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=ge-1,e.match_available=0,e.ins_h=0),t}function N(e,t,n,i,r,o){if(!e)return ue;var s=1;if(-1===t&&(t=6),i<0?(s=0,i=-i):15<i&&(s=2,i-=16),r<1||9<r||n!==le||i<8||15<i||t<0||9<t||o<0||4<o)return m(e,ue);8===i&&(i=9);var a=new R;return(e.state=a).strm=e,a.wrap=s,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+ge-1)/ge),a.window=new M.Buf8(2*a.w_size),a.head=new M.Buf16(a.hash_size),a.prev=new M.Buf16(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new M.Buf8(a.pending_buf_size),a.d_buf=+a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=o,a.method=n,P(e)}function L(e,t){var n,i,r,o;if(!e||!e.state||5<t||t<0)return e?m(e,ue):ue;if(n=e.state,!e.output||!e.input&&0!==e.avail_in||666===n.status&&4!==t)return m(e,0===e.avail_out?-5:ue);if(n.strm=e,s=n.last_flush,n.last_flush=t,n.status===be&&(2===n.wrap?(e.adler=0,S(n,31),S(n,139),S(n,8),n.gzhead?(S(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),S(n,255&n.gzhead.time),S(n,n.gzhead.time>>8&255),S(n,n.gzhead.time>>16&255),S(n,n.gzhead.time>>24&255),S(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),S(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(S(n,255&n.gzhead.extra.length),S(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=re(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(S(n,0),S(n,0),S(n,0),S(n,0),S(n,0),S(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),S(n,3),n.status=we)):(o=le+(n.w_bits-8<<4)<<8,o|=(2<=n.strategy||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(o|=32),o+=31-o%31,n.status=we,I(n,o),0!==n.strstart&&(I(n,e.adler>>>16),I(n,65535&e.adler)),e.adler=1)),69===n.status)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>i&&(e.adler=re(e.adler,n.pending_buf,n.pending-i,i)),y(e),i=n.pending,n.pending!==n.pending_buf_size));)S(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(e.adler=re(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=re(e.adler,n.pending_buf,n.pending-i,i)),y(e),i=n.pending,n.pending===n.pending_buf_size)){r=1;break}}while(r=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,S(n,r),0!==r);n.gzhead.hcrc&&n.pending>i&&(e.adler=re(e.adler,n.pending_buf,n.pending-i,i)),0===r&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=re(e.adler,n.pending_buf,n.pending-i,i)),y(e),i=n.pending,n.pending===n.pending_buf_size)){r=1;break}}while(r=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,S(n,r),0!==r);n.gzhead.hcrc&&n.pending>i&&(e.adler=re(e.adler,n.pending_buf,n.pending-i,i)),0===r&&(n.status=103)}else n.status=103;if(103===n.status&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&y(e),n.pending+2<=n.pending_buf_size&&(S(n,255&e.adler),S(n,e.adler>>8&255),e.adler=0,n.status=we)):n.status=we),0!==n.pending){if(y(e),0===e.avail_out)return n.last_flush=-1,ae}else if(0===e.avail_in&&b(t)<=b(s)&&4!==t)return m(e,-5);if(666===n.status&&0!==e.avail_in)return m(e,-5);if(0!==e.avail_in||0!==n.lookahead||t!==se&&666!==n.status){var s=2===n.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(x(e),0===e.lookahead)){if(t===se)return 1;break}if(e.match_length=0,n=te._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(k(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(k(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(k(e,!1),0===e.strm.avail_out)?1:2}(n,t):3===n.strategy?function(e,t){for(var n,i,r,o,s=e.window;;){if(e.lookahead<=ve){if(x(e),e.lookahead<=ve&&t===se)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=ge&&0<e.strstart&&(i=s[r=e.strstart-1])===s[++r]&&i===s[++r]&&i===s[++r]){for(o=e.strstart+ve;i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&r<o;);e.match_length=ve-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=ge?(n=te._tr_tally(e,1,e.match_length-ge),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=te._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(k(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(k(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(k(e,!1),0===e.strm.avail_out)?1:2}(n,t):ye[n.level].func(n,t);if(3!==s&&4!==s||(n.status=666),1===s||3===s)return 0===e.avail_out&&(n.last_flush=-1),ae;if(2===s&&(1===t?te._tr_align(n):5!==t&&(te._tr_stored_block(n,0,0,!1),3===t&&(w(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),y(e),0===e.avail_out))return n.last_flush=-1,ae}return 4!==t?ae:n.wrap<=0?1:(2===n.wrap?(S(n,255&e.adler),S(n,e.adler>>8&255),S(n,e.adler>>16&255),S(n,e.adler>>24&255),S(n,255&e.total_in),S(n,e.total_in>>8&255),S(n,e.total_in>>16&255),S(n,e.total_in>>24&255)):(I(n,e.adler>>>16),I(n,65535&e.adler)),y(e),0<n.wrap&&(n.wrap=-n.wrap),0!==n.pending?ae:1)}function D(e,t){if(t<65537&&(e.subarray&&Ie||!e.subarray&&Se))return String.fromCharCode.apply(null,M.shrinkBuf(e,t));for(var n="",i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n}function B(e){if(!(this instanceof B))return new B(e);this.options=M.assign({level:Ae,method:Ne,chunkSize:16384,windowBits:15,memLevel:8,strategy:Pe,to:""},e||{});var t=this.options;if(t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Te,this.strm.avail_out=0,(e=ke.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy))!==Re)throw new Error(oe[e]);if(t.header&&ke.deflateSetHeader(this.strm,t.header),t.dictionary){if(t="string"==typeof t.dictionary?Ce.string2buf(t.dictionary):"[object ArrayBuffer]"===Oe.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(e=ke.deflateSetDictionary(this.strm,t))!==Re)throw new Error(oe[e]);this._dict_set=!0}}var U,M=(function(e){var t="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;e.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}}return e},e.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var n={arraySet:function(e,t,n,i,r){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+i),r);else for(var o=0;o<i;o++)e[r+o]=t[n+o]},flattenChunks:function(e){for(var t,n,i,r=0,o=0,s=e.length;o<s;o++)r+=e[o].length;for(i=new Uint8Array(r),o=t=0,s=e.length;o<s;o++)n=e[o],i.set(n,t),t+=n.length;return i}},i={arraySet:function(e,t,n,i,r){for(var o=0;o<i;o++)e[r+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,n)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(t)}((U={exports:{}}).exports),U.exports),z=15,V=16,K=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],H=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],q=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Y=new Array(576);e(Y);var F=new Array(60);e(F);var j=new Array(512);e(j);var W=new Array(256);e(W);var X=new Array(29);e(X);var J=new Array(30);e(J);var Q,Z,$,ee=!1,te={_tr_init:function(e){ee||(function(){for(var e,n,i,r=new Array(z+1),o=0,s=0;s<28;s++)for(X[s]=o,e=0;e<1<<K[s];e++)W[o++]=s;for(W[o-1]=s,s=i=0;s<16;s++)for(J[s]=i,e=0;e<1<<H[s];e++)j[i++]=s;for(i>>=7;s<30;s++)for(J[s]=i<<7,e=0;e<1<<H[s]-7;e++)j[256+i++]=s;for(n=0;n<=z;n++)r[n]=0;for(e=0;e<=143;)Y[2*e+1]=8,e++,r[8]++;for(;e<=255;)Y[2*e+1]=9,e++,r[9]++;for(;e<=279;)Y[2*e+1]=7,e++,r[7]++;for(;e<=287;)Y[2*e+1]=8,e++,r[8]++;for(u(Y,287,r),e=0;e<30;e++)F[2*e+1]=5,F[2*e]=a(e,5);Q=new t(Y,K,257,286,z),Z=new t(F,H,0,30,z),$=new t(new Array(0),q,0,19,7)}(),ee=!0),e.l_desc=new n(e.dyn_ltree,Q),e.d_desc=new n(e.dyn_dtree,Z),e.bl_desc=new n(e.bl_tree,$),e.bi_buf=0,e.bi_valid=0,c(e)},_tr_stored_block:v,_tr_flush_block:function(e,t,n,i){var r,s,a=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){for(var t=4093624447,n=0;n<=31;n++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*n])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(n=32;n<256;n++)if(0!==e.dyn_ltree[2*n])return 1;return 0}(e)),p(e,e.l_desc),p(e,e.d_desc),a=function(e){var t;for(_(e,e.dyn_ltree,e.l_desc.max_code),_(e,e.dyn_dtree,e.d_desc.max_code),p(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*G[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),r=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=r&&(r=s)):r=s=n+5,n+4<=r&&-1!==t?v(e,t,n,i):4===e.strategy||s===r?(o(e,2+(i?1:0),3),f(e,Y,F)):(o(e,4+(i?1:0),3),function(e,t,n,i){var r;for(o(e,t-257,5),o(e,n-1,5),o(e,i-4,4),r=0;r<i;r++)o(e,e.bl_tree[2*G[r]+1],3);g(e,e.dyn_ltree,t-1),g(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),f(e,e.dyn_ltree,e.dyn_dtree)),c(e),i&&l(e)},_tr_tally:function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(W[n]+256+1)]++,e.dyn_dtree[2*i(t)]++),e.last_lit===e.lit_bufsize-1},_tr_align:function(e){o(e,2,3),s(e,256,Y),16===e.bi_valid?(r(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},ne=function(e,t,n,i){for(var r=65535&e|0,o=e>>>16&65535|0,s=0;0!==n;){for(n-=s=2e3<n?2e3:n;o=o+(r=r+t[i++]|0)|0,--s;);r%=65521,o%=65521}return r|o<<16|0},ie=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}(),re=function(e,t,n,i){e^=-1;for(var r=i;r<i+n;r++)e=e>>>8^ie[255&(e^t[r])];return-1^e},oe={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},se=0,ae=0,ue=-2,ce=2,le=8,de=286,he=30,fe=19,pe=2*de+1,_e=15,ge=3,ve=258,me=ve+ge+1,be=42,we=113,ye=[new O(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(x(e),0===e.lookahead&&t===se)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+n;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,k(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-me&&(k(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(k(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(k(e,!1),e.strm.avail_out),1)})),new O(4,4,8,4,C),new O(4,5,16,8,C),new O(4,6,32,32,C),new O(4,4,16,16,T),new O(8,16,32,32,T),new O(8,16,128,128,T),new O(8,32,128,256,T),new O(32,128,258,1024,T),new O(32,258,258,4096,T)],ke={deflateInit:function(e,t){return N(e,t,le,15,8,0)},deflateInit2:N,deflateReset:P,deflateResetKeep:A,deflateSetHeader:function(e,t){return e&&e.state&&2===e.state.wrap?(e.state.gzhead=t,ae):ue},deflate:L,deflateEnd:function(e){var t;return e&&e.state?(t=e.state.status)!==be&&69!==t&&73!==t&&91!==t&&103!==t&&t!==we&&666!==t?m(e,ue):(e.state=null,t===we?m(e,-3):ae):ue},deflateSetDictionary:function(e,t){var n,i,r,o,s,a,u,c=t.length;if(!e||!e.state)return ue;if(2===(o=(n=e.state).wrap)||1===o&&n.status!==be||n.lookahead)return ue;for(1===o&&(e.adler=ne(e.adler,t,c,0)),n.wrap=0,c>=n.w_size&&(0===o&&(w(n.head),n.strstart=0,n.block_start=0,n.insert=0),u=new M.Buf8(n.w_size),M.arraySet(u,t,c-n.w_size,n.w_size,0),t=u,c=n.w_size),s=e.avail_in,a=e.next_in,u=e.input,e.avail_in=c,e.next_in=0,e.input=t,x(n);n.lookahead>=ge;){for(i=n.strstart,r=n.lookahead-(ge-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+ge-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++,--r;);n.strstart=i,n.lookahead=ge-1,x(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=ge-1,n.match_available=0,e.next_in=a,e.input=u,e.avail_in=s,n.wrap=o,ae},deflateInfo:"pako deflate (from Nodeca project)"},Se=!0,Ie=!0;try{String.fromCharCode.apply(null,[0])}catch(e){Se=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Ie=!1}for(var Ee=new M.Buf8(256),xe=0;xe<256;xe++)Ee[xe]=252<=xe?6:248<=xe?5:240<=xe?4:224<=xe?3:192<=xe?2:1;Ee[254]=Ee[254]=1;var Ce={string2buf:function(e){for(var t,n,i,r,o=e.length,s=0,a=0;a<o;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(i=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new M.Buf8(s),a=r=0;r<s;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(i=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),n<128?t[r++]=n:(n<2048?t[r++]=192|n>>>6:(n<65536?t[r++]=224|n>>>12:(t[r++]=240|n>>>18,t[r++]=128|n>>>12&63),t[r++]=128|n>>>6&63),t[r++]=128|63&n);return t},buf2binstring:function(e){return D(e,e.length)},binstring2buf:function(e){for(var t=new M.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},buf2string:function(e,t){for(var n,i,r=t||e.length,o=new Array(2*r),s=0,a=0;a<r;)if((n=e[a++])<128)o[s++]=n;else if(4<(i=Ee[n]))o[s++]=65533,a+=i-1;else{for(n&=2===i?31:3===i?15:7;1<i&&a<r;)n=n<<6|63&e[a++],i--;1<i?o[s++]=65533:n<65536?o[s++]=n:(n-=65536,o[s++]=55296|n>>10&1023,o[s++]=56320|1023&n)}return D(o,s)},utf8border:function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return!(n<0)&&0!==n&&n+Ee[e[n]]>t?n:t}},Te=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Oe=Object.prototype.toString,Re=0,Ae=-1,Pe=0,Ne=8;function Le(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)}function De(e){return e=function(e,t){if((t=new B(t)).push(e,!0),t.err)throw t.msg||oe[t.err];return t.result}(JSON.stringify(e),{to:"string"}),Be(e)}B.prototype.push=function(e,t){var n,i,r=this.strm,o=this.options.chunkSize;if(this.ended)return!1;i=t===~~t?t:!0===t?4:0,"string"==typeof e?r.input=Ce.string2buf(e):"[object ArrayBuffer]"===Oe.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new M.Buf8(o),r.next_out=0,r.avail_out=o),1!==(n=ke.deflate(r,i))&&n!==Re)return this.onEnd(n),!(this.ended=!0)}while(0!==r.avail_out&&(0!==r.avail_in||4!==i&&2!==i)||("string"===this.options.to?this.onData(Ce.buf2binstring(M.shrinkBuf(r.output,r.next_out))):this.onData(M.shrinkBuf(r.output,r.next_out))),(0<r.avail_in||0===r.avail_out)&&1!==n);return 4===i?(n=ke.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Re):2!==i||(this.onEnd(Re),!(r.avail_out=0))},B.prototype.onData=function(e){this.chunks.push(e)},B.prototype.onEnd=function(e){e===Re&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=M.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Be="undefined"!=typeof top&&top.btoa||function(e){for(var t,n=[],i=0,r=e.length,o=0;o<r;++o)3===(i+=1)&&(i=0),t=e.charCodeAt(o),0===i?n.push(Le(63&(e.charCodeAt(o-1)<<2|t>>6)),Le(63&t)):1===i?n.push(Le(t>>2&63)):n.push(Le(63&(e.charCodeAt(o-1)<<4|t>>4))),o===r-1&&0<i&&n.push(Le(t<<(3-i<<1)&63));if(i)for(;i<3;)i+=1,n.push("=");return n.join("")},Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me={f:0,r:0,w:0,h:0},Ve={rId:0,ts:0,cts:0,brVD:[],brR:[],bI:[],mT:[],kT:[],aT:[],tT:[],sign:""};try{L.getSystemInfo({success:function(e){var t=e.pixelRatio,n=e.windowWidth;e=e.windowHeight;Me.r=t,Me.w=n,Me.h=e}})}catch(e){}ze.exports={i:function(e){Me.f=e},m:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.touches,n=e.changedTouches,i=n&&n[0]||t&&t[0];i&&(e=void 0===(e=i.clientX)?0:e,i=void 0===(i=i.clientY)?0:i,n=t&&t.length||n&&n.length||0,Ve.mT=[e+","+i].concat(Ve.mT.slice(0,29)),Ve.tT=[e+","+i+","+n].concat(Ve.tT.slice(0,29)))},t:function(){var e=(t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).detail)&&t.x||0,t=t&&t.y||0;Ve.aT=[e+","+t+",view"].concat(Ve.aT.slice(0,29))},r:function(e){var t,n,i;Ve.rId=Me.f,0===Ve.ts&&(Ve.ts=Date.now()),0!==Ve.brVD.length&&0!==Ve.brVD[0]&&0!==Ve.brVD[1]||(i=Me.r,t=Me.w,n=Me.h,i=[Math.round(i*t),Math.round(i*n)],Ve.brVD=[t,n],Ve.brR=[i,i,24,24]);var r="",o="";try{var s=getCurrentPages(),a=s.length;r=s[a-1].__route__;1<a&&(o=s[a-2].__route__)}catch(e){}var u,c,l="";try{u=e,c=[],Object.keys(u).sort().forEach((function(e){var t=u[e];"_token"!==e&&(t&&"object"===(void 0===t?"undefined":Ue(t))&&(t=JSON.stringify(t)),c.push(e+"="+t))})),l=De(c.join("&"))}catch(e){}Ve.sign=l,Ve.cts=Date.now(),Ve.bI=[r,o];try{return De(Ve)}catch(e){return""}}}}(),Me.exports),et=($e.i,$e.m,$e.t,$e.r,getApp(),nt.getYodaServer=function(){return this.yodaServer||(this.yodaServer=new nt),this.yodaServer},nt.prototype.getServer=function(){return getApp().globalData||(getApp().globalData={yodaUrl:"https://verify-test.meituan.com"}),getApp().globalData.yodaUrl||"https://verify-test.meituan.com"},nt);function nt(){this.yodaServer=null}function it(){return"dev"===G()?ct:"test"===G()?"http://verify.inf.test.meituan.com":"staging"===G()?"https://verify-test.meituan.com":lt}function rt(){return it()+"/v2/ext_api/page_data"}function ot(){var e=it();getApp().globalData||(getApp().globalData={}),getApp().globalData.yodaUrl=e}var st={slider:"2.0.4",sms:"2.0.4",image:"2.0.4",voice:"2.0.4",lbs:"2.0.4",names:"2.0.4",birthday:"2.0.4",buying:"2.0.4"},at={RISK_DEFAULT_ERROR:"121000",RISK_NO_SUCH_ACTION:"121001",RISK_COMMON_PARAMS_LOST:"121002",RISK_NO_SUCH_SCENE:"121003",RISK_USER_NOT_LOAD:"121004",RISK_PARAMS_INVALID_FORMART:"121005",RISK_NO_SUCH_METHOD:"121006",RISK_NOT_VERIFY_BY_ORDER:"121007",RISK_GET_VERIFYINFO_LIMIT:"121009",RISK_VERIFY_ERROR_TIMES_LIMIT:"121010",RISK_USER_NOT_BINDED:"121011",RISK_PARAMS_LOST:"121018",RISK_USER_RESETPWD_CODE_EXPIRE:"121036",RISK_MOBILE_NOT_EXIST:"121040",RISK_GET_VERIFY_INFO_ERROR:"121042",RISK_AUTHORIZE_CODE_FAIL:"121043",RISK_AUTHORIZE_CODE_EXPIRE:"121044",RISK_RISK_LEVEL_NOT_VALID:"121045",RISK_GET_VERIFY_CODE_CNT_REACH_LIMIT:"121046",RISK_LEVEL_DENY:"121051",RISK_VERIFY_REQUEST_TIME_OUT:"121052",RISK_FAKE_REQUEST:"121053",RISK_VOICE_SEND_TIMES_LIMIT_ONE_DAY:"121055",RISK_BOOM_PROOF_DENY:"121056",RISK_VERIFY_INFO_LOSE_EFFICACY:"121057",RISK_SLIDER_VERIFY_FAILED:"121058",RISK_GET_VERIFYINFO_TIMES_LIMIT_ONE_DAY:"121061",RISK_VERIFY_PAYPWD_USE_PAY_ERROR_LIMIT:"121064",RISK_VERIFY_ERROR_TIMES_LIMIT_ONE_DAY:"121065",RISK_KLINGON_OUT_OF_SERVICE:"121066",RISK_GET_VERIFY_INFO_ERROR_RETRY:"121067",RISK_NO_AUTH:"121999"},ut=new function(){var e=this;this.getPageData=function(e,t){var n={requestCode:e,feVersion:st[t]||"0.1.0",source:13};return n._token=encodeURIComponent($e.r(n)),new Promise((function(e,t){tt.request({method:"POST",url:et.getYodaServer().getServer()+"/v2/ext_api/page_data",data:n,header:{"content-type":"application/x-www-form-urlencoded"},headers:{"content-type":"application/x-www-form-urlencoded"},success:function(n){var i=(o=n.data).status,r=o.data,o=o.error;200===n.statusCode||200===n.status?e({status:i,data:r,error:o}):t(n)},fail:function(e){t(e)}})})).catch((function(){tt.showToast({title:"getPageData失败",content:"getPageData失败"})}))},this.sendInfo=function(e){var t=void 0===e?{}:e,n=t.request_code,i=t.type,r=void 0===(e=t.action)?"":e,o=void 0===(t=t.options)?null:t,s={request_code:n};if(o&&"object"==typeof o)for(var a in o)o.hasOwnProperty(a)&&(s[a]=o[a]);return s._token=encodeURIComponent($e.r(s)),new Promise((function(e,t){tt.request({url:et.getYodaServer().getServer()+"/v2/ext_api/"+r+"/info?id="+i,method:"POST",data:s,header:{"content-type":"application/x-www-form-urlencoded"},headers:{"content-type":"application/x-www-form-urlencoded"},success:function(n){var i=(o=n.data).status,r=o.data,o=o.error;200===n.statusCode||200===n.status?e({status:i,data:r,error:o}):t("")},fail:function(e){t(e)}})}))},this.verify=function(e){var t=void 0===e?{}:e,n=t.request_code,i=t.type,r=void 0===(e=t.action)?"":e,o=void 0===(t=t.options)?null:t,s={request_code:n};if(o&&"object"==typeof o)for(var a in o)o.hasOwnProperty(a)&&(s[a]=o[a]);return s._token=encodeURIComponent($e.r(s)),new Promise((function(e,t){tt.request({url:et.getYodaServer().getServer()+"/v2/ext_api/"+r+"/verify?id="+i,method:"POST",data:s,header:{"content-type":"application/x-www-form-urlencoded"},headers:{"content-type":"application/x-www-form-urlencoded"},success:function(n){var i=(o=n.data).status,r=o.data,o=o.error;200===n.statusCode||200===n.status?e({status:i,data:r,error:o}):t()},fail:function(e){t(e)}})}))},this.nextVerify=function(e,t){var n=e.category;if(e.type=t,"GROUP"===n&&(t||0===t))return tt.setStorage({key:"yodaPageData",data:e}),tt.redirectTo({url:"./../../modules/index/index"}),!0},this.catchCallback=function(e,t,n,i,r,o){if("face"===o)return"string"==typeof r.callBackFail&&(o="status=0&code="+t+"&msg="+n,o=0<r.callBackFail.indexOf("?")?"&"+o:"?"+o,r.navigate({options:i,url:r.callBackFail+o})),void("function"===r.callBackFail&&r.callBackFail({status:0,code:t,msg:n}));tt.showToast({title:e,content:e,icon:"none",type:"none",mask:!0,duration:2e3,complete:function(){var e;"string"==typeof r.callBackFail&&(e="status=0&code="+t+"&msg="+n,e=0<r.callBackFail.indexOf("?")?"&"+e:"?"+e,setTimeout((function(){r.navigate({options:i,url:r.callBackFail+e})}),1e3)),"function"===r.callBackFail&&setTimeout((function(){r.callBackFail({status:0,code:t,msg:n})}),1e3)}})},this.errorCallback=function(t,n,i,r,o){var s=t.code||0,a=t.message||"网络错误";switch(Object.keys(at).forEach((function(e){Number(at[e])===s&&(s="jump")})),s){case 121008:tt.showToast({title:"验证错误",content:"验证错误",complete:i.bind(r)});break;case 121068:tt.showToast({title:"输入错误",content:"输入错误",complete:i.bind(r)});break;case 121038:tt.showToast({title:"操作过于频繁",content:"操作过于频繁"});break;case 121044:e.catchCallback("授权码过期",s,a,n,r);break;case 121048:r.Image.showImage({requestCode:t.request_code});break;case 121060:r.Slider.showSlider({requestCode:t.request_code});break;case 121047:tt.showToast({title:"请重新发送验证",content:"请重新发送验证",complete:i.bind(r)});break;case 121079:tt.showToast({title:"验证失败",content:"请重新操作",complete:i.bind(r)});break;case 121084:case 121101:tt.showToast({title:"人脸比对未通过",content:"请重新操作",complete:i.bind(r)});break;case 121100:tt.showToast({title:"人脸多于一个,请核实后重试",content:"请重新操作",complete:i.bind(r)});break;case 121102:tt.showToast({title:"人脸对比失败,请重试",content:"请重新操作",complete:i.bind(r)});break;case"jump":e.catchCallback(a,s,a,n,r,o);break;default:e.catchCallback("发生异常了",s,a,n,r,o)}},this.successCallback=function(e,t,n,i){"function"==typeof i.callBackSuccess&&i.callBackSuccess({status:1,requestCode:e,responseCode:t}),"string"==typeof i.callBackSuccess&&(t="status=1&requestCode="+e+"&responseCode="+t,t=0<i.callBackSuccess.indexOf("?")?"&"+t:"?"+t,i.navigate({options:n,url:i.callBackSuccess+t}))},this.changeVerify=function(e){e.type=-1,"GROUP"===e.category&&(tt.setStorage({key:"yodaPageData",data:e}),tt.redirectTo({url:"./../../modules/index/index"}))}},ct="http://verify.inf.dev.meituan.com",lt="https://verify.meituan.com",dt=function(e,t,n,i,r,o,s){return void 0===n&&(n=!0),void 0===i&&(i=null),l(void 0,void 0,void 0,(function(){var a,u,h,f,p,_,g,v,m,w,y,k,S,I,E,x,C,O,R=this;return d(this,(function(A){switch(A.label){case 0:ot(),a=r||be(exports.API_TYPE.WX_MOBILE),A.label=1;case 1:return A.trys.push([1,14,,16]),u=j.appName,h=j.risk_partner,f=j.risk_platform,p=j.uuid,_=j.risk_app,g=j.version_name,m=j.token_id,v=void 0===m?"":m,m=void 0===(m=j.current_platform)?"":m,"string"==typeof t?[3,3]:[4,T()];case 2:t=A.sent(),A.label=3;case 3:return m={phoneNumberData:e,uuid:p,appName:u,risk_partner:h,risk_platform:f,risk_app:_,version_name:g,loginCode:t,bind:n,wxUserInfoData:Be(i),userTicket:o,token_id:v,current_platform:m},[4,(z=m,l(Ye,void 0,void 0,(function(){var e,t,n,i,r,o,s,a,u,l,h,f;return d(this,(function(d){switch(d.label){case 0:return i=z.phoneNumberData,e=z.loginCode,t=z.uuid,s=z.bind,a=z.wxUserInfoData,u=z.userTicket,n=i.iv,i=i.encryptedData,[4,Promise.all([ne(t),T(e),De()])];case 1:return f=d.sent(),h=f[0],o=f[1],r=f[2],f={code:o,fingerprint:r,phone_iv:n,phone_encryptedData:i,bind:!!s},u&&Object.assign(f,{userTicket:u,loginAfterSecondaryMobile:!0}),r={code:o,uuid:h},s?(l=Be(a))?[3,3]:[4,Ue(c({},Je,{withCredentials:!0}))]:[3,4];case 2:l=d.sent(),d.label=3;case 3:if(o=(u=l||{}).userInfo,s=u.rawData,a=u.signature,l=u.iv,u=u.encryptedData,Object.assign(f,{userinfo_rawData:s,userinfo_signature:a,userinfo_encryptedData:u,userinfo_iv:l}),!(r.userInfo=o))return[2,null];d.label=4;case 4:return[4,Le(Ne(Fe),h,z,f)];case 5:if(h=d.sent(),(f=h.error)&&101157!==f.code&&101159!==f.code)throw new b(Ne(Fe),f,!0);return r.loginInfo=h,[2,r]}}))})))];case 4:if(!(w=A.sent()))return[3,13];if(y=w.loginInfo,k=w.uuid,S=w.code,!y.error||!y.error.code)return[3,12];switch(tt.hideToast(),y.error.code){case 101157:return[3,5];case 101159:return[3,8]}return[3,10];case 5:return L=(N={requestCode:(L=y.error.data.param.match(new RegExp("[?&]requestCode=([^&]*)(&?)","i")))&&L[1],success:"success",fail:"fail",style:"",options:{navigate:"back",yodaRoute:"../yoda/modules/index/index"}}).requestCode,D=N.success,B=N.fail,U=N.style,M=N.options,ut.getPageData(L).then((function(e){var t=e.status;e=e.data;0===t&&tt.showToast({title:"系统异常",content:"系统异常",complete:function(){"function"==typeof B&&B(),"string"==typeof B&&tt.navigateTo({url:B})}});t=e.riskLevel.split("|");var n=[];t.forEach((function(e){n.push(e.split(","))})),e.type=n[e.defaultIndex||0][0],e.riskGroup=n,e.success="function"==typeof D?"FUNCTION":D,e.fail="function"==typeof B?"FUNCTION":B,getApp().globalData.success=D,getApp().globalData.fail=B,e.style=U||"",e.options=M,tt.setStorage({key:"yodaPageData",data:e}),n[0][0],M&&M.embed||(M&&M.yodaRoute?tt.navigateTo({url:M.yodaRoute||"./../../modules/index/index"}):tt.navigateTo({url:"./../../modules/index/index"}))})),[4,new Promise((function(e){a.on(exports.SessionEvent.ENTRYPAGEONSHOW,(function(){e(getApp().yodaVerifyData||{})}))}))];case 6:return E=A.sent(),I=E.requestCode,E=E.responseCode,I&&E?[4,(P={requestCode:I,responseCode:E,userTicket:y.error.data.userTicket},l(Ye,void 0,void 0,(function(){var e,t,n,i,r,o,s;return d(this,(function(a){switch(a.label){case 0:return e=P.uuid,t=P.requestCode,n=P.responseCode,i=P.userTicket,[4,Promise.all([ne(e),De()])];case 1:return s=a.sent(),r=s[0],o=s[1],s={requestCode:t,responseCode:n,userTicket:i,setCookie:!0,fingerprint:o},[4,Le(Ne(We),r,P,s)];case 2:if(o=a.sent(),s=o.error)throw new b(Ne(We),s);return[2,{loginInfo:o,uuid:r}]}}))})))]:[2];case 7:return x=A.sent(),y=x.loginInfo,k=x.uuid,y.user.userId=y.user.id,y.data=y.user,[2,ht(y,k,S,n,w)];case 8:return I=y.error.data,E=I.avatar,x=I.username,C=I.userTicket,s.setData({secondMobile:{pageShow:!0,imgSrc:E||"//p1.meituan.net/travelcube/72dab47c7b68917cb05849bf242fc9f117580.png",userName:x}}),[4,new Promise((function(o){a.on(exports.SessionEvent.onSecondMobileYesClick,(function(){return l(R,void 0,void 0,(function(){var a;return d(this,(function(u){switch(u.label){case 0:return s.setData({secondMobile:{pageShow:!1}}),a=o,[4,dt(e,t,n,i,r,C,s)];case 1:return a.apply(void 0,[u.sent()]),[2]}}))}))})),a.on(exports.SessionEvent.onSecondMobileNoClick,(function(){return l(R,void 0,void 0,(function(){var e;return d(this,(function(t){switch(t.label){case 0:return s.setData({secondMobile:{pageShow:!1}}),[4,He({uuid:p,userTicket:C})];case 1:return e=t.sent(),y=e.loginInfo,k=e.uuid,y.user.userId=y.user.id,y.data=y.user,o(ht(y,k,S,n,w)),[2]}}))}))}))}))];case 9:return[2,A.sent()];case 10:return[3,11];case 11:return[3,13];case 12:return[2,ht(y,k,S,n,w)];case 13:return[3,16];case 14:return O=A.sent(),[4,T()];case 15:return A.sent(),[2,fe(O)];case 16:return[2]}var P,N,L,D,B,U,M,z}))}))},ht=function(e,t,n,i,r){return l(void 0,void 0,void 0,(function(){var o;return d(this,(function(s){switch(s.label){case 0:return(o=c({type:exports.API_TYPE.WX_MOBILE},e.data,{uuid:t,code:n})).openIdCipher||(o.openIdCipher="test"),i&&(o.wxUserInfo=r.userInfo),[4,pe(o)];case 1:return[2,s.sent()]}}))}))},ft=function(e){return void 0===e&&(e={}),l(void 0,void 0,void 0,(function(){var t,i,r,o,s,a,u,h,f,p,_,g,v,m,w,y,k,S;return d(this,(function(I){switch(I.label){case 0:s=o=!(r=i=!0),(t=e.session||ft[M.create]()).redirectUrl=e.redirectUrl,t.waitBack=e.waitBack,!1===e.bind&&(i=!1),!1===e.slient&&(r=!1),i&&(o=e.navType===ue.redirectTo,s=e.navType===ue.reLaunch),r||N("登录中...","loading",60010),I.label=1;case 1:return I.trys.push([1,11,,12]),a=j.appName,u=j.risk_app,h=j.risk_partner,f=j.risk_platform,g=j.uuid,_=j.version_name,m=j.token_id,v=void 0===m?"":m,p=j.current_platform,m=void 0===p?"":p,p=t.data,r?[4,(E={appName:a,risk_partner:h,risk_platform:f,risk_app:u,version_name:_,uuid:g,token_id:v,current_platform:m},l(Ye,void 0,void 0,(function(){var e,t,n,i,r;return d(this,(function(o){switch(o.label){case 0:return e=E.uuid,[4,T()];case 1:return t=o.sent(),[4,Promise.all([ne(e),De()])];case 2:return r=o.sent(),n=r[0],i=r[1],r={code:t,fingerprint:i},[4,Le(Ne(je),n,E,r)];case 3:if(i=o.sent(),(r=i.error)&&101155!==r.code&&101157!==r.code&&101050!==r.code)throw new b(Ne(je),r);return[2,{loginInfo:i,code:t,uuid:n}]}}))})))]:[3,3];case 2:return p=I.sent(),[3,3];case 3:if(w=p.loginInfo,_=p.code,g=p.uuid,v=p.userInfo,k=w.openId,S=w.openIdCipher,m=void 0===S?"test":S,y=w.unionId,S=w.data,w=w.error,y={code:_,uuid:g,openId:k,openIdCipher:m,unionId:y,wxUserInfo:null},r||(y.wxUserInfo=v),!w)return[3,8];switch(w.code){case 101050:case 101155:return[3,4]}return[3,7];case 4:return t._state(exports.SessionState.BINDING,p),i?(k={openId:k},void 0!==e.poiid&&(k.poiid=e.poiid),void 0!==e.fromEntry&&(k.fromEntry=e.fromEntry),k.specialRiskCode=e.specialRiskCode||0,[4,L(W.bindRoute+"?"+n.stringify(k),W.bindRoute.substr(1),o,s)]):[2,c({},y,{error:w})];case 5:return I.sent(),wx.hideToast(),[4,new Promise((function(e,n){t.resolve=e}))];case 6:return[2,I.sent()];case 7:return[2,c({},y,{error:w})];case 8:return wx.hideToast(),S?[4,pe(c({},y,S))]:[3,10];case 9:return[2,I.sent()];case 10:return[3,12];case 11:return[2,fe(S=I.sent())];case 12:return[2]}var E}))}))};ft[M.create]=function(){var e=be(exports.API_TYPE.WXV2);return e.type===exports.API_TYPE.WXV2?e:le.session=new se(exports.API_TYPE.WXV2,exports.SessionState.AUTH,6e5)};var pt=(_t.prototype.onLoad=function(e){return l(this,void 0,void 0,(function(){var t,n;return d(this,(function(i){switch(i.label){case 0:return e.type&&this.setData({type:e.type}),this.hasAuthUserInfo=!1,this.specialRiskCode=e.specialRiskCode||0,this.poiid=e.poiid||"",t=this,(n=e.code)?[3,2]:[4,T()];case 1:n=i.sent(),i.label=2;case 2:return t.loginCode=n,this.bind="false"!==e.bind,this.phoneBind="false"!==e.phoneBind,this.redirectUrl=e.redirectUrl,this.willRedirectToBindPage="1"===e.willRedirectToBindPage,[4,D()];case 3:return(n=i.sent().authSetting)&&n["scope.userInfo"]&&(this.hasAuthUserInfo=!0),[2]}}))}))},_t.prototype.onReady=function(){wx.setNavigationBarTitle({title:this.data.title})},_t.prototype.onShow=function(){le.session&&le.session._emit(exports.SessionEvent.ENTRYPAGEONSHOW,le.session),this.goToBindPage=!1},_t.prototype.onUnload=function(){le.session&&!this.goToBindPage&&le.session._emit(exports.SessionEvent.NAVIBACK,le.session)},_t.prototype.lockClick=function(e,t){var n=this,i=null;i=1===e?(this.wxMobileLock=!0,setTimeout((function(){n.wxMobileLock=!1,clearTimeout(i),i=null}),t||2e3)):(this.mobileLock=!0,setTimeout((function(){n.mobileLock=!1,clearTimeout(i),i=null}),t||2e3))},_t.prototype.getLoginCode=function(){return l(this,void 0,void 0,(function(){var e;return d(this,(function(t){return this.wxMobileLock||((e=le.session)&&e._emit(exports.SessionEvent.CLICK,exports.API_TYPE.WX_MOBILE),this.lockClick(2)),[2]}))}))},_t.prototype.wxMobileLoginClick=function(e){return l(this,void 0,void 0,(function(){var t,n,i;return d(this,(function(r){switch(r.label){case 0:return this.wxMobileLock?[2]:(this.lockClick(2),this.loginCode=E,t=le.session,null==(n=e.detail).iv?(t&&t._emit(exports.SessionEvent.REFUSEPHONE,t),P(ee.refusePhoneNumberAuth),[2]):(t&&t._emit(exports.SessionEvent.ALLOWPHONE,t),[4,me("douyin")]));case 1:return r.sent(),N(ee.logining,"loading",60010),i=null,t&&t.data&&(i=t.data.wxUserInfoData),[4,dt(n,this.loginCode,this.bind,i,t,null,this)];case 2:return r.sent()&&(tt.hideToast(),N(ee.loginSuccess)),[2]}}))}))},_t.prototype.mobileLoginClick=function(){var e,t;this.mobileLock||(this.lockClick(1),e=this.redirectUrl||this.willRedirectToBindPage?ue.redirectTo:ue.navigateTo,t={fromEntry:!0,specialRiskCode:this.specialRiskCode,phoneBind:this.phoneBind},this.poiid&&(t.poiid=this.poiid),this.goToBindPage=!0,Ce(le.session,e,t))},_t.prototype.onSecondMobileYesClick=function(){le.session&&(N(ee.logining,"loading",60010),le.session._emit(exports.SessionEvent.onSecondMobileYesClick))},_t.prototype.onSecondMobileNoClick=function(){P("即将为您注册新的美团账号",{showCancel:!0}).then((function(e){le.session&&e&&(N(ee.logining,"loading",60010),le.session._emit(exports.SessionEvent.onSecondMobileNoClick))}))},_t);function _t(){var e,t,n,i,r,o,s,a;this.data=(e=J.title,t=J.wxLoginText,n=J.mobileLoginText,i=J.imageSrc,r=J.imageMode,o=J.imageStyle,s=J.wxLoginStyle,a=J.mobileLoginStyle,{API_TYPE:exports.API_TYPE,type:exports.API_TYPE.MOBILE,title:e,wxLoginText:t,mobileLoginText:n,wxLoginStyle:s,mobileLoginStyle:a,image:{src:i,mode:r,style:o},secondMobile:{pageShow:!1,imageSrc:""},protocolConfig:we(ie)})}function gt(e){if(/^1[0-9]\d{9}$/.test(e))return e;throw new y(ee.illegalPhoneNumber,1)}var vt=void 0,mt=function(e){return l(vt,void 0,void 0,(function(){var t,n,i,r,s,a,u,h,f,p,_,g,v,m,b,w,y,k,S,I,E,x,C,O,R,A,N,L,D=this;return d(this,(function(B){switch(B.label){case 0:return t=le.uuid,n=j.risk_platform,i=j.risk_partner,r=j.version_name,s=j.risk_app,w=j.token_id,a=void 0===w?"":w,y=j.current_platform,u=void 0===y?"":y,h=e.that,f=e.requestCode,p=e.responseCode,_=e.mobile,g=e.poiid,v=e.specialRiskCode,m=e.loginCode,b=e._session,w=e.userTicket,y=e.phoneBind,[4,(U={uuid:t,risk_platform:n,risk_partner:i,version_name:r,risk_app:s,token_id:a,current_platform:u},M={responseCode:p,requestCode:f,mobile:_,poiid:g,specialRiskCode:v,userTicket:w},z=m,V=y,l(void 0,void 0,void 0,(function(){var e,t,n,i,r,o,s;return d(this,(function(a){switch(a.label){case 0:return U.sdkVersion=H,[4,Promise.all([ne(U.uuid),T(z),De()])];case 1:return t=a.sent(),n=t[0],i=t[1],r=t[2],U.uuid=n,s=c({},M,{code:i,fingerprint:r,bind:V}),e={},V?[4,Ue({withCredentials:!0})]:[3,3];case 2:o=a.sent(),t=o.userInfo,n=o.rawData,i=o.signature,r=o.iv,o=o.encryptedData,Object.assign(s,{userinfo_rawData:n,userinfo_signature:i,userinfo_iv:r,userinfo_encryptedData:o}),e.userInfo=t,a.label=3;case 3:return M.userTicket&&(s.loginAfterSecondaryMobile=!0),[4,Le(Ne(Ze),U.uuid,U,s)];case 4:return s=a.sent(),Object.assign(e,{uuid:U.uuid,loginInfo:s}),[2,e]}}))})))];case 1:if(C=B.sent(),O=C.uuid,k=void 0===O?"":O,S=C.loginInfo,I=C.userInfo,E=b||be(exports.API_TYPE.MOBILE),tt.hideToast(),!S.error)return[3,9];switch(O=S.error,x=O.code,C=O.data,O=O.message,x){case 101157:return[3,2];case 101159:return[3,4]}return[3,6];case 2:case 6:return[4,P(O)];case 3:return B.sent(),A=C.param,R=C.userTicket,ce.userTicket=R,ce.mobile=_,N=o.parse(A),L=N.requestCode,tt.navigateTo({url:"../yoda/modules/index/index?requestCode="+L+"&success="+W.bindRoute+"&fail="+W.bindRoute}),[3,8];case 4:return A=S.error.data,N=A.avatar,L=A.username,R=A.userTicket,h.setData({secondMobile:{pageShow:!0,imgSrc:N||"//p1.meituan.net/travelcube/72dab47c7b68917cb05849bf242fc9f117580.png",userName:L}}),[4,new Promise((function(t){E.on(exports.SessionEvent.onSecondMobileYesClick,(function(){return l(D,void 0,void 0,(function(){var n;return d(this,(function(i){switch(i.label){case 0:return h.setData({secondMobile:{pageShow:!1}}),n=t,[4,mt(c({},e,{userTicket:R}))];case 1:return n.apply(void 0,[i.sent()]),[2]}}))}))})),E.on(exports.SessionEvent.onSecondMobileNoClick,(function(){return l(D,void 0,void 0,(function(){var e;return d(this,(function(n){switch(n.label){case 0:return h.setData({secondMobile:{pageShow:!1}}),[4,He({uuid:k,userTicket:R})];case 1:return e=n.sent(),S=e.loginInfo,k=e.uuid,S.user.userId=S.user.id,S.data=S.user,t(bt(S,k,x,I)),[2]}}))}))}))}))];case 5:return[2,B.sent()];case 7:return B.sent(),[3,8];case 8:return[3,10];case 9:return[2,bt(S,k,m,I)];case 10:return[2]}var U,M,z,V}))}))},bt=function(e,t,n,i){return l(vt,void 0,void 0,(function(){var r;return d(this,(function(o){switch(o.label){case 0:return r=c({type:exports.API_TYPE.MOBILE},e.data,{uuid:t,code:n}),i&&(r.wxUserInfo=i),[4,ve(r)];case 1:return[2,o.sent()]}}))}))},wt={data:{configData:Z,mobileCode:"",phoneNumber:"",countdown:{limit:60,hidden:!0},sendCodeBtn:{active:!1},submitBtn:{active:!1},secondMobile:{pageShow:!1,imageSrc:""},get protocolConfig(){return we(ie)}},onReady:function(){var e=this.data.configData;tt.setNavigationBarTitle({title:e&&e.title||"绑定手机"}),this.Slider=this.selectComponent("#slider"),this.Image=this.selectComponent("#image")},onLoad:function(t){return l(this,void 0,void 0,(function(){var n,i,r;return d(this,(function(o){switch(o.label){case 0:return ot(),(n=le.session)&&n.type===exports.API_TYPE.WXV2&&(n=n.data,this.preData=n),"wxlogin"===e.WX_SDK_TYPE?[3,3]:t&&"1"===t.status?(s=t,l(vt,void 0,void 0,(function(){var e,t,n,i,r,o,a,u;return d(this,(function(c){switch(c.label){case 0:if(e=ce.userTicket,u=ce.mobile,t=s.requestCode,n=s.responseCode,i=j.risk_platform,r=j.risk_partner,a=j.risk_app,!(e&&t&&n))return[3,5];c.label=1;case 1:return c.trys.push([1,4,,5]),o=le.uuid,[4,(g=(_={requestCode:t,responseCode:n,userTicket:e,uuid:o=void 0===o?"":o,risk_platform:i,risk_partner:r,risk_app:a}).risk_app,g={uuid:v=_.uuid,risk_app:g,risk_platform:_.risk_platform,risk_partner:_.risk_partner},_={requestCode:_.requestCode,responseCode:_.responseCode,userTicket:_.userTicket},Le(Ne(Ve),v,g,_).then((function(e){if(e.error)throw new b(Ne(Ve),e.error);return e})))];case 2:return a=c.sent().user,[4,(h=a,f=o,p=u,l(vt,void 0,void 0,(function(){var e;return d(this,(function(t){switch(t.label){case 0:return i=f,r=(n=h).id,o=n.token,n=function(e,t){var n={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}(n,["id","token"]),e={type:exports.API_TYPE.MOBILE,userId:r,token:o,mobileUserInfo:n,uuid:i},p&&(e.mobile=p),[4,ve(e)];case 1:return t.sent(),[2]}var n,i,r,o}))})))];case 3:return c.sent(),[3,5];case 4:return[2,fe(u=c.sent())];case 5:return ce.userTicket="",ce.mobile="",[2]}var h,f,p,_,g,v}))})),[3,3]):[3,1];case 1:return t&&"0"===t.status?(tt.navigateBack({delta:1}),[4,P(""+ee.twiceVerifyFail+t.msg+"("+t.code+")")]):[3,3];case 2:o.sent(),o.label=3;case 3:return this.poiid=t.poiid,this.fromEntry=t.fromEntry,this.specialRiskCode=t.specialRiskCode||0,i=this,(r=t.code)?[3,5]:[4,T()];case 4:r=o.sent(),o.label=5;case 5:return i.loginCode=r,this.phoneBind="false"!==t.phoneBind,[2]}var s}))}))},onShow:function(){le.session&&le.session._emit(exports.SessionEvent.BINDPAGEONSHOW,le.session)},onUnload:function(){le.session&&le.session.redirectUrl&&(this.fromEntry=!1),le.session&&!this.fromEntry&&le.session._emit(exports.SessionEvent.NAVIBACK,le.session)},phoneInputHandler:function(e){(e=e&&e.detail)&&(e=e.value,this.setData({phoneNumber:e,sendCodeBtn:{active:11===e.length}}))},mobileCodeInputHandler:function(e){(e=e&&e.detail)&&(e=e.value,this.setData({mobileCode:e,submitBtn:{active:11===this.data.phoneNumber.length&&6===e.length},showVoiceTip:!1}))},getLoginCode:function(){return l(this,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return[4,new Promise((function(e,t){tt.checkSession({success:function(){e(!0)},fail:function(){e(!1)}})}))];case 1:return e.sent()||(this.updateSessionKey=!0),[2]}}))}))},sendVerifyCodeClick:function(e){return l(this,void 0,void 0,(function(){var t,n,i;return d(this,(function(r){switch(r.label){case 0:if(!this.data.sendCodeBtn.active)return[2];le.session&&le.session._emit(exports.SessionEvent.SMSCLICK,le.session.type),r.label=1;case 1:return r.trys.push([1,4,,5]),t=gt(this.data.phoneNumber),n=le,[4,ne(j.uuid)];case 2:return i=n.uuid=r.sent(),this.updateSessionKey&&(this.updateSessionKey=!1),[4,this.sendVerifyCodeHandler(t,i,e)];case 3:return r.sent(),[3,5];case 4:return[2,fe(i=r.sent())];case 5:return[2]}}))}))},yodaVerifyAndSendCode:function(e,t){return l(this,void 0,void 0,(function(){var n,i,r;return d(this,(function(o){switch(o.label){case 0:return[4,(s=t,K(rt(),{method:"POST",data:{requestCode:s},type:"form"}).then((function(e){var t=e.status,n=e.error;if(0===t&&n)throw new b(rt(),n,!0);return e})))];case 1:return i=o.sent().data,r=this.pageData=i,n=r.action,i=r.type,r=parseInt(i),isNaN(r)?(P(ee.illegalVerifyType+"("+i+")"),[2]):(40===r&&this.setData({showVoiceTip:!0}),this.extInfoParam={id:r,request_code:t,fingerprint:"",mobile:""+e},[4,this.requestExtInfo(n,this.extInfoParam)]);case 2:return o.sent(),[2]}var s}))}))},requestExtInfo:function(e,t){return l(this,void 0,void 0,(function(){var n;return d(this,(function(i){switch(i.label){case 0:return[4,(o=e,s=t,4===(s=Object.assign(s,{_token:r.r(s)})).id&&(s.moduleEnable=!0),K(it()+"/v2/ext_api/"+o+"/info",{method:"POST",data:s,type:"form"}))];case 1:if(1===(n=i.sent()).status)return this.startCountdown(),[2];switch((n=n.error).code){case 121048:this.Image.showImage({requestCode:n.request_code});break;case 121060:this.Slider.showSlider({requestCode:n.request_code});break;default:P(n.message)}return[2]}var o,s}))}))},onSliderEnd:function(e){return l(this,void 0,void 0,(function(){var t;return d(this,(function(n){switch(n.label){case 0:return 1!==(t=e.detail.status)?[3,2]:[4,this.requestExtInfo(this.pageData.action,this.extInfoParam)];case 1:return n.sent(),[3,3];case 2:0===t&&P("验证失败，请稍后重试"),n.label=3;case 3:return[2]}}))}))},onImageEnd:function(e){return l(this,void 0,void 0,(function(){var t;return d(this,(function(n){switch(n.label){case 0:return 1!==(t=e.detail.status)?[3,2]:[4,this.requestExtInfo(this.pageData.action,this.extInfoParam)];case 1:return n.sent(),[3,3];case 2:0===t&&P("验证失败，请稍后重试"),n.label=3;case 3:return[2]}}))}))},loginClick:function(e){return l(this,void 0,void 0,(function(){var t,n,i,o;return d(this,(function(s){switch(s.label){case 0:if(o=le.session,!this.data.submitBtn.active)return[2];o&&o._emit(exports.SessionEvent.LOGINCLICK,o.type),s.label=1;case 1:return s.trys.push([1,5,,6]),gt(t=this.data.phoneNumber),[4,me("mobile",t)];case 2:if(s.sent(),n=function(e){if(/^.{6}$/.test(e))return e;throw new y(ee.illegalSmsCode,1)}(this.data.mobileCode),!this.extInfoParam||!this.pageData)throw new y(ee.loginParamLoss);return N(ee.logining,"loading",60010),[4,function(e,t){if(40===t.id){t.voicecode=t.smscode;try{delete t.smscode}catch(e){}}var n=Object.assign(t,{_token:r.r(t)}),i=it()+"/v2/ext_api/"+e+"/verify";return K(i,{method:"POST",data:n,type:"form"}).then((function(e){var t=e.status,n=e.error;if(0===t&&n)throw new b(i,n,!0);return e}))}(this.pageData.action,c({},this.extInfoParam,{smscode:n}))];case 3:return i=s.sent(),n=i.data.response_code,i=this.extInfoParam.request_code,[4,this.loginHandler({that:this,requestCode:i,responseCode:n,mobile:t,poiid:this.poiid,code:this.preData&&this.preData.code,e:e,specialRiskCode:this.specialRiskCode,loginCode:this.loginCode,_session:o,phoneBind:this.phoneBind})];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),tt.hideToast(),[2,fe(o)];case 6:return[2]}}))}))},startCountdown:function(){var e=this,t=this.data.countdown;function n(){t.limit--,t.limit<0&&(t.limit=60,t.hidden=!0,clearInterval(i)),e.setData({countdown:t})}t.hidden=!1,t.limit=60;var i=setInterval(n,1e3);n(),N(ee.smsCodeSent)},onSecondMobileYesClick:function(){le.session&&(N(ee.logining,"loading",60010),le.session._emit(exports.SessionEvent.onSecondMobileYesClick))},onSecondMobileNoClick:function(){P("即将为您注册新的美团账号",{showCancel:!0}).then((function(e){le.session&&e&&(N(ee.logining,"loading",60010),le.session._emit(exports.SessionEvent.onSecondMobileNoClick))}))}},yt=(Object.assign(wt,{sendVerifyCodeHandler:function(e,t,n){return l(this,void 0,void 0,(function(){return d(this,(function(n){switch(n.label){case 0:return[4,(Object.assign(wt,{sendVerifyCodeHandler:function(e,t){return l(this,void 0,void 0,(function(){var n,i,r,o,s,a;return d(this,(function(u){switch(u.label){case 0:return n=j.risk_platform,i=j.risk_partner,r=j.risk_smsTemplateId,o=j.risk_smsPrefixId,s=j.risk_app,a=j.version_name,a={mobile:e,uuid:t,risk_app:s,risk_platform:n,risk_partner:i,specialRiskCode:this.specialRiskCode,risk_smsTemplateId:r,risk_smsPrefixId:o,version_name:a,countryCode:"86"},this.poiid&&(a.poiid=this.poiid),[4,(c=a,l(void 0,void 0,void 0,(function(){var e,t,n,i,r,o,s,a,u,l,h;return d(this,(function(d){return e=c.uuid,t=c.risk_app,n=c.risk_platform,i=c.risk_partner,r=c.mobile,l=c.specialRiskCode,h=void 0===l?0:l,a=c.risk_smsTemplateId,o=void 0===a?0:a,u=c.risk_smsPrefixId,s=void 0===u?0:u,l=c.version_name,a=c.poiid,u=c.countryCode,l={uuid:e,risk_app:t,risk_platform:n,risk_partner:i,sdkVersion:H,risk_smsTemplateId:o,risk_smsPrefixId:s,version_name:l},h={mobile:r,countryCode:u,specialRiskCode:h},a&&(h.poiid=a),[2,Le(Ne(Qe),e,l,h).then((function(e){var t=e.error;e=e.data;if(t)throw new b(Ne(Qe));if(e)return e.requestCode;throw new b(Ne(Qe),t,!0)}))]}))})))];case 1:return a=u.sent(),[4,wt.yodaVerifyAndSendCode.call(this,e,a)];case 2:return u.sent(),[2]}var c}))}))},loginHandler:function(){return mt.apply(this,arguments)}}),wt.sendVerifyCodeHandler.call(this,e,t))];case 1:return n.sent(),[2]}}))}))},loginHandler:function(){return mt.apply(this,arguments)}}),wt),kt={data:{webViewSrc:""},onLoad:function(e){return l(this,void 0,void 0,(function(){var t;return d(this,(function(n){t="";try{t=decodeURIComponent(e.src)}catch(e){t=ie.protocolList[0].url}return this.setData({webViewSrc:t}),[2]}))}))},onShow:function(){},onUnload:function(){}};exports.EntryPage=pt,exports.BindPage=yt,exports.webViewPage=kt,exports.setAppConfig=function(e){Object.assign(j,e)},exports.setSdkRoute=function(e){e.startsWith("/")||(e="/"+e),W.sdkRoute=e},exports.setBindPageOption=function(e){Object.assign(Z,e)},exports.setLoginPageOption=function(e){Object.assign(J,e)},exports.setAuthrizePageOption=function(e){Object.assign($,e)},exports.setLoginCheck=function(e){U=e},exports.setChangeBindPageOption=function(e){Object.assign(Q,e)},exports.config=F,exports.routeConfig=W,exports.mobileLogin=Pe,exports.utils=I,exports.SDKError=y,exports.WxAPIError=f,exports.WxRequestError=g,exports.authState=le,exports.destroySession=de,exports.getAuthInfo=_e,exports.removeAuthInfo=ge,exports.version=H,exports.login=xe,exports.cleanLogin=function(e){return ge().then((function(){return xe(e)}))},exports.wxMobileLogin=dt,exports.wxLogin=ft,exports.logout=function(e){if(e){var t=j.minigram_type,n=j.minigram_appid;return C(Ne(Ee.thirdMobileInputLogoutApi),{method:"POST",type:"form",data:{token:e,minigram_type:t,minigram_appid:n}}).then((function(e){return ge(),e.data.result})).catch((function(e){return ge(),!1}))}},exports.isLogout=function(e){var t=j.minigram_type,n=j.minigram_appid;return C(Ne(Ee.thirdMobileInputIsLogoutApi),{method:"POST",type:"form",data:{token:e,minigram_type:t,minigram_appid:n}}).then((function(e){if(e.data){if(e.data.error)throw new b(Ne(Ee.thirdMobileInputIsLogoutApi),e.data.error);return e.data.result}})).catch((function(e){}))},exports.getSdkEnv=B,exports.setEnv=function(e){q.env=e},exports.getEnv=G;