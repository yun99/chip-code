var e=Object.create,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,s=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,i=e=>t(e,"__esModule",{value:!0}),u=u=>((e,s,i)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let u of n(s))a.call(e,u)||"default"===u||t(e,u,{get:()=>s[u],enumerable:!(i=r(s,u))||i.enumerable});return e})(i(t(null!=u?e(s(u)):{},"default",u&&u.__esModule&&"default"in u?{get:()=>u.default,enumerable:!0}:{value:u,enumerable:!0})),u);((e,r)=>{for(var n in i(e),r)t(e,n,{get:r[n],enumerable:!0})})(exports,{default:()=>h});var l=u(require("./ms.js")),o=u(require("./ob.js")),m=u(require("./ma.js")),c=u(require("./u8.js")),{MOUDULE_NAME:g}=require("./vw.js"),{tabBarList:f,pages:y}=require("./gj.js"),p=[...["navigateTo","switchTab","redirectTo","navigateBack"],...["reLaunch","navigateToMiniProgram","navigateBackMiniProgram"],...["openLink"]],h=class{constructor(e=null){this.getExtFn=()=>this.extFn,this.getExtFnName=()=>this.extFnName,this.init=e=>{return t=this,r=null,n=function*(){const t=e.getUri(),r=t.getScheme(),n=t.getUrl(),s=t.getPath();if(!(0,m.isPluginRouterUriRequest)(e)){if(!n)throw new Error(`${JSON.stringify({resultCode:l.RESULT_CODE.REQUEST_ERROR,errMsg:"url不能为空",finallyUrl:`${n}`})}`);{let t="navigateTo";const a=s.startsWith("/")?s.substr(1):s;if((0,m.isNavigateBack)(r,s))t="navigateBack",this._setFnName(t);else if("pages/404/index"===a)this._setFnName(t);else{if(!y||!y.length)throw new Error(`${JSON.stringify({resultCode:l.RESULT_CODE.ERROR,errMsg:"构建后的pages内容错误，请确认routerEntry.js文件",finallyUrl:`${n}`})}`);if(-1===y.indexOf(a))throw new Error(`${JSON.stringify({resultCode:l.RESULT_CODE.NOT_FOUND,errMsg:"页面不存在，请确认",finallyUrl:`${n}`})}`);this.extFn&&(o.log.info(g,"有外部跳转函数传入",t),t=this.extFnName),f&&f.length&&-1!==f.indexOf(a)?1===e.isMemoryWarningAppear()?(t=(0,c.isMMP)()?"switchTab":"reLaunch",e.setMemoryWarning(0)):t="switchTab":getCurrentPages().length>=8&&(t="redirectTo"),this._setFnName(t)}}}},new Promise(((e,s)=>{var a=e=>{try{u(n.next(e))}catch(e){s(e)}},i=e=>{try{u(n.throw(e))}catch(e){s(e)}},u=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,i);u((n=n.apply(t,r)).next())}));var t,r,n},this.setExtFnName(e)}setExtFn(e=null){e&&"function"==typeof e&&(this.extFn=e)}setExtFnName(e=null){p&&-1!==p.indexOf(e)&&wx[e]&&(this.extFnName=e,this.setExtFn(wx[e]))}getFn(){return this.fn}getFnName(){return this.fnName}_setFnName(e){p&&-1!==p.indexOf(e)&&wx[e]&&"function"==typeof wx[e]&&(this.fnName=e,this.fn=wx[e])}};