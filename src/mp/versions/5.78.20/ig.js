var e=Object.create,o=Object.defineProperty,t=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.getPrototypeOf,i=Object.prototype.hasOwnProperty,l=e=>o(e,"__esModule",{value:!0}),s=s=>((e,r,l)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let s of n(r))i.call(e,s)||"default"===s||o(e,s,{get:()=>r[s],enumerable:!(l=t(r,s))||l.enumerable});return e})(l(o(null!=s?e(r(s)):{},"default",s&&s.__esModule&&"default"in s?{get:()=>s.default,enumerable:!0}:{value:s,enumerable:!0})),s);((e,t)=>{for(var n in l(e),t)o(e,n,{get:t[n],enumerable:!0})})(exports,{initRoomInfo:()=>f});var c=s(require("./ob.js")),a=s(require("./ia.js")),m=(e,o)=>{var t;let n=`scene:[${null==(t=getApp())?void 0:t.$scene}] count:${o}`;return new Promise(((o,t)=>{tt.getRoomInfo({success(r){var i,l;if(null==(i=null==r?void 0:r.roomInfo)?void 0:i.roomID){let e=(null==(l=null==r?void 0:r.roomInfo)?void 0:l.roomID)||"-999";c.log.info("LiveRoom initRoomInfo success",r.roomInfo,n),a.globalCustomLXParams.setCustomLXParamsToAPP("broadcast_id",e),o(r)}else c.log.info("LiveRoom initRoomInfo deficiency",r,n,e),t(r)},fail(o){c.log.error("LiveRoom initRoomInfo fail",o,n,e),t(o)},complete(e){t(e)}})}))},u=["023009","023010","023011","023012","027004","027005","025001"],f=(e={})=>{var o;try{const o=tt.getEnterOptionsSync();let t=`scene:[${null==o?void 0:o.scene}]`,n=(e,...n)=>{c.log.info(e,t,o,...n)};n("LiveRoom initRoomInfo start"),m(e,0).catch((()=>{m(e,1).then((e=>{n("LiveRoom initRoomInfo refetch success",e)})).catch((t=>{n("LiveRoom initRoomInfo refetch fail",t),u.includes(String(null==o?void 0:o.scene))&&setTimeout((()=>{m(e,2).then((e=>{n("LiveRoom initRoomInfo refetch2 success",e)})).catch((e=>{n("LiveRoom initRoomInfo refetch2 fail",e)}))}),5e3)}))}))}catch(t){c.log.error("LiveRoom initRoomInfo error",t,`scene:[${null==(o=getApp())?void 0:o.$scene}]`,e)}};