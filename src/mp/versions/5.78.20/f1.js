var e=Object.create,t=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,r=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,n=e=>t(e,"__esModule",{value:!0}),u=u=>((e,r,n)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let u of i(r))s.call(e,u)||"default"===u||t(e,u,{get:()=>r[u],enumerable:!(n=o(r,u))||n.enumerable});return e})(n(t(null!=u?e(r(u)):{},"default",u&&u.__esModule&&"default"in u?{get:()=>u.default,enumerable:!0}:{value:u,enumerable:!0})),u);((e,o)=>{for(var i in n(e),o)t(e,i,{get:o[i],enumerable:!0})})(exports,{default:()=>f});var l=u(require("./kw.js")),p=u(require("./gs.js")),a=u(require("./gg.js")),d=u(require("./iy.js")),c=u(require("./pa.js")),g=u(require("./u8.js")),m=u(require("./gf.js")),I=class extends l.default{constructor(e,t){super(e,t),this.poiInfo=null,this.destory=()=>{this.event.off(c.LOGIN_SUCCESS,this.setCommonPoiBindThis)},this.poiInfo=null,this.loginSuccessBindThis=this.loginSuccess.bind(this),this.event.on(c.LOGIN_SUCCESS,this.loginSuccessBindThis)}loginSuccess(){this.setCommonPoi(),this.updatePoiInfo()}updatePoiInfo(){var e;try{const t=this.getPoiId(),o=this.getPoiIdStr(),i=this.getPoiInfo("cityId");if(!(0,g.isApp)()||(null==(e=d.default.app)?void 0:e.$poiName)||!t)return void(0,a.poiLogger)("updatePoiInfo  poiId",t);(0,m.togglePoi)({strategy:p.PoiApiStrategy.DEFAULT,poiIds:`${t}`,poiIdStr_poiIds:o,cityId:i}).then((e=>{var t;(null==(t=null==e?void 0:e.targetPoiInfo)?void 0:t.poiName)?d.default.updatePoiInfo(null==e?void 0:e.targetPoiInfo):(0,a.poiLogger)("登录后门店逻辑执行 then  poiName = null",null==e?void 0:e.targetPoiInfo)})).catch((e=>{(0,a.poiLogger)("登录后门店逻辑执行失败",e)}))}catch(e){(0,a.poiLogger)("登录后门店逻辑执行失败",e)}}setCommonPoi(){try{this.app.$service.setCommonPoi({poiId:this.getPoiId(),poiCityId:this.getPoiInfo("cityId"),poiIdStr:this.getPoiIdStr()}).then((e=>{(0,a.poiLogger)("登录时候调用设置常用自提站",e)})).catch((e=>{(0,a.poiLogger)("登录时候调用设置常用自提站失败 catch ",e)}))}catch(e){(0,a.poiLogger)("登录时候调用设置常用自提站失败",e)}}getPoiInfo(e=null){return e?this.poiInfo&&this.poiInfo[e]?this.poiInfo[e]:null:this.poiInfo}isExperiencePoi(){var e;return 1===(null==(e=this.poiInfo)?void 0:e.poiServiceType)}getBizId(){return 4}getPoiId(){return this.getPoiInfo("poiId")||0}getPoiIdStr(){return this.getPoiInfo("poiIdStr")||this.getPoiId()||0}},f=I;f.register=e=>{const t=new I("poi",e);return e.addModule(t),t};