var e=Object.create,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,s=e=>t(e,"__esModule",{value:!0}),l=l=>((e,i,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let l of o(i))a.call(e,l)||"default"===l||t(e,l,{get:()=>i[l],enumerable:!(s=r(i,l))||s.enumerable});return e})(s(t(null!=l?e(i(l)):{},"default",l&&l.__esModule&&"default"in l?{get:()=>l.default,enumerable:!0}:{value:l,enumerable:!0})),l);((e,r)=>{for(var o in s(e),r)t(e,o,{get:r[o],enumerable:!0})})(exports,{default:()=>m});var n=l(require("./gs.js")),u=l(require("./u8.js")),c=l(require("./gg.js")),p="[poiControler]:[DataCenter]:",m=class{static checkPrefetchDataVaid(e){var t;let r=!0;const o=null==e?void 0:e.lbsLocationResult;return(0,u.isInWX)()&&(r=(null==(t=null==o?void 0:o.jumpInfo)?void 0:t.type)!==n.PoiResType.LOCATIOM_TAG),r}static isPromis(e){return!(!e||"function"!=typeof e.then)}static requstFetchData(e,t){if((0,u.isInWX)())return new Promise(((r,o)=>{m.isPromis(t)&&t.then((e=>{var t,o;(0,c.poiLogger)(p,"prefetchPromise",null==e?void 0:e.lbsLocationResult),m.checkPrefetchDataVaid(e)?r(e):((null==(o=null==(t=null==e?void 0:e.lbsLocationResult)?void 0:t.jumpInfo)?void 0:o.type)===n.PoiResType.LOCATIOM_TAG&&(0,c.poiMainCatReport)(c.PoiFirstTarget.PREFETCH_IP),(0,c.poiLogger)(p,"requstData prefetchPromise error",null==e?void 0:e.lbsLocationResult))})).catch((e=>{(0,c.poiLogger)("warn","requstData error",e)})),m.isPromis(e)&&e.then((e=>{(0,c.poiLogger)(p,"locationPromise",null==e?void 0:e.lbsLocationResult),r(e)})).catch((e=>{(0,c.poiLogger)("warn","requstData locationPromise error",e),o(e)}))}));const r=[];return m.isPromis(t)&&r.push(t),m.isPromis(e)&&r.push(e),Promise.race(r)}};